define(["require","exports","tslib","react","modules/clean/abuse/report_flag","modules/clean/react/account_menu/account_menu","modules/clean/react/file_action_button_type","modules/clean/react/file_action_button_type","modules/clean/react/file_viewer/constants","modules/clean/react/open_in_app/button","modules/clean/react/share_download/button","modules/clean/react/share_sync/button","modules/clean/react/shared_link/actions","modules/clean/react/sign_in/button","modules/clean/react/sign_in/popover_or_mobile_item","modules/clean/react/title_bar/controls_container","modules/clean/react/user_notifications/dropdown","modules/clean/react/size_class/constants","modules/clean/react/title_bar/overflow_menu","modules/clean/react/share_download/util","modules/clean/viewer","modules/clean/react/copy_to_dropbox/button","spectrum-sharing/utils/sharing_constants"],(function(e,n,t,o,l,a,r,i,s,u,c,d,m,p,f,h,_,y,v,k,L,S,w){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SharedLinkControlsSmall=n.RemoveShareLink=n.SharedLinkFolderControls=void 0,o=t.__importDefault(o),m=t.__importStar(m);var b=(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.render=function(){var e=this.props,n=e.folder,t=e.outOfQuota,r=e.sharedLinkInfo,i=e.sharePermission,c=e.shareToken,d=e.showSyncCoachmark,m=e.sizeClass,f=e.user,k=e.encryptionOptions,S=e.folderPreviewSession,w=e.shouldDisplayLayoutChange,b=r.hasPublicAudienceOrVisibility,C=r.displayName,O=i.canRemoveLinkUids,P=c.linkKey,T=O.length>0;if(m===y.SizeClass.Small)return o.default.createElement(E,{canRemoveLink:T,canRemoveLinkUids:O,displayName:C,linkKey:P,folder:n,sharedLinkInfo:r,shareToken:c,sharePermission:i,user:f,encryptionOptions:k,folderPreviewSession:S,shouldDisplayLayoutChange:w});var I=!!n.open_in_app_data;return o.default.createElement(h.TitleBarControlsContainer,null,!1!==b?o.default.createElement(l.ReportFlag,{isFolderLink:!0,sharedLink:r.url,shareToken:c}):null,I?o.default.createElement(u.OpenInAppButton,{urls:n.open_in_app_data,userActionContext:s.UserActionContext.TitleBarMain,shouldDisplayLayoutChange:w}):null,null!=f?o.default.createElement(a.AccountMenu,{user:f,viewer:L.Viewer.get_viewer()}):o.default.createElement(p.SignInButton,{isPrimaryButton:I,shouldDisplayLayoutChange:w}),w?null:this.renderCTAButtons(n,t,r,i,c,d,f,k,S,w),o.default.createElement(v.OverflowMenu,{hideOnDisabled:!0},T?o.default.createElement(g,{contentName:C,linkKey:P,userId:O[0]}):null),null!=f?o.default.createElement("div",{className:"react-title-bar__divider"}):null,null==f||f.is_guest_admin?null:o.default.createElement(_.UserNotificationsDropdown,{isPagelet:!1}))},n.prototype.renderCTAButtons=function(e,n,t,l,a,r,i,s,u,m){var p=l.canSyncToDropboxRoles,f=a.linkType!==w.SharedLinkType.Shmodel&&p.length>0;return o.default.createElement(o.default.Fragment,null,f&&u?o.default.createElement(d.ShareSyncButton,{folder:e,outOfQuota:n,sharedLinkInfo:t,sharePermission:l,shareToken:a,showSyncCoachmark:r,user:i,folderPreviewSession:u}):null,o.default.createElement(S.CopyToDropboxButton,{shareToken:a,sharedLinkInfo:t,sharePermission:l,copyable:e,encryptionOptions:s,user:i,folderPreviewSession:u,importance:"primary",showDownloadOption:!1,shouldDisplayLayoutChange:m}),o.default.createElement(c.ShareDownloadButton,{copyable:e,sharedLinkInfo:t,shareToken:a,sharePermission:l,user:i,downloadOnly:!0,encryptionOptions:s,folderPreviewSession:u}))},n})(o.default.Component);n.SharedLinkFolderControls=b;var g=(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.removeShareLink=function(e){e.preventDefault();var t=n.props,o=t.contentName,l=t.userId,a=t.linkKey;m.removeLinkAsNonOwner(l,a,o)},n}return t.__extends(n,e),n.prototype.render=function(){return o.default.createElement(v.PopoverOrMobileItem,{className:"__remove_share_link",onSelect:this.removeShareLink},i.getFileActionButtonText(r.FileActionButtonType.REMOVE_LINK))},n})(o.default.Component);function E(e){var n=e.canRemoveLink,t=e.canRemoveLinkUids,l=e.displayName,r=e.linkKey,i=e.folder,s=e.sharedLinkInfo,u=e.shareToken,c=e.sharePermission,d=e.user,m=e.encryptionOptions,p=e.folderPreviewSession,h=e.shouldDisplayLayoutChange;return o.default.createElement("div",{className:"react-title-bar__controls"},null!=d?o.default.createElement("div",{className:"fsl-account-menu-small"},o.default.createElement(a.AccountMenu,{user:d,viewer:L.Viewer.get_viewer()})):null,o.default.createElement(v.OverflowMenu,null,n?o.default.createElement(g,{key:"remove-link",contentName:l,linkKey:r,userId:t[0]}):null,h?null:o.default.createElement("div",null,k.getDownloadOptionsAsPopoverOrMobileItems(c,s,u,i,m,p)),null==d?o.default.createElement(f.SignInPopoverOrMobileItem,{key:"sign-in"}):null))}n.RemoveShareLink=g,n.SharedLinkControlsSmall=E}));
//# sourceMappingURL=controls.min.js-vfl18r9NC.map