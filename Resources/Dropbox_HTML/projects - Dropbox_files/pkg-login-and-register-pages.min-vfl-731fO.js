define("modules/clean/auth/common/captcha",["require","exports","tslib","classnames","react","modules/clean/react/components/css","modules/clean/abuse/captcha_helper"],(function(e,t,a,o,s,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Captcha=t.CaptchaComponent=t.clear_captcha_response=t.handle_captcha_errors=t.get_captcha_responses=void 0,o=a.__importDefault(o),s=a.__importDefault(s),t.get_captcha_responses=function(e){var t=e.getWrappedComponent();return{"g-recaptcha-response":t.recaptcha_response,"funcaptcha-response":t.funcaptcha_response}},t.handle_captcha_errors=function(e,t){return e.getWrappedComponent().handle_captcha_errors(t)},t.clear_captcha_response=function(e){return e.getWrappedComponent().clear_captcha_response()};var i=(function(t){function r(e){return t.call(this,e)||this}return a.__extends(r,t),r.prototype.handle_captcha_errors=function(t){var o=this;return!(!t||!t.funcaptcha_response)&&(new Promise((function(t,a){e(["modules/clean/abuse/funcaptcha_modal"],t,a)})).then(a.__importStar).then((function(e){(0,e.openFuncaptchaModal)(o.props.email||"",o.props.source,(function(e){o.funcaptcha_response=e,o.props.onSubmit()}),o.props.onReady)})),!0)},r.prototype.clear_captcha_response=function(){this.funcaptcha_response=void 0},r.prototype.componentDidMount=function(){n.LoadRecaptcha(void 0,!0)},r.prototype.render=function(){return s.default.createElement("div",{ref:"container_div",className:o.default({"recaptcha-v2-challenge-container":!0,"recaptcha-v2-challenge-container--invisible":!0})},s.default.createElement("div",{ref:"captcha_div",className:"recaptcha_v2_challenge"}))},r.prototype.submit=function(){this.clear_captcha_response(),this.props.onSubmit()},r})(s.default.Component);t.CaptchaComponent=i,t.Captcha=r.requireCssWithComponent(i,["/static/css/recaptcha-vflIN6j39.css"])})),define("modules/clean/auth/common/utils",["require","exports","tslib","modules/constants/page_load","modules/core/i18n","modules/core/notify","modules/core/uri","modules/clean/form_util/name_parser"],(function(e,t,a,o,s,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notifyCaptchaNotLoaded=t.twoFactorRecoveryUrl=t.getFormattedName=t.lastNameGoesFirst=t.generateId=void 0,i=a.__importDefault(i),t.generateId=function(e){return e+Math.random().toString().slice(2)};var l=["ja","ko","zh"];t.lastNameGoesFirst=function(){return l.includes(o.USER_LOCALE.slice(0,2))},t.getFormattedName=function(e,a,o){if(!o)return[e,a];var s=i.default.splitFullName(e),r=s[0],n=s[1];return t.lastNameGoesFirst()?n?[n,r]:[e,a]:[r,n]},t.twoFactorRecoveryUrl=function(e,t){var a=new n.URI({path:"/twofactor_recovery"});return e&&a.updateQuery({remember_me:e.toString()}),t&&!["/",""].includes(t)&&a.updateQuery({cont:t}),a.toString()},t.notifyCaptchaNotLoaded=function(){r.Notify.warning(s.intl.formatMessage({id:"977N0X",defaultMessage:"Your browser appears to be blocking dropboxcaptcha.com, which is required for authentication. To resolve this issue, please update any anti-virus or ad-blocking software settings to allow connections to dropboxcaptcha.com."}))}})),define("modules/clean/auth/common/error",["require","exports","tslib","dompurify","react"],(function(e,t,a,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthError=void 0,o=a.__importStar(o);var r=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.shouldComponentUpdate=function(e){return this.hasNewError(e.error)},t.prototype.hasNewError=function(e){var t;return!this.hasMatchingErrorMessage(e)||(null==e?void 0:e.clientTimestamp)!==(null===(t=this.props.error)||void 0===t?void 0:t.clientTimestamp)},t.prototype.hasMatchingErrorMessage=function(e){var t,a;return(null==e?void 0:e.message_html)===(null===(t=this.props.error)||void 0===t?void 0:t.message_html)&&(null==e?void 0:e.message_text)===(null===(a=this.props.error)||void 0===a?void 0:a.message_text)},t.prototype.render=function(){var e=this.props.error;return e&&e.message_html?s.default.createElement("div",{className:"text-input-error-wrapper",dangerouslySetInnerHTML:{__html:o.sanitize(e.message_html)}}):e&&e.message_text?s.default.createElement("div",{className:"text-input-error-wrapper"},s.default.createElement("span",{className:"error-message","aria-live":"polite","aria-atomic":"true"},e.message_text,s.default.createElement("span",{className:"text-input-error-hidden ax-visually-hidden","aria-hidden":"true",style:{visibility:"hidden"}},e.clientTimestamp))):s.default.createElement("div",{className:"text-input-error-wrapper"})},t})((s=a.__importDefault(s)).default.Component);t.AuthError=r})),define("modules/clean/auth/common/inputs/checkbox",["require","exports","tslib","dompurify","react","classnames","modules/clean/auth/common/error","modules/clean/auth/common/utils","modules/clean/auth/common/types","dig-components/text_fields","dig-components/controls","dig-components/icons","dig-components/icons/src"],(function(e,t,a,o,s,r,n,i,l,u,c,p,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthCheckbox=void 0,o=a.__importStar(o),s=a.__importDefault(s),r=a.__importDefault(r);var m=function(e){var t=e.label,a=e.htmlFor,r=e.unsafeLabelHTML;return t?s.default.createElement("label",{htmlFor:a,className:"checkbox_label"},s.default.createElement("span",null,t)):r?s.default.createElement("label",{htmlFor:a,className:"checkbox_label"},s.default.createElement("span",{dangerouslySetInnerHTML:{__html:o.sanitize(r)}})):null},g=function(e,t){var a=e.name,r=e.error,n=e.label,i=e.onChange,l=e.className,g=e.checked,f=r&&(r.message_text||r.message_html);return s.default.createElement("div",{className:"auth__checkbox-row"},s.default.createElement(u.FormRow,{variant:"control"},s.default.createElement(c.Checkbox,{className:l,name:a,id:t,onChange:i,checked:g,"aria-checked":g}),s.default.createElement(m,{htmlFor:t,label:n})),f&&s.default.createElement(u.FormHelperText,{isInvalid:!0},s.default.createElement(p.UIIcon,{src:d.FailLine,size:"small"}),(null==r?void 0:r.message_html)?s.default.createElement("span",{dangerouslySetInnerHTML:{__html:o.sanitize(r.message_html)}}):s.default.createElement("span",null,null==r?void 0:r.message_text)))},f=(function(e){function t(t){var a=e.call(this,t)||this;return a.id=i.generateId(t.name),a}return a.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.checked,o=e.className,i=e.disabled,u=e.error,c=e.inline,p=e.label,d=e.maestroStyle,f=e.name,h=e.onChange,_=e.unsafeLabelHTML,S=e.variant;if(S===l.AuthFormVariant.DIG20)return s.default.createElement(g,a.__assign({},this.props));var E=r.default("checkbox",S,o,{"checkbox-inline":c}),b=s.default.createElement("input",{type:"checkbox",id:this.id,name:f,checked:t,onChange:h,disabled:i,"aria-checked":t});d&&(b=s.default.createElement("label",{className:"maestro_checkbox",htmlFor:this.id},b,s.default.createElement("span",null)));var y=s.default.createElement(n.AuthError,{error:u});return s.default.createElement("div",{className:E},!d&&y,b,s.default.createElement(m,{htmlFor:this.id,label:p,unsafeLabelHTML:_}),d&&y)},t})(s.default.Component);t.AuthCheckbox=f})),define("modules/clean/auth/common/inputs/text",["require","exports","tslib","classnames","react","dompurify","modules/core/i18n","classnames","modules/clean/auth/common/error","modules/clean/auth/common/types","modules/clean/auth/common/utils","modules/clean/components/password_strength_meter","dig-components/text_fields","dig-components/icons","dig-components/icons/src","modules/clean/react/input_dig"],(function(e,t,a,o,s,r,n,i,l,u,c,p,d,m,g,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthTextField=void 0,o=a.__importDefault(o),s=a.__importDefault(s),r=a.__importStar(r),i=a.__importDefault(i);var h=function(e){var t=e.error&&(e.error.message_html||e.error.message_text),a=o.default("text-input-input",e.className,{"input-error":!!t,"numeric-input":e.type===u.AuthTextInputType.NUMBER}),r=e.passwordStrengthProps||{},i=n.intl.formatMessage({id:"/uvN/C",defaultMessage:"Good passwords are hard to guess. Use uncommon words or inside jokes, non-standard uPPercasing, creative spelllling, and non-obvious numbers and symbols"});return s.default.createElement("div",{className:"text-input-wrapper"},e.type===u.AuthTextInputType.PASSWORD&&e.measureStrength&&s.default.createElement(p.PasswordStrengthMeter,{password:e.value||"",zxcvbnPostTti:!0,className:e.variant,bubblePosition:r.position,bubbleDescription:r.description||i,bubbleClassName:r.className}),s.default.createElement("input",{id:e.id,type:e.type,className:a,name:e.name,value:e.value,onChange:e.onChange,disabled:e.disabled,autoFocus:e.autoFocus,autoComplete:e.autoComplete?"on":"off","aria-invalid":t?"true":"false",inputMode:e.type===u.AuthTextInputType.NUMBER?"numeric":"text",onKeyDown:e.type===u.AuthTextInputType.NUMBER?function(e){!0===e.ctrlKey||!0===e.metaKey||8===e.keyCode||46===e.keyCode||9===e.keyCode||13===e.keyCode||e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105||144===e.keyCode||37===e.keyCode||39===e.keyCode||e.preventDefault()}:void 0}),!e.value&&s.default.createElement("label",{htmlFor:e.id},e.placeholder))},_=function(e){var t=e.disabled,a=e.name,o=e.placeholder,n=e.error,l=e.onChange,u=e.measureStrength,c=!(!n||!n.message_text&&!n.message_html);return s.default.createElement("div",{className:"auth__input-wrapper"},u?s.default.createElement(f.password,{name:"password",className:i.default("auth__password-input",{"is-invalid":!!c}),measureStrength:!0,placeholder:o,onChange:l}):s.default.createElement(d.TextInput,{disabled:t,isInvalid:!!c,name:a,value:t?o:void 0,onChange:l,placeholder:o,wrapperProps:{className:"auth__input-field"}}),c&&s.default.createElement(d.FormHelperText,{isInvalid:!0},s.default.createElement(m.UIIcon,{src:g.FailLine,size:"small"}),(null==n?void 0:n.message_html)?s.default.createElement("span",{dangerouslySetInnerHTML:{__html:r.sanitize(n.message_html)}}):s.default.createElement("span",null,null==n?void 0:n.message_text)))},S=(function(e){function t(t){var a=e.call(this,t)||this;return a.id=c.generateId(t.name),a}return a.__extends(t,e),t.prototype.render=function(){if(this.props.variant===u.AuthFormVariant.DIG20)return s.default.createElement(_,a.__assign({},this.props));var e=this.props.maestroStyle?null:this.props.className,t=o.default("text-input",this.props.variant,e),r=s.default.createElement(l.AuthError,{error:this.props.error}),n=s.default.createElement("div",{className:t},!this.props.maestroStyle&&r,s.default.createElement(h,{id:this.id,name:this.props.name,onChange:this.props.onChange,value:this.props.value,disabled:this.props.disabled,className:this.props.inputClassName,error:this.props.error,variant:this.props.variant,type:this.props.type,placeholder:this.props.placeholder,measureStrength:this.props.measureStrength,passwordStrengthProps:this.props.passwordStrengthProps,autoComplete:this.props.autoComplete||!1,autoFocus:this.props.autoFocus||!1}),this.props.maestroStyle&&r);if(!this.props.maestroStyle)return n;var i=o.default(this.props.className,{"register-form__name-field":"email"!==this.props.type&&"password"!==this.props.type,"register-form__field":"email"===this.props.type||"password"===this.props.type});return s.default.createElement("div",{className:i},this.props.label&&s.default.createElement("label",{className:"register-form__field-label",htmlFor:this.id},this.props.label),n)},t})(s.default.Component);t.AuthTextField=S})),define("modules/clean/auth/common/stats",["require","exports","tslib","modules/clean/analytics","modules/core/browser","modules/core/browser_detection","modules/core/exception","modules/clean/auth/login/types","modules/clean/metrics/index"],(function(e,t,a,o,s,r,n,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppleUXAnalyticsLogger=t.GoogleUXAnalyticsLogger=t.EmailAuthUXAnalyticsLogger=t.AuthUXAnalyticsLogger=t.AuthAMPLogger=t.AuthType=void 0,s=a.__importStar(s),r=a.__importStar(r);var u;(function(e){e.CREDENTIALS="email",e.GOOGLE="google_auth",e.APPLE="apple_auth"})(u=t.AuthType||(t.AuthType={}));var c=new Set(["form_error","user_exists","access_denied","tfa_required","sso_required","emails_do_not_match_redirect"]),p=new Set(["enable_twofactor_required","emails_do_not_match","emails_do_not_match_redirect","not_verified","email_not_verified","google_login_not_allowed","access_denied","disabled_account","tos_required","sso_required","no_email_in_response","requires_password_on_first_link","apple_login_not_allowed","apple_login_not_allowed_for_teams","user_cancelled_authorize"]);function d(e){return{url:s.get_href(),status:e.status?e.status:void 0}}function m(e){return{url:s.get_href(),remember_me:e.remember_me?e.remember_me.toString():void 0,pair_user:e.pair_user?e.pair_user.toString():void 0,err_msg:e.err_msg?e.err_msg:void 0}}function g(e,t){return e&&t.has(e)?e:"unknown"}function f(){for(var e="other",t=0,a=[[r.chrome,"chrome"],[r.edge,"edge"],[r.mozilla,"firefox"],[r.msie,"msie"],[r.safari,"safari"]];t<a.length;t++){var o=a[t],s=o[0],n=o[1];if(s){e=n;break}}return e}function h(e,t,o){void 0===o&&(o=1);try{l.getMetricsReporter().createStats({ns:"web_auth",name:e},a.__assign(a.__assign({},t),{browser:f()})).record(o)}catch(o){n.reportException({err:o,severity:n.SEVERITY.NONCRITICAL,tags:["web_auth_amp_logging","acquisition_eng"],exc_extra:a.__assign({metricName:e},t)})}}function _(e,t){o.UXAnalyticsLogger.log(e,t)}t.AuthAMPLogger={logSignupIntent:function(){h("signup/intent",{},1)},logSignupAttempt:function(e){h("signup/attempt",{authType:e},1)},logSignupResponse:function(e,t,a){"funcaptcha_response"!==a?t?h("signup/success",{authType:e},1):(h("signup/success",{authType:e},0),h("signup/failure",{authType:e,error:g(a,c)},1)):h("signup/failure",{authType:e,error:a},1)},logLoginIntent:function(e){h("login/intent",{loginType:e||"normal"},1)},logLoginAttempt:function(e,t){h("login/attempt",{authType:e,loginType:t||"normal"},1)},logCredentialsLoginResponse:function(e,t){var a=u.CREDENTIALS,o=e||"normal";if("funcaptcha_response"!==t)if(t===i.LoginResponseStatus.OK||t===i.LoginResponseStatus.TWOFACTOR)h("login/success",{authType:a,loginType:o},1);else{var s=void 0;switch(t){case i.LoginResponseStatus.TOS_SIGNATURE_REQUIRED:s="tos_required";break;case i.LoginResponseStatus.SSO:s="sso_required";break;case i.LoginResponseStatus.TWOFACTOR_REQUIRED:s="enable_twofactor_required";break;case i.LoginResponseStatus.RATELIMIT:s="rate_limited";break;case i.LoginResponseStatus.EXPIRED:s="login_expired";break;case i.LoginResponseStatus.PASSWORD_EXPIRED:s="password_expired";break;case i.LoginResponseStatus.PASSWORD_DECRYPTION_ERROR:s="password_descryption_error";break;case i.LoginResponseStatus.ERROR:s="generic_error";break;case"form_error":s=t;break;default:s="unknown"}h("login/success",{authType:a,loginType:o},0),h("login/failure",{authType:a,loginType:o,error:s},1)}else h("login/failure",{authType:a,loginType:o,error:t},1)},logThirdPartyLoginResponse:function(e,t,a,o){var s=t||"normal";a||"tfa_required"===o?h("login/success",{authType:e,loginType:s},1):(h("login/success",{authType:e,loginType:s},0),h("login/failure",{authType:e,loginType:s,error:g(o,p)},1))},log2faResponse:function(e,t){var a=e||"normal";if(t===i.LoginResponseStatus.OK)h("2fa/success",{loginType:a},1);else{var o=void 0;switch(t){case i.LoginResponseStatus.REQUIRES_ROLE:o="requires_role";break;case i.LoginResponseStatus.EXPIRED:o="twofactor_expired";break;case i.LoginResponseStatus.INVALID_CREDENTIALS:o="invalid_credentials";break;case i.LoginResponseStatus.ERROR:o="generic_error";break;case"u2f_error":case"code_error":o=t;break;default:o="unknown"}h("2fa/success",{loginType:a},0),h("2fa/failure",{loginType:a,error:o},1)}}},t.AuthUXAnalyticsLogger={logSignupModalShown:function(e){_("signup_modal_shown",{url:s.get_href(),kind:e})},logLoginModalShown:function(e){_("login_modal_shown",{url:s.get_href(),kind:e})},logSignupModalDismissed:function(e){_("signup_modal_dismissed",{url:s.get_href(),kind:e})},logLoginModalDismissed:function(e){_("login_modal_dismissed",{url:s.get_href(),kind:e})}},t.EmailAuthUXAnalyticsLogger={logLoginStart:function(){_("email_login_start",{url:s.get_href()})},logSplitSignupContinue:function(){_("email_split_signup_continue",{url:s.get_href()})},logLoginResponse:function(e){switch(e.status){case i.LoginResponseStatus.OK:_("email_login_succeeded",d(e));break;case i.LoginResponseStatus.TWOFACTOR:_("email_login_requires_two_factor",d(e));break;case i.LoginResponseStatus.TWOFACTOR_REQUIRED:case i.LoginResponseStatus.TOS_SIGNATURE_REQUIRED:case i.LoginResponseStatus.EXPIRED:case i.LoginResponseStatus.SSO:_("email_login_redirect",d(e));break;default:_("email_login_failed",d(e))}},logLoginError:function(){_("email_login_failed",{url:s.get_href()})},logSignupStart:function(){_("email_signup_start",{url:s.get_href()})},logSignupResponse:function(){_("email_signup_succeeded",{url:s.get_href()})},logSignupError:function(){_("email_signup_failed",{url:s.get_href()})}},t.GoogleUXAnalyticsLogger={logLoginStart:function(){_("google_login_start",{url:s.get_href()})},logLoginResponse:function(e){e.success?_("google_login_succeeded",m(e)):"tfa_required"===e.err_msg?_("google_login_requires_two_factor",m(e)):_("google_login_failed",m(e))},logSignupStart:function(){_("google_signup_start",{url:s.get_href()})},logSignupResponse:function(e){e.success?_("google_signup_succeeded",m(e)):_("google_signup_failed",m(e))}},t.AppleUXAnalyticsLogger={logLoginStart:function(){_("sia_login_start",{url:s.get_href()})},logLoginResponse:function(e){e.success?_("sia_login_succeeded",m(e)):"tfa_required"===e.err_msg?_("sia_login_requires_two_factor",m(e)):"requires_password_on_first_link"===e.err_msg?_("sia_login_requires_password",m(e)):_("sia_login_failed",m(e))}}})),define("modules/clean/auth/common/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthFormVariant=t.AuthButtonVariant=t.AuthTextInputType=void 0,(function(e){e.EMAIL="email",e.PASSWORD="password",e.TEXT="text",e.NUMBER="number"})(t.AuthTextInputType||(t.AuthTextInputType={})),(function(e){e.BIG="big",e.SMALL="small",e.STANDARD="standard"})(t.AuthButtonVariant||(t.AuthButtonVariant={})),(function(e){e.PAPER_COMPACT="paper-compact",e.SMALL="small",e.STANDARD="standard",e.DIG20="dig20"})(t.AuthFormVariant||(t.AuthFormVariant={}))})),define("modules/clean/auth/login/2fa/authenticator_form",["require","exports","tslib","classnames","react","modules/core/i18n","modules/clean/auth/common/inputs/text","modules/clean/auth/common/types","modules/clean/auth/common/utils","modules/clean/auth/login/2fa/trust_checkbox"],(function(e,t,a,o,s,r,n,i,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Authenticator2FAForm=void 0,o=a.__importDefault(o),s=a.__importDefault(s),t.Authenticator2FAForm=function(e){var t=s.default.createElement("button",{className:o.default("mc-button mc-button-primary",{"inline-submit":e.inlineSubmit,"login-button":!e.inlineSubmit}),type:"submit"},r.intl.formatMessage({id:"K57Ot6",defaultMessage:"Enter"}));return s.default.createElement("form",{className:"two-factor-form clearfix 2fa-phone-form",onSubmit:e.onSubmit},e.displayHeader&&s.default.createElement("div",{className:"login-header"},r.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"})),s.default.createElement("div",{className:"login-info two-factor-uses-authenticator"},r.intl.formatMessage({id:"sufs69",defaultMessage:"Enter the code generated by your authenticator app."})),s.default.createElement("div",{className:o.default({"inline-input-submit-pair":e.inlineSubmit,"backup-verification-code-form":e.inlineSubmit})},s.default.createElement(n.AuthTextField,{className:"login-text-input inline-input",disabled:!1,error:e.error,maestroStyle:e.maestroStyle,name:"code",onChange:e.onInputChange,value:e.value,placeholder:r.intl.formatMessage({id:"DFLqLE",defaultMessage:"6-digit code"}),type:i.AuthTextInputType.NUMBER,variant:e.variant,autoFocus:!0,autoComplete:!1}),e.inlineSubmit&&t),!e.hideTrustCheckbox&&s.default.createElement(u.TwoFactorTrustCheckbox,{checked:e.trusted,maestroStyle:e.maestroStyle,onChange:e.onInputChange,tooltipPosition:e.trustTooltipPosition,variant:e.variant}),!e.inlineSubmit&&t,!e.hideHelp&&s.default.createElement("div",{className:"two-factor-need-help"},s.default.createElement("a",{href:l.twoFactorRecoveryUrl(e.rememberMe,e.continuationUrl),className:"twofactor_recovery_url"},r.intl.formatMessage({id:"gR0Vz1",defaultMessage:"Having trouble getting a code?"}))))}})),define("modules/clean/auth/login/2fa/email_form",["require","exports","tslib","classnames","react","modules/core/i18n","modules/clean/auth/common/inputs/text","modules/clean/auth/common/types"],(function(e,t,a,o,s,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Email2FAForm=void 0,o=a.__importDefault(o),s=a.__importDefault(s),t.Email2FAForm=function(e){var t=s.default.createElement("button",{className:o.default("mc-button mc-button-primary",{"inline-submit":e.inlineSubmit,"login-button":!e.inlineSubmit}),type:"submit"},r.intl.formatMessage({id:"K57Ot6",defaultMessage:"Enter"}));return s.default.createElement("form",{className:"two-factor-form clearfix 2fa-email-form",onSubmit:e.onSubmit},e.displayHeader&&s.default.createElement("div",{className:"login-header"},r.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"})),s.default.createElement("div",{className:"login-info two-factor-uses-email"},r.intl.formatMessage({id:"FuPzY9",defaultMessage:"We sent a code to {email} and any devices you’ve linked to this account. Enter the code to continue."},{span:function(e){return s.default.createElement("span",{className:"tfa-email"},e)},email:e.email})),s.default.createElement("div",{className:o.default({"inline-input-submit-pair":e.inlineSubmit,"backup-verification-code-form":e.inlineSubmit})},s.default.createElement(n.AuthTextField,{className:"login-text-input inline-input",disabled:!1,error:e.error,maestroStyle:e.maestroStyle,name:"code",onChange:e.onInputChange,value:e.value,placeholder:r.intl.formatMessage({id:"DFLqLE",defaultMessage:"6-digit code"}),type:i.AuthTextInputType.NUMBER,variant:e.variant,autoFocus:!0,autoComplete:!1}),e.inlineSubmit&&t),!e.inlineSubmit&&t,s.default.createElement("div",{className:"two-factor-need-help"},s.default.createElement("a",{href:"#",onClick:e.onResendCodeClick,className:"resend-two-factor-code two-factor-uses-sms"},r.intl.formatMessage({id:"HTy4qW",defaultMessage:"Resend code"}))))}})),define("modules/clean/auth/login/2fa/phone_form",["require","exports","tslib","classnames","react","modules/core/i18n","modules/clean/auth/common/inputs/text","modules/clean/auth/common/types","modules/clean/auth/common/utils","modules/clean/auth/login/2fa/trust_checkbox"],(function(e,t,a,o,s,r,n,i,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Phone2FAForm=void 0,o=a.__importDefault(o),s=a.__importDefault(s),t.Phone2FAForm=function(e){var t=s.default.createElement("button",{className:o.default("mc-button mc-button-primary",{"inline-submit":e.inlineSubmit,"login-button":!e.inlineSubmit}),type:"submit"},r.intl.formatMessage({id:"K57Ot6",defaultMessage:"Enter"}));return s.default.createElement("form",{className:"two-factor-form clearfix 2fa-phone-form",onSubmit:e.onSubmit},e.displayHeader&&s.default.createElement("div",{className:"login-header"},r.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"})),s.default.createElement("div",{className:"login-info two-factor-uses-sms"},r.intl.formatMessage({id:"lWPbUP",defaultMessage:"We sent a code to your phone number ending in <span>{last_two_digits}</span>."},{span:function(e){return s.default.createElement("span",{className:"last-two-digits"},e)},last_two_digits:e.lastTwoDigits})),s.default.createElement("div",{className:o.default({"inline-input-submit-pair":e.inlineSubmit,"backup-verification-code-form":e.inlineSubmit})},s.default.createElement(n.AuthTextField,{className:"login-text-input inline-input",disabled:!1,error:e.error,maestroStyle:e.maestroStyle,name:"code",onChange:e.onInputChange,value:e.value,placeholder:r.intl.formatMessage({id:"DFLqLE",defaultMessage:"6-digit code"}),type:i.AuthTextInputType.NUMBER,variant:e.variant,autoFocus:!0,autoComplete:!1}),e.inlineSubmit&&t),!e.hideTrustCheckbox&&s.default.createElement(u.TwoFactorTrustCheckbox,{checked:e.trusted,maestroStyle:e.maestroStyle,onChange:e.onInputChange,tooltipPosition:e.trustTooltipPosition,variant:e.variant}),!e.inlineSubmit&&t,!e.hideHelp&&s.default.createElement("div",{className:"two-factor-need-help"},s.default.createElement("a",{href:"#",onClick:e.onResendCodeClick,className:"resend-two-factor-code two-factor-uses-sms"},r.intl.formatMessage({id:"HTy4qW",defaultMessage:"Resend code"})),s.default.createElement("a",{href:l.twoFactorRecoveryUrl(e.rememberMe,e.continuationUrl),className:"twofactor_recovery_url"},r.intl.formatMessage({id:"gR0Vz1",defaultMessage:"Having trouble getting a code?"}))))}})),define("modules/clean/auth/login/2fa/seckey_form",["require","exports","tslib","react","modules/core/i18n","modules/clean/auth/login/2fa/trust_checkbox","modules/clean/auth/login/types","modules/clean/react/image","modules/clean/react/sprite","modules/clean/static_urls"],(function(e,t,a,o,s,r,n,i,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SecKey2FAForm=void 0,o=a.__importDefault(o);var c=function(){return o.default.createElement(i.Image,{src:u.static_url("/static/images/security_keys/insert-vflkCfC4_.png"),srcHiRes:u.static_url("/static/images/security_keys/insert@2x-vflTxG2RJ.png"),className:"seckey-insert"})},p=function(){return o.default.createElement(i.Image,{src:u.static_url("/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"),srcHiRes:u.static_url("/static/images/icons/ajax-loading-small@2x-vflAxdZTP.gif"),className:"seckey-loading-status"})},d=function(e){return o.default.createElement("div",{className:"two-factor-seckey-instructions"},o.default.createElement("p",null,o.default.createElement("span",{style:{fontWeight:"bold"}},s.intl.formatMessage({id:"DljPpW",defaultMessage:"Insert your security key to use it"}))," ",e.securityKeyState===n.SecurityKeyState.LOADING&&o.default.createElement(p,null),e.securityKeyState===n.SecurityKeyState.FOUND&&o.default.createElement(m,null)),s.intl.formatMessage({id:"eonxEJ",defaultMessage:"After inserting, tap your key if it has a button or gold disk."}))},m=function(){return o.default.createElement(l.Sprite,{group:"web",name:"bulletpoint-check",alt:"",className:"seckey-loading-status"})};t.SecKey2FAForm=function(e){return o.default.createElement("form",{className:"two-factor-form clearfix 2fa-seckey-form"},e.displayHeader&&o.default.createElement("div",{className:"login-header"},s.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"})),o.default.createElement("div",{className:"login-info two-factor-uses-u2f"},o.default.createElement(c,null),e.securityKeyState!==n.SecurityKeyState.NOT_FOUND&&o.default.createElement(d,{securityKeyState:e.securityKeyState}),o.default.createElement("div",{className:"text-input"},o.default.createElement("div",{className:"text-input-error-wrapper"})),e.securityKeyState===n.SecurityKeyState.NOT_FOUND&&o.default.createElement("div",{className:"two-factor-seckey-instructions"},o.default.createElement("div",{style:{color:"red"}},o.default.createElement("span",{className:"error-msg"},e.error||s.intl.formatMessage({id:"uqQwD8",defaultMessage:"Key not found."}))),o.default.createElement("button",{className:"button-tertiary two-factor-seckey-retry",onClick:e.onRetry},s.intl.formatMessage({id:"n1zYou",defaultMessage:"Retry"}))),!e.hideTrustCheckbox&&o.default.createElement(r.TwoFactorTrustCheckbox,{checked:e.trusted,maestroStyle:e.maestroStyle,onChange:e.onInputChange,tooltipPosition:e.trustTooltipPosition,variant:e.variant}),o.default.createElement("div",{className:"two-factor-use-phone-instead"},o.default.createElement("a",{href:"#",onClick:e.onChange2FA},e.secondaryTwoFactorType===n.TwoFactorType.SMS?s.intl.formatMessage({id:"cDmyI0",defaultMessage:"Send SMS instead"}):s.intl.formatMessage({id:"yzAIpy",defaultMessage:"Use mobile authenticator instead"})))))}})),define("modules/clean/auth/login/2fa/trust_checkbox",["require","exports","tslib","react","modules/core/browser_detection","modules/core/i18n","modules/clean/auth/common/inputs/checkbox","modules/clean/react/sprite_div","modules/clean/react/tooltip"],(function(e,t,a,o,s,r,n,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestOnlyTrustTooltipContent=t.TwoFactorTrustCheckbox=void 0,o=a.__importDefault(o),s=a.__importStar(s),i=a.__importDefault(i),l=a.__importStar(l);var u=function(){return o.default.createElement("div",{className:"two-factor-trusted-info"},s.is_mobile_or_tablet()?r.intl.formatMessage({id:"UkQZnd",defaultMessage:"Trusted devices will never ask you for a security code again. You should only trust this device if you trust everyone who uses it."}):r.intl.formatMessage({id:"UraGyT",defaultMessage:"Trusted computers will never ask you for a security code again. You should only trust this computer if you trust everyone who uses it."}))};t.TestOnlyTrustTooltipContent=u;var c=function(e){return o.default.createElement("div",{className:"tooltip-wrapper info-icon"},o.default.createElement(l.Tooltip,{position:l.TooltipPosition[e.position||"TOP"],tooltip_classname:"twofactor-trust-tooltip",tooltip_contents:o.default.createElement(u,null)},o.default.createElement(i.default,{group:"web",name:"info",alt:r.intl.formatMessage({id:"+SX5vq",defaultMessage:"More information"}),text:s.is_mobile_or_tablet()?r.intl.formatMessage({id:"+79s4f",defaultMessage:"Trust this device"}):r.intl.formatMessage({id:"Ey/8Q8",defaultMessage:"Trust this computer"}),spritePosition:"right"})))};t.TwoFactorTrustCheckbox=function(e){return o.default.createElement(n.AuthCheckbox,{className:"remember-me",name:"trusted",checked:e.checked,inline:!0,disabled:!1,maestroStyle:e.maestroStyle,onChange:e.onChange,variant:e.variant,label:o.default.createElement(c,{position:e.tooltipPosition})})}})),define("modules/clean/auth/login/api",["require","exports","tslib","modules/clean/deprecated_ajax/ajax_as_promised_jquery","api_v2/default_user_client","modules/clean/auth/login/types","modules/clean/viewer","modules/core/exception","modules/core/i18n"],(function(e,t,a,o,s,r,n,i,l){"use strict";function u(){var e=n.Viewer.get_viewer().get_users()[0];return i.assert(null!=e,"Expect user is logged in when pairing"),new s.DefaultUserApiV2Client(e)}function c(e){var t;return(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t[".tag"])?{status:r.LoginResponseStatus.ERROR,html_response:!1,message:e.message}:{status:r.LoginResponseStatus.ERROR,html_response:!1,message:l.intl.formatMessage({id:"vuVMnM",defaultMessage:"Something went wrong."})}}function p(e){return a.__awaiter(this,void 0,Promise,(function(){var t,o,s,r,n;return a.__generator(this,(function(a){switch(a.label){case 0:t=e.login_email,o=e.encrypted_password,i.assert(null!=t&&null!=o,"Expect login email and password not null"),s=u(),r={login_email:t,encrypted_password:o,remember_me:e.remember_me},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,s.ns("team").rpc("account_pair_login",r,{})];case 2:return(n=a.sent()).two_factor_request?[2,n.two_factor_request]:[2,n];case 3:return[2,c(a.sent())];case 4:return[2]}}))}))}function d(e){return a.__awaiter(this,void 0,Promise,(function(){var t,o,s,r;return a.__generator(this,(function(a){switch(a.label){case 0:t=e.checkpoint_token,o=e.code,i.assert(null!=t&&null!=o,"Expect checkpoint token and code not null"),s=u(),r={checkpoint_token:t,code:o,remember_me:e.remember_me},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,s.ns("team").rpc("account_pair_two_factor_login",r,{})];case 2:return[2,a.sent()];case 3:return[2,c(a.sent())];case 4:return[2]}}))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.submitTwoFactorForm=t.retryU2fAuthentication=t.resendTwoFactorCode=t.submitCredentialsForm=t.accountPairTwoFactorLogin=t.accountPairLogin=t.checkSsoState=void 0,o=a.__importStar(o),t.checkSsoState=function(e){return new Promise((function(t){return o.WebRequest({url:"/sso_state",data:{email:e},success:function(e){return t(JSON.parse(e))}})}))},t.accountPairLogin=p,t.accountPairTwoFactorLogin=d,t.submitCredentialsForm=function(e,t){var a;switch(e){case"multi":a="/ajax_multi_login";break;case"pairing":a="/team/join/new_pair_login_ajax";break;case"cli_link_nonce":a="/cli_link_nonce";break;case"bidirectional_pair":return p(t);default:a="/ajax_login"}return new Promise((function(e,s){return o.WebRequest({url:a,type:"POST",data:t,success:function(t){e(JSON.parse(t))},error:function(t,a,o){"{"!==o[0]&&-1===o.indexOf(":")?e({status:r.LoginResponseStatus.ERROR,html_response:!1,message:o}):s(JSON.parse(o))}})}))},t.resendTwoFactorCode=function(e,t){return new Promise((function(a,s){return o.WebRequest({url:"/twofactor_resend",data:{backup:e,mobile_push:t},success:a,error:s})}))},t.retryU2fAuthentication=function(){return new Promise((function(e,t){return o.WebRequest({url:"/account/twofactor/u2f_start_authentication",success:e,error:t})}))},t.submitTwoFactorForm=function(e,t){var a;switch(e){case"multi":a="/ajax_multi_verify_code";break;case"pairing":a="/team/join/new_pair_login_ajax";break;case"cli_link_nonce":a="/cli_link_twofactor";break;case"admin":a="/admin/login/twofactor";break;case"bidirectional_pair":return d(t);default:a="/ajax_verify_code"}return new Promise((function(e,s){return o.WebRequest({url:a,type:"POST",data:t,success:function(t){return e(JSON.parse(t))},error:function(e,t,a){return s(JSON.parse(a))}})}))}})),define("modules/clean/auth/login/apple_login_button",["require","exports","tslib","react","classnames","modules/core/i18n","modules/clean/auth/login/login_error"],(function(e,t,a,o,s,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppleLoginButton=void 0,o=a.__importDefault(o),s=a.__importDefault(s),t.AppleLoginButton=function(e){var t=e.buttonProps||{},a=s.default("auth-apple","button-primary",t.className),i=t.text||r.intl.formatMessage({id:"pTMcB4",defaultMessage:"Sign in with Apple"});return o.default.createElement("div",{className:"login-form-container__apple-div"},o.default.createElement("button",{className:a,onClick:e.onClick,type:"button",disabled:e.disabled||t.disabled,"data-uxa-log":"sia_login_start"},o.default.createElement("div",{className:"sign-in-text"},i)),e.error&&o.default.createElement(n.LoginError,{className:"apple-login-error",message:e.error}))}})),define("modules/clean/auth/login/credentials_form",["require","exports","tslib","classnames","react","modules/core/browser_detection","modules/core/i18n","modules/clean/auth/common/inputs/checkbox","modules/clean/auth/common/inputs/text","modules/clean/auth/common/types","modules/clean/auth/common/captcha","modules/clean/auth/login/login_error","modules/clean/auth/login/google_login_button","modules/clean/auth/login/apple_login_button","modules/clean/auth/login/types","modules/clean/react/image","modules/clean/react/sprite_div","modules/clean/static_urls","modules/clean/react/file_viewer/conversions/conversion_utils"],(function(e,t,a,o,s,r,n,i,l,u,c,p,d,m,g,f,h,_,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginCredentialsForm=void 0,o=a.__importDefault(o),s=a.__importDefault(s),h=a.__importDefault(h);var E=function(e){var t="/forgot",a=e.target;return e.appendEmail&&(t="/forgot?email_from_login="+e.email,a=void 0),s.default.createElement("a",{className:"forgot-password-link",href:t,target:a},e.text||n.intl.formatMessage({id:"ovBgtz",defaultMessage:"Forgot your password?"}))},b=function(e){return s.default.createElement("div",{id:"navisite"},s.default.createElement("br",null),s.default.createElement("a",{href:"/navi_redirect/login",target:e.openLinkInNewTab?"_blank":void 0},n.intl.formatMessage({id:"vnuqfB",defaultMessage:"Dropbox NAVI"})))},y=function(e){return s.default.createElement("div",{className:"sso-optout"},n.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"})," ",s.default.createElement("a",{href:"#",onClick:e.onClick},n.intl.formatMessage({id:"fRMS5E",defaultMessage:"Log in with Dropbox credentials"})))},v=function(){return s.default.createElement("span",{className:"login-loading-indicator ajax-loading"},s.default.createElement(f.Image,{src:_.static_url("/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"),srcHiRes:_.static_url("/static/images/icons/ajax-loading-small@2x-vflAxdZTP.gif")}))},C=function(){return s.default.createElement("div",{className:"sso-description"},s.default.createElement(h.default,{group:"web",name:"lock",text:n.intl.formatMessage({id:"WH73xS",defaultMessage:"Single sign-on enabled"})}))},w=function(e){return s.default.createElement("div",{className:"credentials-form__fields"},s.default.createElement(l.AuthTextField,{value:e.emailValue,className:o.default("login-text-input","login-email",e.emailProps.className),onChange:e.onInputChange,disabled:e.disabled||e.emailProps.readonly||!1,label:e.emailProps.label||(e.maestroStyle?n.intl.formatMessage({id:"hK3Vsp",defaultMessage:"Email"}):void 0),placeholder:e.emailProps.placeholder||(e.maestroStyle?n.intl.formatMessage({id:"mx5U0y",defaultMessage:"you@mail.com"}):n.intl.formatMessage({id:"hK3Vsp",defaultMessage:"Email"})),error:e.emailError,maestroStyle:e.maestroStyle,name:"login_email",type:u.AuthTextInputType.EMAIL,variant:e.variant}),e.ssoState===g.SsoState.OFF&&s.default.createElement(l.AuthTextField,{value:e.passwordValue,placeholder:e.passwordProps.placeholder||(e.maestroStyle?n.intl.formatMessage({id:"JtdF1I",defaultMessage:"Your password"}):n.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"})),name:"login_password",className:o.default("login-text-input","login-password",e.passwordProps.className),error:e.passwordError,inputClassName:"password-input",onChange:e.onInputChange,measureStrength:!1,label:e.passwordProps.label||(e.maestroStyle?n.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"}):void 0),maestroStyle:e.maestroStyle,disabled:e.disabled,variant:e.variant,type:u.AuthTextInputType.PASSWORD}))},T=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setCaptchaComponent=function(e){t.captchaComponent=e},t.getCaptchaResponses=function(){return t.props.supportsCaptcha?c.get_captcha_responses(t.captchaComponent):{}},t.handleCaptchaErrors=function(e){return!!t.props.supportsCaptcha&&c.handle_captcha_errors(t.captchaComponent,e)},t.submitRecaptcha=function(){t.props.supportsCaptcha?t.captchaComponent.getWrappedComponent().submit():t.props.onSubmit()},t}return a.__extends(t,e),t.prototype.render=function(){var e,t,a=this.props.rememberMeProps||{},l=this.props.googleLoginProps,f=this.props.appleLoginProps,h=o.default({clearfix:!this.props.hideRememberMe||!this.props.hideHelp&&r.is_supported_mobile_browser()}),_=this.props.openLinksInNewTab?"_blank":void 0,T=o.default("clearfix","credentials-form","login-form",{"sso-required":this.props.ssoState!==g.SsoState.OFF,"sso-optional":this.props.ssoState===g.SsoState.OPTIONAL}),R=l&&l.positionBelow,L=l&&!l.positionBelow,A=f&&f.positionBelow,M=f&&!f.positionBelow,N=R||A,F=L||M,I=l?s.default.createElement(d.GoogleLoginButton,{buttonProps:l.buttonProps,disabled:this.props.disabled||this.props.isSubmitting,error:this.props.googleLoginError,onClick:this.props.onGoogleLoginClick,variant:this.props.variant}):null,k=f?s.default.createElement(m.AppleLoginButton,{buttonProps:f.buttonProps,disabled:this.props.disabled||this.props.isSubmitting,error:this.props.appleLoginError,onClick:this.props.onAppleLoginClick}):null,O=this.props.hideHelp||this.props.ssoState===g.SsoState.REQUIRED?null:s.default.createElement(E,{email:this.props.emailValue,target:_,appendEmail:void 0===this.props.forgotPasswordProps.appendEmail||this.props.forgotPasswordProps.appendEmail,text:this.props.forgotPasswordProps.text}),P=s.default.createElement("button",{className:o.default("login-button","signin-button","button-primary",this.props.loginButtonProps.className),type:"submit",disabled:this.props.disabled||this.props.isSubmitting||this.props.loginButtonProps.disabled},this.props.ssoState===g.SsoState.OFF&&s.default.createElement("div",{className:"signin-text"},this.props.loginButtonProps.text||n.intl.formatMessage({id:"raLp6W",defaultMessage:"Sign in"})),this.props.ssoState!==g.SsoState.OFF&&s.default.createElement("div",{className:"sso-text"},n.intl.formatMessage({id:"LgJiOW",defaultMessage:"Continue"}))),x=s.default.createElement("div",{className:"hr-label"},s.default.createElement("span",{className:"hr-label__text"},n.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"}))),D=this.props.variant===u.AuthFormVariant.PAPER_COMPACT,U=S.shouldShowSimplifiedModal(),G=this.props.isPaperLogin;return(function(e){e[e.INLINE_WITH_LOGIN_BUTTON=0]="INLINE_WITH_LOGIN_BUTTON",e[e.ON_NEW_LINE=1]="ON_NEW_LINE",e[e.BELOW_FORM=2]="BELOW_FORM"})(e||(e={})),N||D?G&&!D?t=e.BELOW_FORM:D||U?t=e.INLINE_WITH_LOGIN_BUTTON:!N||D||U||(t=e.BELOW_FORM):t=e.ON_NEW_LINE,s.default.createElement("div",{className:"login-form-container--subcontainer"},L&&I,M&&k,F&&!this.props.hideCredentialFields&&x,s.default.createElement("form",{className:T,onSubmit:this.props.onLoginClick,method:"POST"},!this.props.hideCredentialFields&&s.default.createElement(w,{disabled:this.props.disabled,emailError:this.props.emailError,emailProps:this.props.emailProps,emailValue:this.props.emailValue,maestroStyle:this.props.maestroStyle,onInputChange:this.props.onInputChange,passwordError:this.props.passwordError,passwordProps:this.props.passwordProps,passwordValue:this.props.passwordValue,ssoState:this.props.ssoState,variant:this.props.variant}),this.props.loginError&&s.default.createElement(p.LoginError,{message:this.props.loginError}),this.props.supportsCaptcha&&!U&&s.default.createElement(c.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,onReady:this.props.onCaptchaReady,source:"LOGIN"}),s.default.createElement("div",{className:h},this.props.ssoState!==g.SsoState.OFF&&s.default.createElement(C,null),!this.props.hideRememberMe&&s.default.createElement(i.AuthCheckbox,{checked:this.props.rememberMeValue,className:"remember-me",disabled:a.disabled||this.props.disabled,inline:void 0===a.inline||a.inline,label:a.label||n.intl.formatMessage({id:"ztezCK",defaultMessage:"Remember me"}),maestroStyle:this.props.maestroStyle,name:"remember_me",onChange:this.props.onInputChange,variant:this.props.variant}),t===e.INLINE_WITH_LOGIN_BUTTON&&O,!D&&!this.props.hideCredentialFields&&P,this.props.isSubmitting&&s.default.createElement(v,null),this.props.ssoState===g.SsoState.OPTIONAL&&s.default.createElement(y,{onClick:this.props.onSsoChangeClick}),t===e.ON_NEW_LINE&&s.default.createElement("div",{className:"login-need-help"},O),this.props.showNaviSiteLogin&&s.default.createElement(b,{openLinkInNewTab:this.props.openLinksInNewTab}),D&&P)),N&&!this.props.hideCredentialFields&&!U&&x,R&&I,A&&k,t===e.BELOW_FORM&&s.default.createElement("div",{className:"login-need-help"},O),this.props.supportsCaptcha&&U&&s.default.createElement(c.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,onReady:this.props.onCaptchaReady,source:"LOGIN"}))},t})(s.default.Component);t.LoginCredentialsForm=T})),define("modules/clean/auth/login/form",["require","exports","tslib","classnames","react","modules/core/browser","modules/core/exception","modules/core/html","modules/core/notify","modules/core/uri","modules/clean/auth/common/types","modules/clean/auth/common/utils","modules/clean/auth/login/2fa/authenticator_form","modules/clean/auth/login/2fa/email_form","modules/clean/marketing_tracker","modules/clean/auth/login/2fa/phone_form","modules/clean/auth/login/2fa/seckey_form","modules/clean/auth/login/api","modules/clean/auth/login/credentials_form","modules/clean/auth/login/sso_utils","modules/clean/auth/login/types","modules/clean/react/components/css","modules/core/i18n","modules/clean/profile_services/profile_services_constants","modules/clean/profile_services/profile_services_link","modules/clean/auth/authenticator","modules/clean/security/passwords","modules/clean/auth/common/stats","modules/clean/react/fedramp/fedramp_util"],(function(e,t,a,o,s,r,n,i,l,u,c,p,d,m,g,f,h,_,S,E,b,y,v,C,w,T,R,L,A){"use strict";var M;Object.defineProperty(t,"__esModule",{value:!0}),t.TestOnlyLoginStep=t.TestOnlyLoginFormComponent=t.LoginForm=void 0,o=a.__importDefault(o),s=a.__importDefault(s),r=a.__importStar(r),_=a.__importStar(_),C=a.__importDefault(C),T=a.__importStar(T),(function(e){e[e.CREDENTIALS_OR_SSO=0]="CREDENTIALS_OR_SSO",e[e.EMAIL_2FA=1]="EMAIL_2FA",e[e.PHONE_2FA=2]="PHONE_2FA",e[e.AUTHENTICATOR_2FA=3]="AUTHENTICATOR_2FA",e[e.SECKEY_2FA=4]="SECKEY_2FA"})(M||(M={})),t.TestOnlyLoginStep=M;var N=(function(e){function t(t){var o,d=e.call(this,t)||this;d.testOnlyGetSsoChecker=function(){return d.ssoChecker},d.setCredentialsFormComponent=function(e){d.credentialsFormComponent=e},d.testOnlyGetCredentialsFormComponent=function(){return d.credentialsFormComponent},d.onInputChange=function(e){var t=e.currentTarget,o={},s=a.__assign({},d.state.localErrors),r=!1;switch(t.name){case"login_email":o.email=t.value,s.email=void 0,r=!0;break;case"login_password":o.password=t.value,s.password=void 0;break;case"remember_me":o.rememberMe=t.checked;break;case"trusted":o.trusted=t.checked;break;case"code":o.twoFactorCode=t.value,s.twoFactor=void 0}o.localErrors=s,d.setState(o,(function(){r&&d.ssoChecker.checkSsoState(o.email,d.onSsoStateUpdate)}))},d.onSsoStateUpdate=function(e,t){e===d.state.email&&d.setState({ssoState:t})},d.onSsoChangeClick=function(){n.assert(d.state.ssoState===b.SsoState.OPTIONAL,"User can change SSO state only when it is optional",{tags:["react-login-form"]}),d.setState({ssoState:b.SsoState.OFF})},d.generateThirdPartyAuthUrl=function(e,t){var a={fname:e.profile.given_name,lname:e.profile.family_name,email:e.profile.email,picture_url:e.profile.picture_url,refresh_token:e.refresh_token,email_sig:e.email_sig,automatic_redirect:t.toString(),cont:d.props.continuationUrl||"/"};return d.props.googleLoginProps&&d.props.googleLoginProps.signupTag&&(a.signup_tag=d.props.googleLoginProps.signupTag),d.props.googleLoginProps&&d.props.googleLoginProps.signupEndpoint&&(a.signup_endpoint=d.props.googleLoginProps.signupEndpoint),String(new u.URI({path:"/third_party_signup"}).updateQuery(a))},d.handleGoogleCallback=function(e){L.AuthAMPLogger.logThirdPartyLoginResponse(L.AuthType.GOOGLE,d.props.type,e.success,e.err_msg),L.GoogleUXAnalyticsLogger.logLoginResponse(e);var t=A.getFedrampRedirectUrlIfApplicable(e.is_fedramp_user||!1,d.props.continuationUrl||"/");if(e.success)d.handleLoginFormEvent(b.LoginFormEvent.GOOGLE_LOGIN_SUCCESS),!1!==d.props.canRedirect?(l.Notify.success(v.intl.formatMessage({id:"Ce9FpX",defaultMessage:"Log in successful! Your browser will be redirected in a few seconds."})),r.redirect(t)):e.is_fedramp_user&&!d.props.forceOnLoginSuccess?(t=A.getFedrampRedirectUrlIfApplicable(!0,d.props.continuationUrl||r.get_href()),r.redirect(t)):d.props.onLoginSuccess&&d.props.onLoginSuccess({display_name:e.display_name,id:e.user_id,email:e.profile.email,is_fedramp_user:e.is_fedramp_user});else if("emails_do_not_match_redirect"===e.err_msg){var o=d.props.googleLoginProps,n=o&&o.customErrorHandlers;if(n&&n.emailsDoNotMatchRedirect)n.emailsDoNotMatchRedirect(e);else{var p=d.generateThirdPartyAuthUrl(e,!0);r.redirect(p)}}else if("emails_do_not_match"===e.err_msg)if("pairing"!==d.props.type&&d.props.variant===c.AuthFormVariant.STANDARD){var m=d.generateThirdPartyAuthUrl(e,!1),g=v.intl.formatMessage({id:"6AHSKo",defaultMessage:"Oops! We couldn’t find a Dropbox account matching that email. <a>Click here to create one.</a>"},{a:function(e){return s.default.createElement("a",{className:"third-party-signup-link",href:m},e)}});d.setState({localErrors:a.__assign(a.__assign({},d.state.localErrors),{googleLogin:g})})}else e.localized_error?l.Notify.error(e.localized_error):l.Notify.error(v.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}));else if("tos_required"===e.err_msg){p=new u.URI({path:"/account/complete_registration_page"}).updateQuery({finish_web_auth:"true",remember_me:e.remember_me.toString(),cont:d.props.continuationUrl||"/"});r.redirect(p.toString())}else if("tfa_required"===e.err_msg){p=new u.URI({path:"/verify_code"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});r.redirect(p.toString())}else if("enable_twofactor_required"===e.err_msg){p=new u.URI({path:"/twofactor"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});r.redirect(p.toString())}else if("not_verified"===e.err_msg){p=new u.URI({path:"/show_password_form"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});r.redirect(p.toString())}else if("email_not_verified"===e.err_msg){var f=v.intl.formatMessage({id:"S6RuBm",defaultMessage:"Before you can sign in, you’ll need to verify your account with Google {email}"},{email:e.profile.email});l.Notify.error(new i.HTML("<span>"+f+"</span>"),30)}else e.localized_error?l.Notify.error(e.localized_error):l.Notify.error(v.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."})),"google_login_not_allowed"!==e.err_msg&&"sso_required"!==e.err_msg||(d.setState({email:e.profile.email}),d.ssoChecker.checkSsoState(e.profile.email,d.onSsoStateUpdate))},d.onGoogleLoginClick=function(){d.handleLoginFormEvent(b.LoginFormEvent.GOOGLE_LOGIN_CLICK),d.setState({localErrors:{}}),L.AuthAMPLogger.logLoginAttempt(L.AuthType.GOOGLE,d.props.type),L.GoogleUXAnalyticsLogger.logLoginStart();var e=!!d.props.googleLoginProps&&!1!==d.props.googleLoginProps.popup;(new w.ProfileServicesLinkingHandler).auth_service_login_web(C.default.GOOGLE,d.handleGoogleCallback,"login_form",e?w.AuthWindowOption.POP_UP:w.AuthWindowOption.REDIRECT,d.state.rememberMe,d.props.continuationUrl||"/","pairing"===d.props.type)},d.handleAppleCallback=function(e){L.AuthAMPLogger.logThirdPartyLoginResponse(L.AuthType.APPLE,d.props.type,e.success,e.err_msg),L.AppleUXAnalyticsLogger.logLoginResponse(e);var t=A.getFedrampRedirectUrlIfApplicable(e.is_fedramp_user||!1,d.props.continuationUrl||"/");if(e.success)d.handleLoginFormEvent(b.LoginFormEvent.APPLE_LOGIN_SUCCESS),!1!==d.props.canRedirect?(l.Notify.success(v.intl.formatMessage({id:"ZJmJez",defaultMessage:"Sign in successful! Your browser will be redirected in a few seconds."})),r.redirect(t)):e.is_fedramp_user&&!d.props.forceOnLoginSuccess?(t=A.getFedrampRedirectUrlIfApplicable(!0,d.props.continuationUrl||r.get_href()),r.redirect(t)):d.props.onLoginSuccess&&d.props.onLoginSuccess({display_name:e.display_name,id:e.user_id,email:e.profile.email,is_fedramp_user:e.is_fedramp_user});else if("no_email_in_response"===e.err_msg){var a=v.intl.formatMessage({id:"oFA/9f",defaultMessage:"Sign in failed. If you’d like to sign in with Apple again, <a>see how in our help center</a>. You could also sign in with your Dropbox account email and password."},{a:function(e){return'<a href="/help/accounts-billing/settings-sign-in/apple-sign-in-error">'+e+"</a>"}});l.Notify.error(new i.HTML("<span>"+a+"</span>"),30)}else if("tfa_required"===e.err_msg){var o=new u.URI({path:"/verify_code"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});r.redirect(o.toString())}else if("enable_twofactor_required"===e.err_msg){o=new u.URI({path:"/twofactor"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});r.redirect(o.toString())}else if("requires_password_on_first_link"===e.err_msg){o=new u.URI({path:"/show_password_form"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});r.redirect(o.toString())}else if("emails_do_not_match"===e.err_msg){a=v.intl.formatMessage({id:"8cKJMG",defaultMessage:"We couldn’t find a Dropbox account matching the email {email}. <a1>Sign up for a new account</a1> or <a2>get help signing in</a2> to an existing account."},{a1:function(e){return'<a href="/individual/plans-comparison?_tk=sia_nomatch_plan_web">'+e+"</a1>"},a2:function(e){return'<a href="/help/accounts-billing/settings-sign-in/sign-in-with-apple?_tk=sia_nomatch_help_web">'+e+"</a2>"},email:e.profile.email});l.Notify.error(new i.HTML("<span>"+a+"</span>"),30)}else e.localized_error?l.Notify.error(e.localized_error):l.Notify.error(v.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."})),"apple_login_not_allowed"===e.err_msg&&(d.setState({email:e.profile.email}),d.ssoChecker.checkSsoState(e.profile.email,d.onSsoStateUpdate))},d.onAppleLoginClick=function(){d.handleLoginFormEvent(b.LoginFormEvent.APPLE_LOGIN_CLICK),d.setState({localErrors:{}}),L.AuthAMPLogger.logLoginAttempt(L.AuthType.APPLE,d.props.type),L.AppleUXAnalyticsLogger.logLoginStart();var e=!!d.props.appleLoginProps&&!1!==d.props.appleLoginProps.popup;(new w.ProfileServicesLinkingHandler).auth_service_login_web(C.default.APPLE,d.handleAppleCallback,"login_form",e?w.AuthWindowOption.POP_UP:w.AuthWindowOption.REDIRECT,d.state.rememberMe,d.props.continuationUrl||"/","pairing"===d.props.type)},d.credentialsFormData=function(){var e=a.__assign(a.__assign({login_email:d.state.email,cont:d.props.continuationUrl,remember_me:d.state.rememberMe},d.credentialsFormComponent.getCaptchaResponses()),d.props.additionalData);if(void 0===d.props.encryptionOptions)return Promise.reject(new Error("Must provide encryption options"));var t=d.state.ssoState===b.SsoState.OFF?d.state.password:"";return R.wrapPassword(t,d.props.encryptionOptions).then((function(t){return e.encrypted_password=t,Promise.resolve(e)}))},d.handleLoginSuccess=function(e){if(d.handleLoginFormEvent(b.LoginFormEvent.LOGIN_IMMEDIATE_SUCCESS,{userInfo:e}),!1!==d.props.canRedirect){var t=A.getFedrampRedirectUrlIfApplicable(e.is_fedramp_user||!1,d.props.continuationUrl||"/");return r.redirect(t)}if(e.is_fedramp_user&&!d.props.forceOnLoginSuccess){t=A.getFedrampRedirectUrlIfApplicable(!0,d.props.continuationUrl||r.get_href());return r.redirect(t)}return d.props.onLoginSuccess?d.props.onLoginSuccess(e):r.redirect("/")},d.handleSuccessResponse=function(e){switch(d.setState({isSubmitting:!1}),L.AuthAMPLogger.logCredentialsLoginResponse(d.props.type,e.status),L.EmailAuthUXAnalyticsLogger.logLoginResponse(e),e.status){case b.LoginResponseStatus.ERROR:var t=e.html_response?new i.HTML(e.message):e.message;return l.Notify.error(t);case b.LoginResponseStatus.EXPIRED:return r.redirect(e.cont);case b.LoginResponseStatus.OK:var o={id:e.id,email:e.email,display_name:e.display_name,locale:e.locale,is_fedramp_user:e.is_fedramp_user};d.handleLoginSuccess(o);break;case b.LoginResponseStatus.PASSWORD_EXPIRED:return d.setState({localErrors:a.__assign(a.__assign({},d.state.localErrors),{email:{message_text:v.intl.formatMessage({id:"3EEu7s",defaultMessage:"The password of the account associated with this email has expired. Please login to this account and update its password before pairing."})}})});case b.LoginResponseStatus.RATELIMIT:return d.setState({localErrors:a.__assign(a.__assign({},d.state.localErrors),{email:{message_text:v.intl.formatMessage({id:"7k/CMy",defaultMessage:"You’ve tried to log in too many times. Please try again in a few minutes."})}})});case b.LoginResponseStatus.TWOFACTOR_REQUIRED:case b.LoginResponseStatus.TOS_SIGNATURE_REQUIRED:return r.redirect(e.cont);case b.LoginResponseStatus.TWOFACTOR:e.checkpoint_token&&d.setState({checkpointToken:e.checkpoint_token}),e.use_email_2fa?d.setState({primaryTwoFactorType:b.TwoFactorType.EMAIL,currentStep:M.EMAIL_2FA}):e.u2f_challenge&&T.canUseAuthenticator(d.generateU2fRequest(e.u2f_challenge))?(d.setState({primaryTwoFactorType:b.TwoFactorType.SEC_KEY,currentStep:M.SECKEY_2FA}),e.last_two_digits?d.setState({lastTwoDigits:e.last_two_digits,secondaryTwoFactorType:b.TwoFactorType.SMS}):d.setState({secondaryTwoFactorType:b.TwoFactorType.AUTHENTICATOR}),d.kickOffU2f(e.u2f_challenge)):e.last_two_digits?d.setState({primaryTwoFactorType:b.TwoFactorType.SMS,lastTwoDigits:e.last_two_digits,secondaryTwoFactorType:void 0,currentStep:M.PHONE_2FA}):d.setState({primaryTwoFactorType:b.TwoFactorType.AUTHENTICATOR,lastTwoDigits:void 0,secondaryTwoFactorType:void 0,currentStep:M.AUTHENTICATOR_2FA});break;case b.LoginResponseStatus.SSO:return r.unsafeRedirect(e.sso_url);case b.LoginResponseStatus.PASSWORD_DECRYPTION_ERROR:return r.redirect(e.cont)}},d.handleServerErrors=function(e){if(L.AuthAMPLogger.logCredentialsLoginResponse(d.props.type,e.funcaptcha_response?"funcaptcha_response":"form_error"),d.credentialsFormComponent.handleCaptchaErrors(e))setTimeout((function(){d.isCaptchaReady||p.notifyCaptchaNotLoaded()}),1e4);else{L.EmailAuthUXAnalyticsLogger.logLoginError();var t={};e.login_email?t.email=e.login_email:t.email=void 0,e.login_password?t.password=e.login_password:t.password=void 0,e["failed-login-invalid-email-password"]?t.login=v.intl.formatMessage({id:"kfg1Pg",defaultMessage:"Oops! It looks like you may have forgotten your password. <a>Click here to reset it.</a>"},{a:function(e){return s.default.createElement("a",{href:"/forgot"},e)}}):t.login=void 0,d.setState({localErrors:t}),d.setState({isSubmitting:!1})}},d.onCredentialsFormSubmit=function(){L.EmailAuthUXAnalyticsLogger.logLoginStart(),d.setState({isSubmitting:!0}),d.credentialsFormData().then((function(e){var t=_.submitCredentialsForm(d.props.type,e);t.catch(d.handleServerErrors),t.then(d.handleSuccessResponse)})).catch((function(e){var t,a;e.isBrowserNotSupported?(t="user-error",a=v.intl.formatMessage({id:"rWb8d2",defaultMessage:"Dropbox doesn’t support your browser. For a better experience, upgrade to the latest version of a modern browser like Chrome, Firefox, Edge, or Safari."})):(t="critical",a=v.intl.formatMessage({id:"dNlIBC",defaultMessage:"There was a problem completing this request."})),n.reportException({err:e,severity:t,tags:["react-login-form"]}),d.setState({isSubmitting:!1}),l.Notify.error(a)}))},d.onLoginClick=function(e){e.preventDefault(),L.AuthAMPLogger.logLoginAttempt(L.AuthType.CREDENTIALS,d.props.type),d.handleLoginFormEvent(b.LoginFormEvent.LOGIN_CLICK),d.credentialsFormComponent.submitRecaptcha()},d.handleResendCodeSuccess=function(e){var t;switch(e){case b.TwoFactorResendResponse.OK:return l.Notify.success(v.intl.formatMessage({id:"vdqTup",defaultMessage:"We sent you a code. It may take a few minutes to arrive."}));case b.TwoFactorResendResponse.RATELIMIT:t=v.intl.formatMessage({id:"7k/CMy",defaultMessage:"You’ve tried to log in too many times. Please try again in a few minutes."});break;case b.TwoFactorResendResponse.UNREACHABLE:t=v.intl.formatMessage({id:"G6HUee",defaultMessage:"We couldn’t reach your phone number. Are you sure it’s correct?"});break;case b.TwoFactorResendResponse.EXPIRED:t=v.intl.formatMessage({id:"l5AyQn",defaultMessage:"Sorry, your phone code has expired. Please log in again."});break;case b.TwoFactorResendResponse.BADCARRIER:t=v.intl.formatMessage({id:"ffjRA4",defaultMessage:"Unfortunately, your carrier isn’t supported at this time."});break;case b.TwoFactorResendResponse.INVALIDNUMBER:t=v.intl.formatMessage({id:"1P05hM",defaultMessage:"That isn’t a valid phone number."});break;case b.TwoFactorResendResponse.NOTAMOBILE:t=v.intl.formatMessage({id:"aI/ARD",defaultMessage:"That phone number doesn’t appear to be a valid mobile number."});break;default:return l.Notify.error(v.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))}d.setState({localErrors:a.__assign(a.__assign({},d.state.localErrors),{twoFactor:{message_text:t}})})},d.resendCode=function(){var e,t,a,o,s=_.resendTwoFactorCode(null!==(t=null===(e=d.props.additionalData)||void 0===e?void 0:e.backup)&&void 0!==t&&t,null!==(o=null===(a=d.props.additionalData)||void 0===a?void 0:a.mobile_push)&&void 0!==o&&o);s.then(d.handleResendCodeSuccess),s.catch((function(){l.Notify.error(v.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))}))},d.handleTwoFactorSuccess=function(e){switch(L.AuthAMPLogger.log2faResponse(d.props.type,e.status),e.status){case b.LoginResponseStatus.OK:d.state.currentStep===M.SECKEY_2FA&&d.setState({securityKeyState:b.SecurityKeyState.FOUND});var t={id:e.id,email:e.email,display_name:e.display_name,locale:e.locale,is_fedramp_user:e.is_fedramp_user};d.handleLoginSuccess(t);break;case b.LoginResponseStatus.ERROR:l.Notify.error(e.message);break;case b.LoginResponseStatus.REQUIRES_ROLE:case b.LoginResponseStatus.EXPIRED:d.setState({localErrors:a.__assign(a.__assign({},d.state.localErrors),{email:{message_text:e.message}}),currentStep:M.CREDENTIALS_OR_SSO});break;case b.LoginResponseStatus.INVALID_CREDENTIALS:d.setState({localErrors:a.__assign(a.__assign({},d.state.localErrors),{password:{message_text:e.message}}),currentStep:M.CREDENTIALS_OR_SSO});break;default:l.Notify.error(v.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))}},d.twoFactorFormData=function(){var e=a.__assign({remember_me:d.state.rememberMe,cont:d.props.continuationUrl,code:d.state.twoFactorCode,trusted:d.state.trusted},d.props.additionalData);return d.state.checkpointToken?a.__assign({checkpoint_token:d.state.checkpointToken},e):e},d.submitTwoFactor=function(){d.setState({isSubmitting:!0});var e=_.submitTwoFactorForm(d.props.type,d.twoFactorFormData());e.then(d.handleTwoFactorSuccess),e.catch((function(e){L.AuthAMPLogger.log2faResponse(d.props.type,e.u2f?"u2f_error":e.code?"code_error":"unknown"),d.state.currentStep===M.SECKEY_2FA&&e.u2f?d.setState({localErrors:a.__assign(a.__assign({},d.state.localErrors),{securityKey:e.u2f.message_text}),securityKeyState:b.SecurityKeyState.NOT_FOUND}):e.code?d.setState({localErrors:a.__assign(a.__assign({},d.state.localErrors),{twoFactor:e.code})}):l.Notify.error(v.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))})),e.finally((function(){d.setState({isSubmitting:!1})}))},d.onPhone2FASubmit=function(e){e.preventDefault(),d.submitTwoFactor()},d.onAuthenticator2FASubmit=function(e){e.preventDefault(),d.submitTwoFactor()},d.generateU2fRequest=function(e){for(var t=JSON.parse(e),a={challenge_id:t.challenge_id},o=0,s=Object.keys(T.PROTOCOLS);o<s.length;o++){var r=s[o];a[r]=t[r]&&JSON.parse(t[r])}return a},d.kickOffU2f=function(e){return a.__awaiter(d,void 0,void 0,(function(){var t,o,s,r=this;return a.__generator(this,(function(a){switch(a.label){case 0:if(t=this.generateU2fRequest(e),!T.canUseAuthenticator(t))return[3,5];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,T.sign(t)];case 2:return o=a.sent(),this.state.currentStep===M.SECKEY_2FA&&this.setState({twoFactorCode:JSON.stringify(o)},(function(){return r.submitTwoFactor()})),[3,4];case 3:return s=a.sent(),this.state.currentStep===M.SECKEY_2FA&&this.setState({securityKeyState:b.SecurityKeyState.NOT_FOUND}),n.assert(!1,"U2F Error - "+s,{tags:["react-login-form","u2f"]}),[3,4];case 4:return[3,5];case 5:return[2]}}))}))},d.switch2FA=function(){var e;n.assert(d.state.primaryTwoFactorType===b.TwoFactorType.SEC_KEY,"Unexpected two factor choice switch",{tags:["react-login-form"]}),d.state.secondaryTwoFactorType===b.TwoFactorType.SMS?(e=M.PHONE_2FA,d.resendCode()):e=M.AUTHENTICATOR_2FA,d.setState({twoFactorCode:"",primaryTwoFactorType:d.state.secondaryTwoFactorType,secondaryTwoFactorType:void 0,currentStep:e})},d.onRetryU2f=function(){d.setState({securityKeyState:b.SecurityKeyState.LOADING});var e=_.retryU2fAuthentication();e.then(d.kickOffU2f),e.catch((function(){d.setState({securityKeyState:b.SecurityKeyState.NOT_FOUND}),l.Notify.error(v.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))}))},d.onCaptchaReady=function(){d.isCaptchaReady=!0},n.assert(!1!==t.canRedirect||!!t.onLoginSuccess,"Need an on login success handler if we cannot redirect the user",{tags:["react-login-form"]}),d.ssoChecker=new E.SsoStateChecker,d.isCaptchaReady=!1;var m=M.CREDENTIALS_OR_SSO,g=void 0,f=void 0,h=void 0;return t.twoFactorOnlyProps&&(t.twoFactorOnlyProps.u2fChallenge&&!(null===(o=t.additionalData)||void 0===o?void 0:o.backup)&&T.canUseAuthenticator(d.generateU2fRequest(t.twoFactorOnlyProps.u2fChallenge))?(m=M.SECKEY_2FA,g=b.TwoFactorType.SEC_KEY,t.twoFactorOnlyProps.lastTwoDigits?(f=b.TwoFactorType.SMS,h=t.twoFactorOnlyProps.lastTwoDigits):f=b.TwoFactorType.AUTHENTICATOR):t.twoFactorOnlyProps.lastTwoDigits?(m=M.PHONE_2FA,g=b.TwoFactorType.SMS,h=t.twoFactorOnlyProps.lastTwoDigits):(m=M.AUTHENTICATOR_2FA,g=b.TwoFactorType.AUTHENTICATOR)),d.state={currentStep:m,email:t.emailProps&&t.emailProps.initialValue||"",isSubmitting:!1,lastTwoDigits:h,localErrors:{},password:"",primaryTwoFactorType:g,secondaryTwoFactorType:f,rememberMe:t.rememberMeCheckboxProps&&t.rememberMeCheckboxProps.checked||!1,securityKeyState:b.SecurityKeyState.LOADING,ssoState:b.SsoState.OFF,trusted:t.twoFactorTrustCheckboxProps&&t.twoFactorTrustCheckboxProps.checked||!1,twoFactorCode:"",checkpointToken:void 0,shouldDisableForm:!0},d}return a.__extends(t,e),t.prototype.trackSuccessfulLogin=function(e,t){if(e===b.LoginFormEvent.LOGIN_IMMEDIATE_SUCCESS||e===b.LoginFormEvent.GOOGLE_LOGIN_SUCCESS||e===b.LoginFormEvent.APPLE_LOGIN_SUCCESS){var a=g.getGAEventData(g.MARKETING_LOGIN_EVENT,g.MARKETING_LOGIN_EVENT);g.MarketingTracker.tryPushEvent(g.MARKETING_LOGIN_EVENT,g.EventTypeEnum.Link,a)}},t.prototype.handleLoginFormEvent=function(e,t){this.trackSuccessfulLogin(e,t),this.props.onLoginFormEvent&&this.props.onLoginFormEvent(e,t)},t.prototype.componentDidMount=function(){this.setState({shouldDisableForm:!1}),this.props.twoFactorOnlyProps||L.AuthAMPLogger.logLoginIntent(this.props.type),this.props.twoFactorOnlyProps&&this.props.twoFactorOnlyProps.u2fChallenge&&this.state.currentStep===M.SECKEY_2FA&&this.kickOffU2f(this.props.twoFactorOnlyProps.u2fChallenge),this.state.email&&this.ssoChecker.checkSsoState(this.state.email,this.onSsoStateUpdate)},Object.defineProperty(t.prototype,"shouldDisableForm",{get:function(){return!!this.props.disabled||this.state.shouldDisableForm},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportsCaptcha",{get:function(){return!this.props.hideCredentialFields&&!["multi","pairing","cli_link_nonce"].includes(this.props.type)},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e,t,a,r,n;switch(this.state.currentStep){case M.CREDENTIALS_OR_SSO:n=s.default.createElement(S.LoginCredentialsForm,{ref:this.setCredentialsFormComponent,disabled:this.shouldDisableForm,emailError:this.state.localErrors.email,emailProps:this.props.emailProps||{},emailValue:this.state.email,forgotPasswordProps:this.props.forgotPasswordProps||{},googleLoginError:this.state.localErrors.googleLogin,googleLoginProps:this.props.googleLoginProps,appleLoginError:this.state.localErrors.appleLogin,appleLoginProps:this.props.appleLoginProps,hideCredentialFields:this.props.hideCredentialFields||!1,hideHelp:this.props.hideHelp||!1,hideRememberMe:this.props.hideRememberMe||!1,isPaperLogin:this.props.isPaperLogin||!1,isSubmitting:this.state.isSubmitting,loginButtonProps:this.props.loginButtonProps||{},loginError:this.state.localErrors.login,maestroStyle:this.props.maestroStyle||!1,onGoogleLoginClick:this.onGoogleLoginClick,onAppleLoginClick:this.onAppleLoginClick,onInputChange:this.onInputChange,onLoginClick:this.onLoginClick,openLinksInNewTab:!!this.props.openLinksInNewTab,onSsoChangeClick:this.onSsoChangeClick,onSubmit:this.onCredentialsFormSubmit,onCaptchaReady:this.onCaptchaReady,passwordError:this.state.localErrors.password,passwordProps:this.props.passwordProps||{},passwordValue:this.state.password,rememberMeProps:this.props.rememberMeCheckboxProps||{},rememberMeValue:this.state.rememberMe,showNaviSiteLogin:!!this.props.showNaviSiteLogin,ssoState:this.state.ssoState,supportsCaptcha:this.supportsCaptcha,variant:this.props.variant||c.AuthFormVariant.STANDARD});break;case M.PHONE_2FA:n=s.default.createElement(f.Phone2FAForm,{continuationUrl:this.props.continuationUrl,displayHeader:null!==(e=this.props.twoFactorDisplayHeader)&&void 0!==e&&e,error:this.state.localErrors.twoFactor,hideHelp:this.props.hideHelp||!1,hideTrustCheckbox:this.props.hideRememberMe||!1,inlineSubmit:void 0===this.props.twoFactorSubmitButtonInline||this.props.twoFactorSubmitButtonInline,lastTwoDigits:this.state.lastTwoDigits||"",maestroStyle:this.props.maestroStyle||!1,onInputChange:this.onInputChange,onResendCodeClick:this.resendCode,onSubmit:this.onPhone2FASubmit,rememberMe:this.state.rememberMe,trusted:this.state.trusted,trustTooltipPosition:this.props.twoFactorTrustCheckboxProps&&this.props.twoFactorTrustCheckboxProps.tooltipPosition,value:this.state.twoFactorCode,variant:this.props.variant||c.AuthFormVariant.STANDARD});break;case M.EMAIL_2FA:n=s.default.createElement(m.Email2FAForm,{displayHeader:null!==(t=this.props.twoFactorDisplayHeader)&&void 0!==t&&t,email:this.state.email,error:this.state.localErrors.twoFactor,inlineSubmit:void 0===this.props.twoFactorSubmitButtonInline||this.props.twoFactorSubmitButtonInline,maestroStyle:this.props.maestroStyle||!1,onInputChange:this.onInputChange,onSubmit:this.onPhone2FASubmit,value:this.state.twoFactorCode,variant:this.props.variant||c.AuthFormVariant.STANDARD,onResendCodeClick:this.resendCode});break;case M.AUTHENTICATOR_2FA:n=s.default.createElement(d.Authenticator2FAForm,{continuationUrl:this.props.continuationUrl,displayHeader:null!==(a=this.props.twoFactorDisplayHeader)&&void 0!==a&&a,error:this.state.localErrors.twoFactor,hideHelp:this.props.hideHelp||!1,hideTrustCheckbox:this.props.hideRememberMe||!1,inlineSubmit:void 0===this.props.twoFactorSubmitButtonInline||this.props.twoFactorSubmitButtonInline,maestroStyle:this.props.maestroStyle||!1,onInputChange:this.onInputChange,onSubmit:this.onAuthenticator2FASubmit,rememberMe:this.state.rememberMe,trusted:this.state.trusted,trustTooltipPosition:this.props.twoFactorTrustCheckboxProps&&this.props.twoFactorTrustCheckboxProps.tooltipPosition,value:this.state.twoFactorCode,variant:this.props.variant||c.AuthFormVariant.STANDARD});break;case M.SECKEY_2FA:n=s.default.createElement(h.SecKey2FAForm,{displayHeader:null!==(r=this.props.twoFactorDisplayHeader)&&void 0!==r&&r,error:this.state.localErrors.securityKey,hideTrustCheckbox:this.props.hideRememberMe||!1,maestroStyle:this.props.maestroStyle||!1,onChange2FA:this.switch2FA,onInputChange:this.onInputChange,onRetry:this.onRetryU2f,trusted:this.state.trusted,trustTooltipPosition:this.props.twoFactorTrustCheckboxProps&&this.props.twoFactorTrustCheckboxProps.tooltipPosition,secondaryTwoFactorType:this.state.secondaryTwoFactorType,securityKeyState:this.state.securityKeyState,variant:this.props.variant||c.AuthFormVariant.STANDARD})}var i=o.default("login-form-container",this.props.variant,this.props.className,{"login-form-container--centered":this.props.centered,"login-form-container--maestro":this.props.maestroStyle});return s.default.createElement("div",{className:i},s.default.createElement("div",{className:"regular-login-forms"},n))},t})(s.default.Component);t.TestOnlyLoginFormComponent=N,t.LoginForm=y.requireCssWithComponent(N,["/static/css/components/exp_cards-vfls5BO1G.css","/static/css/components/login_form-vflPyw88n.css","/static/css/legacy_packages/components-vflwFi1IV.css","/static/css/login_or_register-vfln_xSQk.css","/static/css/scooter/scooter-scoped-vflpl9JSl.css","/static/css/spectrum/index.web-vflmHVRF-.css","/static/css/recaptcha_challenge-vflrcf67y.css","/static/css/recaptcha_v2_challenge-vflYEW-GO.css"])})),define("modules/clean/auth/login/google_login_button",["require","exports","tslib","react","classnames","modules/core/i18n","modules/clean/auth/common/types","modules/clean/auth/login/login_error","dig-components/buttons","modules/clean/react/image","modules/clean/static_urls"],(function(e,t,a,o,s,r,n,i,l,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleLoginButton=void 0,o=a.__importDefault(o),s=a.__importDefault(s);var p=c.static_url("/static/images/growth/biz-setup/gmail-vflKoZim9.svg"),d=function(e){var t=e.onClick,a=e.label,s=e.disabled;return o.default.createElement(l.Button,{className:"setup-button",disabled:s,onClick:t,variant:"outline",size:"large"},o.default.createElement("div",{className:"email-cta-button"},o.default.createElement(u.Image,{className:"email-cta-button__item",src:p}),o.default.createElement("div",{className:"email-cta-button__item"},a)))};t.GoogleLoginButton=function(e){var t=e.buttonProps||{},l=s.default("auth-google","button-primary",t.className),u=e.variant&&e.variant===n.AuthFormVariant.DIG20,c=t.text||r.intl.formatMessage({id:"SgtygT",defaultMessage:"Sign in with Google"});return o.default.createElement("div",{className:"login-form-container__google-div"},u?o.default.createElement(d,a.__assign({},e,{label:c})):o.default.createElement("button",{className:l,onClick:e.onClick,type:"button",disabled:e.disabled||t.disabled,"data-uxa-log":"google_login_start"},o.default.createElement("div",{className:"sign-in-text"},c)),e.error&&o.default.createElement(i.LoginError,{className:"google-login-error",message:e.error}))}})),define("modules/clean/auth/login/login_error",["require","exports","tslib","react","classnames"],(function(e,t,a,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginError=void 0,o=a.__importDefault(o),s=a.__importDefault(s),t.LoginError=function(e){var t=s.default("c-card","c-card--error",e.className);return o.default.createElement("div",{className:t},e.message)}})),define("modules/clean/auth/login/sso_utils",["require","exports","tslib","modules/clean/auth/login/api","modules/clean/auth/login/types"],(function(e,t,a,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SsoStateChecker=void 0,o=a.__importStar(o);var r=/^[^@\s]+@[^@\s]+\.[A-Za-z]{2,}$/,n=function(){var e=this;this.shouldCheckSsoState=function(e){return e.match(r)},this.checkSsoState=function(t,a){e.shouldCheckSsoState(t)?e.CACHE[t]?a(t,e.CACHE[t]):e.INFLIGHT[t]||(e.INFLIGHT[t]=!0,o.checkSsoState(t).then((function(o){switch(o.user_sso_state){case"optional":e.CACHE[t]=s.SsoState.OPTIONAL;break;case"required":e.CACHE[t]=s.SsoState.REQUIRED;break;default:e.CACHE[t]=s.SsoState.OFF}a(t,e.CACHE[t])})).finally((function(){delete e.INFLIGHT[t]}))):a(t,s.SsoState.OFF)},this.CACHE={},this.INFLIGHT={}};t.SsoStateChecker=n})),define("modules/clean/auth/login/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginFormEvent=t.TwoFactorResendResponse=t.LoginResponseStatus=t.SsoState=t.SecurityKeyState=t.TwoFactorType=t.LoginRole=void 0,(function(e){e.ROLE_WORK="work",e.ROLE_PERSONAL="personal",e.ROLE_PHOTOS="photos",e.ROLE_BOTH="both"})(t.LoginRole||(t.LoginRole={})),(function(e){e[e.EMAIL=0]="EMAIL",e[e.SMS=1]="SMS",e[e.AUTHENTICATOR=2]="AUTHENTICATOR",e[e.SEC_KEY=3]="SEC_KEY"})(t.TwoFactorType||(t.TwoFactorType={})),(function(e){e[e.LOADING=0]="LOADING",e[e.FOUND=1]="FOUND",e[e.NOT_FOUND=2]="NOT_FOUND"})(t.SecurityKeyState||(t.SecurityKeyState={})),(function(e){e.OFF="off",e.OPTIONAL="optional",e.REQUIRED="required"})(t.SsoState||(t.SsoState={})),(function(e){e.DEVICE_LIMIT="DEVICE_LIMIT",e.OK="OK",e.SSO="SSO",e.TWOFACTOR="TWOFACTOR",e.TWOFACTOR_REQUIRED="TWOFACTOR_REQUIRED",e.RATELIMIT="RATELIMIT",e.PASSWORD_EXPIRED="PASSWORD_EXPIRED",e.EXPIRED="EXPIRED",e.ERROR="ERROR",e.REQUIRES_ROLE="REQUIRES_ROLE",e.INVALID_CREDENTIALS="INVALID_CREDENTIALS",e.PASSWORD_DECRYPTION_ERROR="PASSWORD_DECRYPTION_ERROR",e.TOS_SIGNATURE_REQUIRED="TOS_SIGNATURE_REQUIRED"})(t.LoginResponseStatus||(t.LoginResponseStatus={})),(function(e){e.OK="OK",e.RATELIMIT="RATELIMIT",e.UNREACHABLE="UNREACHABLE",e.EXPIRED="EXPIRED",e.BADCARRIER="BADCARRIER",e.INVALIDNUMBER="BADCARRIER",e.NOTAMOBILE="BADCARRIER"})(t.TwoFactorResendResponse||(t.TwoFactorResendResponse={})),(function(e){e.LOGIN_CLICK="LOGIN_CLICK",e.LOGIN_IMMEDIATE_SUCCESS="LOGIN_IMMEDIATE_SUCCESS",e.GOOGLE_LOGIN_CLICK="GOOGLE_LOGIN_CLICK",e.GOOGLE_LOGIN_SUCCESS="GOOGLE_LOGIN_SUCCESS",e.APPLE_LOGIN_CLICK="APPLE_LOGIN_CLICK",e.APPLE_LOGIN_SUCCESS="APPLE_LOGIN_SUCCESS"})(t.LoginFormEvent||(t.LoginFormEvent={}))})),define("modules/clean/auth/login_or_register/login_register_container",["require","exports","tslib","react","react-intl","classnames","modules/core/i18n","modules/clean/react/components/css","modules/clean/auth/login_or_register/logging_util","modules/clean/auth/login_or_register/types","modules/clean/auth/login/form","modules/clean/auth/register/form","spectrum/button/index"],(function(e,t,a,o,s,r,n,i,l,u,c,p,d){"use strict";var m;Object.defineProperty(t,"__esModule",{value:!0}),t.TestOnlyStatelessLoginRegisterContainer=t.LoginRegisterContainer=t.StatelessLoginRegisterContainer=t.SwitchLinkLocationEnum=void 0,o=a.__importStar(o),r=a.__importDefault(r),(function(e){e.TOP="top",e.BOTTOM="bottom"})(m=t.SwitchLinkLocationEnum||(t.SwitchLinkLocationEnum={}));var g=s.defineMessages({registerHeader:{id:"P09UfX",defaultMessage:"Create an account"},loginHeader:{id:"raLp6W",defaultMessage:"Sign in"},switchToRegisterLinkLabel:{id:"91fajJ",defaultMessage:"create an account"},switchToLoginLinkLabel:{id:"/bdGRh",defaultMessage:"log in"}}),f=function(e){var t=e.switchLinkLabel,a=e.onSwitchLinkClick;return o.default.createElement("div",{className:"login-register-switch"},o.default.createElement("span",null,n.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"})+" "),o.default.createElement(d.Button,{className:"login-register-switch-link",onClick:a,tagName:"a",variant:"styleless",href:"#"},t))},h=function(e){var t=e.className,a=e.hideHeader,s=e.headerText,n=e.switchLinkLocation,i=e.switchLinkLabel,l=e.onSwitchLinkClick,u=e.children,c=o.default.createElement(f,{onSwitchLinkClick:l,switchLinkLabel:i});return o.default.createElement("div",{className:r.default("login-register-part",t)},o.default.createElement("div",{className:"clearfix"},!a&&o.default.createElement("div",{className:"login-register-header"},s),n===m.TOP&&c),u,n===m.BOTTOM&&c)},_=function(e){var t,s=e.switchLinkProps,i=void 0===s?{switchLinkLocation:m.TOP}:s,l=e.hideHeaders,d=void 0!==l&&l,f=e.currentMode,_=e.setLoginRegisterMode,S=a.__rest(e,["switchLinkProps","hideHeaders","currentMode","setLoginRegisterMode"]),E=S.className,b=S.loginHeader,y=S.registerHeader,v=S.loginFormProps,C=S.registerFormProps,w=i.switchLinkLocation,T=i.switchToRegisterLinkLabel,R=i.switchToLoginLinkLabel,L=r.default("login-register-container",E,null!==(t=v.variant)&&void 0!==t?t:C.variant,["login-register-container--link-"+w]),A=o.default.createElement(h,{className:r.default("login-register-login-part",{"current-form":f===u.Mode.LOGIN}),hideHeader:d,headerText:null!=b?b:n.intl.formatMessage(g.loginHeader),switchLinkLocation:w,switchLinkLabel:null!=T?T:n.intl.formatMessage(g.switchToRegisterLinkLabel),onSwitchLinkClick:function(){return _(u.Mode.REGISTER)}},o.default.createElement(c.LoginForm,a.__assign({},v))),M=o.default.createElement(h,{className:r.default("login-register-register-part",{"current-form":f===u.Mode.REGISTER}),hideHeader:d,headerText:null!=y?y:n.intl.formatMessage(g.registerHeader),switchLinkLocation:w,switchLinkLabel:null!=R?R:n.intl.formatMessage(g.switchToLoginLinkLabel),onSwitchLinkClick:function(){return _(u.Mode.LOGIN)}},o.default.createElement(p.RegisterForm,a.__assign({},C)));return o.default.createElement("div",{className:L},A,M)};t.TestOnlyStatelessLoginRegisterContainer=_,t.StatelessLoginRegisterContainer=i.requireCssWithComponent(_,["/static/css/components/login_or_register-vflTMgZVU.css","/static/css/legacy_packages/components-vflwFi1IV.css","/static/css/components/button-vfllw60O5.css","/static/css/scooter/scooter-scoped-vflpl9JSl.css","/static/css/recaptcha_challenge-vflrcf67y.css","/static/css/recaptcha_v2_challenge-vflYEW-GO.css"]),t.LoginRegisterContainer=function(e){var s=o.useState(e.defaultRegister?u.Mode.REGISTER:u.Mode.LOGIN),r=s[0],n=s[1];return o.useEffect((function(){return l.logAuthIntent(r)}),[r]),o.default.createElement(t.StatelessLoginRegisterContainer,a.__assign({currentMode:r,setLoginRegisterMode:n},e))}})),define("modules/clean/auth/login_or_register/logging_util",["require","exports","modules/clean/analytics","modules/clean/auth_event_logger","modules/clean/auth/common/stats","modules/clean/auth/login_or_register/types"],(function(e,t,a,o,s,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logModalMiscActivity=t.logModalShown=t.logModalDismissed=t.logAuthIntent=void 0,t.logAuthIntent=function(e){e===r.Mode.REGISTER?o.AuthEventLogger.log_web_signup_intent():o.AuthEventLogger.log_web_login_intent()},t.logModalDismissed=function(e,t){e===r.Mode.REGISTER?s.AuthUXAnalyticsLogger.logSignupModalDismissed(t):s.AuthUXAnalyticsLogger.logLoginModalDismissed(t)},t.logModalShown=function(e,t){e===r.Mode.REGISTER?s.AuthUXAnalyticsLogger.logSignupModalShown(t):s.AuthUXAnalyticsLogger.logLoginModalShown(t)},t.logModalMiscActivity=function(e,t){var o={auth_google:!0};e===r.LoginOrRegisterKind.IMMEDIATE?a.WebMiscActivityLogger.log("signup_modal-show-upfront",o):e===r.LoginOrRegisterKind.DOWNLOAD&&t===r.DownloadAction.DIRECT_DOWNLOAD&&a.WebMiscActivityLogger.log("signup_modal-show-download",o)}})),define("modules/clean/auth/register/form",["require","exports","tslib","react","modules/core/i18n","modules/core/browser","modules/core/exception","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/auth/common/types","modules/clean/auth/common/utils","modules/clean/auth/register/types","modules/clean/auth/register/view","modules/clean/marketing_tracker","modules/clean/profile_services/auth_callback_handler","modules/clean/profile_services/profile_services_constants","modules/clean/profile_services/profile_services_link","modules/clean/react/components/css","modules/clean/web_timing_logger","modules/clean/web_register_logging_data","modules/clean/auth/common/stats","api_v2/noauth_client","modules/core/notify"],(function(e,t,a,o,s,r,n,i,l,u,c,p,d,m,g,f,h,_,S,E,b,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestOnlyRegisterFormComponent=t.RegisterForm=t.handleInviteResendImpl=void 0,o=a.__importDefault(o),r=a.__importStar(r),n=a.__importStar(n),i=a.__importStar(i),g=a.__importDefault(g);var v=(function(e){function t(t){var o=e.call(this,t)||this;o.testOnlyGetViewComponent=function(){return o.viewComponent},o.setViewComponent=function(e){o.viewComponent=e},o.onClickSignUp=function(e){e.preventDefault(),o.handleRegisterFormEvent(c.RegisterFormEvent.REGISTER_CLICK),E.AuthAMPLogger.logSignupAttempt(E.AuthType.CREDENTIALS),E.EmailAuthUXAnalyticsLogger.logSignupStart();var t=o.getFormErrors();t.fname||t.email||t.password||t.tos?o.setState({localErrors:t}):o.viewComponent.getCaptchaComponent().getWrappedComponent().submit()},o.onSubmit=function(){o.setState({isSubmitting:!0});var e=o.registerData(),t=o.props.signupUrl||(o.thirdPartySignupInitiated?"/ajax_thirdparty_register":"/ajax_register");i.WebRequest({url:t,type:"POST",data:e,success:function(e,t,a){o.handleSuccess(e)},error:function(e,t,a){o.handleServerErrors(JSON.parse(a))}})},o.handleGoogleCallback=function(e){E.AuthAMPLogger.logSignupResponse(E.AuthType.GOOGLE,e.success,e.err_msg),E.GoogleUXAnalyticsLogger.logSignupResponse(e);var t=o.props,s=t.additionalParams,n=void 0===s?{}:s,i=t.marketingOptInProps,l=void 0===i?{}:i,u=t.canRedirect,p=o.props.googleRegisterProps||{},d=p.signupContinuationUrl||"/",g=p.optimisticLoginContinuationUrl||d,f=S.getWebRegisterLoggingData();m.handleRegisterResponse(e,a.__assign({showMarketingOptIn:!!l.show,registerCont:d,loginCont:g,signupTag:n.signup_tag||"",canRedirect:!1!==u,k:n.k,eh:n.eh,signupEndpoint:o.props.signupEndpoint,inlineRedirect:u?void 0:function(e){var t=e.fname,s=e.lname,r=e.email,n=a.__rest(e,["fname","lname","email"]);o.setState({fname:t,lname:s,email:r,inlineThirdPartySignupState:n})}},f),void 0,(function(){o.handleRegisterFormEvent(c.RegisterFormEvent.GOOGLE_REGISTER_SUCCESS)}),(function(e){if(o.handleRegisterFormEvent(c.RegisterFormEvent.REGISTER_IMMEDIATE_SUCCESS,{userInfo:e}),!1!==o.props.canRedirect)r.redirect(g);else if(o.props.onRegisterSuccess)return o.props.onRegisterSuccess(e,e)}))},o.onGoogleRegisterClick=function(){o.handleRegisterFormEvent(c.RegisterFormEvent.REGISTER_CLICK),E.AuthAMPLogger.logSignupAttempt(E.AuthType.GOOGLE),E.GoogleUXAnalyticsLogger.logSignupStart();var e,t=new f.ProfileServicesLinkingHandler,a=o.props.googleRegisterProps||{};e=void 0===a.popup?f.AuthWindowOption.POP_UP:a.popup?f.AuthWindowOption.POP_UP:f.AuthWindowOption.REDIRECT;var s=a.signupContinuationUrl?{kind:"web",cont:a.signupContinuationUrl,remember_me:!1,pair_user:!1}:null;t.auth_service_create_user_if_needed(g.default.GOOGLE,o.handleGoogleCallback,"register_form",e,s)},o.onInputChange=function(e){var t={},a=e.currentTarget,s=a.name,r=a.value,n=a.checked;"fname"===s?t.fname=r:"lname"===s?t.lname=r:"email"===s?t.email=r:"password"===s?t.password=r:"tos_agree"===s?t.tosAgree=n:"marketing_opt_in"===s&&(t.marketingOptIn=n),o.setState(t),o.clearFormErrors(t)},o.handleResendClick=function(e){var t=e.target,a=o.state,s=a.email,r=a.isSendingInvite;"login-register-resend-invite"===t.className&&C(e,r,s,(function(){return o.setState({isSendingInvite:!0})}),(function(){return o.setState({isSendingInvite:!1})}))},o.onCaptchaReady=function(){o.isCaptchaReady=!0},n.assert(!1!==t.canRedirect||!!t.onRegisterSuccess,"Need an on register success handler if we cannot redirect the user",{tags:["react-register-form"]});var s=t.fnameProps,l=void 0===s?{}:s,u=t.lnameProps,p=void 0===u?{}:u,d=t.emailProps,h=void 0===d?{}:d,_=t.tosCheckboxProps,b=void 0===_?{}:_,y=t.marketingOptInProps,v=void 0===y?{}:y,w=!v.show||!!v.checked;return o.state={localErrors:{},isSubmitting:!1,fname:l.initialValue||"",lname:p.initialValue||"",email:h.initialValue||"",password:"",tosAgree:!!b.checked,isSendingInvite:!1,marketingOptIn:w,shouldDisableForm:!0},o.mounted=!1,o.isCaptchaReady=!1,o}return a.__extends(t,e),t.prototype.handleServerErrors=function(e){var t=this;if(this.mounted)if(E.AuthAMPLogger.logSignupResponse(E.AuthType.CREDENTIALS,!1,e.funcaptcha_response?"funcaptcha_response":"form_error"),this.viewComponent.handleCaptchaErrors(e))setTimeout((function(){t.isCaptchaReady||u.notifyCaptchaNotLoaded()}),1e4);else{E.EmailAuthUXAnalyticsLogger.logSignupError();var o=a.__assign({},this.state.localErrors),s=Date.now();e.email&&(o.email=e.email,o.email.clientTimestamp=s),e.password&&(o.password=e.password,o.password.clientTimestamp=s),e.fname&&(o.fname=e.fname,o.fname.clientTimestamp=s),e.tos_agree&&(o.tos=e.tos_agree,o.tos.clientTimestamp=s),this.setState({localErrors:o}),this.setState({isSubmitting:!1})}},t.prototype.handleSuccess=function(e){if(this.mounted){var t=JSON.parse(e),a={id:t.id,email:t.email,display_name:t.display_name};if(E.AuthAMPLogger.logSignupResponse(E.AuthType.CREDENTIALS,!0,null),E.EmailAuthUXAnalyticsLogger.logSignupResponse(),this.handleRegisterFormEvent(c.RegisterFormEvent.REGISTER_IMMEDIATE_SUCCESS,{userInfo:a}),!1!==this.props.canRedirect){var o=t.force_redirect_url?t.redirect_url:this.props.continuationUrlForNonGoogleSignup||t.redirect_url||"/";r.redirect(o)}else this.props.onRegisterSuccess&&this.props.onRegisterSuccess(a,t);this.setState({isSubmitting:!1})}},t.prototype.trackSuccessfulRegister=function(e,t){if(e===c.RegisterFormEvent.GOOGLE_REGISTER_SUCCESS||e===c.RegisterFormEvent.REGISTER_IMMEDIATE_SUCCESS){var a=d.getGAViewData(d.MARKETING_REGISTER_EVENT,"ga_register_pageview","/virtual/ga_register_pageview");d.MarketingTracker.tryPushEvent(d.MARKETING_REGISTER_EVENT,d.EventTypeEnum.View,a)}},t.prototype.handleRegisterFormEvent=function(e,t){this.trackSuccessfulRegister(e,t),this.props.onRegisterFormEvent&&this.props.onRegisterFormEvent(e,t)},t.prototype.registerData=function(){var e=u.getFormattedName(this.state.fname,this.state.lname,this.props.combinedName),t=e[0],o=e[1],s=r.get_uri().getQuery(),n=this.state,i=n.email,l=n.password,c=n.tosAgree,p=n.marketingOptIn,d=n.inlineThirdPartySignupState,m=this.props,g=m.additionalParams,f=m.thirdPartyInitiatedSignupData,h=a.__assign({fname:t,lname:o,email:i,tos_agree:c},this.thirdPartySignupInitiated?{}:{password:l}),_=a.__assign(a.__assign(a.__assign(a.__assign(a.__assign({cont:this.props.continuationUrlForNonGoogleSignup,signup_endpoint:this.props.signupEndpoint,demandbase_override:s.demandbase_override,marketing_opt_in:p},h),f||{}),d||{}),this.viewComponent&&this.viewComponent.getCaptchaResponses()||{}),g);return S.setWebRegisterLoggingData(_)},t.prototype.clearFormErrors=function(e){var t=this.state.localErrors;e.fname&&(t.fname={}),e.email&&(t.email={}),e.password&&(t.password={}),e.tosAgree&&(t.tos={}),this.setState({localErrors:t})},t.prototype.getFormErrors=function(){var e={};if(!this.props.validateClientSide)return e;var t=Date.now();return this.state.fname?e.fname=void 0:e.fname={message_text:s.intl.formatMessage({id:"GlyhO1",defaultMessage:"Please enter your name"}),clientTimestamp:t},this.state.email?e.email=void 0:e.email={message_text:s.intl.formatMessage({id:"I7g4FQ",defaultMessage:"Please enter an email address"}),clientTimestamp:t},this.state.password||this.thirdPartySignupInitiated?e.password=void 0:e.password={message_text:s.intl.formatMessage({id:"LhlWCW",defaultMessage:"Please enter a password"}),clientTimestamp:t},this.state.tosAgree?e.tos=void 0:e.tos={message_text:s.intl.formatMessage({id:"yw3Lbd",defaultMessage:"Please agree to the terms of service"}),clientTimestamp:t},e},Object.defineProperty(t.prototype,"thirdPartySignupInitiated",{get:function(){return!!this.props.thirdPartyInitiatedSignupData||!!this.state.inlineThirdPartySignupState},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.setState({shouldDisableForm:!1}),this.props.markTti&&_.mark_time_to_interactive(),this.mounted=!0,E.AuthAMPLogger.logSignupIntent(),document.addEventListener("click",this.handleResendClick)},t.prototype.componentWillUnmount=function(){this.mounted=!1,document.removeEventListener("click",this.handleResendClick)},Object.defineProperty(t.prototype,"shouldDisableForm",{get:function(){return!!this.props.disabled||this.state.shouldDisableForm},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this.props,t=e.marketingOptInProps,a=void 0===t?{}:t,s=e.variant,r=e.emailProps,n=e.maestroStyle,i=e.className,u=e.combinedName,c=e.fnameProps,d=e.lnameProps,m=e.passwordProps,g=e.tosCheckboxProps,f=e.submitButtonProps,h=e.googleRegisterProps,_=e.showSplitSignupFlow;return o.default.createElement(p.RegisterFormView,{ref:this.setViewComponent,variant:s||l.AuthFormVariant.STANDARD,maestroStyle:!!n,disabled:this.shouldDisableForm,className:i,combinedName:!!u,fnameProps:c||{},fnameValue:this.state.fname,fnameError:this.state.localErrors.fname,lnameProps:d||{},lnameValue:this.state.lname,emailProps:r||{},emailValue:this.state.email,emailError:this.state.localErrors.email,passwordProps:m||{},passwordValue:this.state.password,passwordError:this.state.localErrors.password,tosCheckboxProps:g||{},tosChecked:this.state.tosAgree,tosError:this.state.localErrors.tos,submitButtonProps:f||{},googleRegisterProps:h,thirdPartyInitiatedSignup:this.thirdPartySignupInitiated,isSubmitting:this.state.isSubmitting,onClickSignUp:this.onClickSignUp,onInputChange:this.onInputChange,onSubmit:this.onSubmit,onCaptchaReady:this.onCaptchaReady,onGoogleRegisterClick:this.onGoogleRegisterClick,showMarketingOptIn:!!a.show,marketingOptInChecked:this.state.marketingOptIn,splitSignupEnabled:_})},t})(o.default.Component);function C(e,t,a,o,r){if(!0!==t){var n=new b.NoAuthApiV2Client;o(),n.ns("team").rpc("logged_out_resend_pending_invite_email",{email:a},{}).then((function(){y.Notify.success(s.intl.formatMessage({id:"un5VKD",defaultMessage:"Invite resent to {email}"},{email:a})),r()})).catch((function(e){y.Notify.error(s.intl.formatMessage({id:"yqLGvW",defaultMessage:"Failed to resend invite."})),r()})),e.preventDefault()}else e.preventDefault()}t.TestOnlyRegisterFormComponent=v,t.handleInviteResendImpl=C,t.RegisterForm=h.requireCssWithComponent(v,["/static/css/login_or_register-vfln_xSQk.css","/static/css/components/login_form-vflPyw88n.css","/static/css/components/button-vfllw60O5.css"])})),define("modules/clean/auth/register/google_register_button",["require","exports","tslib","classnames","react","modules/core/i18n"],(function(e,t,a,o,s,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleRegisterButton=void 0,o=a.__importDefault(o),s=a.__importDefault(s),t.GoogleRegisterButton=function(e){var t,a=e.buttonProps||{},n=o.default("auth-google","button-primary",a.className,((t={})["button-"+a.variant]="standard"!==a.variant,t)),i=a.text||r.intl.formatMessage({id:"M4SS1n",defaultMessage:"Sign up with Google"});return s.default.createElement("button",{className:n,type:"button",onClick:e.onClick,disabled:e.disabled||a.disabled,"data-uxa-log":"google_signup_start"},s.default.createElement("span",{className:"sign-up-text"},i))}})),define("modules/clean/auth/register/name_fields",["require","exports","tslib","classnames","react","modules/core/i18n","modules/clean/auth/common/inputs/text","modules/clean/auth/common/types","modules/clean/auth/common/utils"],(function(e,t,a,o,s,r,n,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterFormNameFields=void 0,o=a.__importDefault(o),s=a.__importDefault(s),t.RegisterFormNameFields=function(e){var t=e.fnameProps||{};if(e.combinedName){var u=o.default("exp-input-combined-name","clearfix",t.className);return s.default.createElement("div",{className:"register-form__name-fields"},s.default.createElement(n.AuthTextField,{placeholder:t.placeholder||(e.maestroStyle?r.intl.formatMessage({id:"yse7tr",defaultMessage:"Jane Doe"}):r.intl.formatMessage({id:"7raSCH",defaultMessage:"Full name"})),name:"fname",value:e.fnameValue,onChange:e.onInputChange,disabled:e.disabled||t.readonly||!1,label:t.label||(e.maestroStyle?r.intl.formatMessage({id:"7raSCH",defaultMessage:"Full name"}):void 0),error:e.fnameError,maestroStyle:e.maestroStyle,className:u,variant:e.variant,type:i.AuthTextInputType.TEXT}))}var c=e.lnameProps||{},p=["first","text-input__margin-right"],d=["second"],m=["input-fname",t.className],g=["input-lname",c.className];l.lastNameGoesFirst()?(g=a.__spreadArrays(g,p),m=a.__spreadArrays(m,d)):(m=a.__spreadArrays(m,p),g=a.__spreadArrays(g,d));var f=s.default.createElement(n.AuthTextField,{className:o.default(m),name:"fname",value:e.fnameValue,onChange:e.onInputChange,error:e.fnameError,maestroStyle:e.maestroStyle,disabled:e.disabled||t.readonly||!1,label:t.label||(e.maestroStyle?r.intl.formatMessage({id:"flaKkC",defaultMessage:"First name"}):void 0),placeholder:t.placeholder||(e.maestroStyle?r.intl.formatMessage({id:"G3gJf8",defaultMessage:"Jane"}):r.intl.formatMessage({id:"flaKkC",defaultMessage:"First name"})),variant:e.variant,type:i.AuthTextInputType.TEXT}),h=s.default.createElement(n.AuthTextField,{className:o.default(g),name:"lname",value:e.lnameValue,onChange:e.onInputChange,error:e.lnameError,disabled:e.disabled||c.readonly||!1,label:c.label||(e.maestroStyle?r.intl.formatMessage({id:"rew2qC",defaultMessage:"Last name"}):void 0),placeholder:c.placeholder||(e.maestroStyle?r.intl.formatMessage({id:"yUetMg",defaultMessage:"Doe"}):r.intl.formatMessage({id:"rew2qC",defaultMessage:"Last name"})),maestroStyle:e.maestroStyle,variant:e.variant,type:i.AuthTextInputType.TEXT});return l.lastNameGoesFirst()?s.default.createElement("div",{className:"register-form__name-fields"},h,f):s.default.createElement("div",{className:"register-form__name-fields"},f,h)}})),define("modules/clean/auth/register/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterFormEvent=void 0,(function(e){e.GOOGLE_REGISTER_CLICK="GOOGLE_REGISTER_CLICK",e.GOOGLE_REGISTER_SUCCESS="GOOGLE_REGISTER_SUCCESS",e.REGISTER_CLICK="REGISTER_CLICK",e.REGISTER_IMMEDIATE_SUCCESS="REGISTER_IMMEDIATE_SUCCESS"})(t.RegisterFormEvent||(t.RegisterFormEvent={}))})),define("modules/clean/auth/register/view",["require","exports","tslib","classnames","react","modules/core/i18n","modules/clean/auth/common/inputs/checkbox","modules/clean/auth/common/inputs/text","modules/clean/auth/common/captcha","modules/clean/auth/common/types","modules/clean/auth/register/google_register_button","modules/clean/auth/register/name_fields","modules/clean/react/file_viewer/conversions/conversion_utils","modules/clean/auth/common/stats"],(function(e,t,a,o,s,r,n,i,l,u,c,p,d,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterFormView=void 0,o=a.__importDefault(o);var g=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={splitSignupStep:0},t.setCaptchaComponent=function(e){t.captchaComponent=e},t}return a.__extends(t,e),t.prototype.handleCaptchaErrors=function(e){return l.handle_captcha_errors(this.captchaComponent,e)},t.prototype.getCaptchaComponent=function(){return this.captchaComponent},t.prototype.getCaptchaResponses=function(){return l.get_captcha_responses(this.captchaComponent)},t.prototype.onContinue=function(){this.setState({splitSignupStep:1}),m.EmailAuthUXAnalyticsLogger.logSplitSignupContinue()},t.prototype.render=function(){var e=this,t=this.props,a=t.className,m=t.variant,g=t.thirdPartyInitiatedSignup,f=t.tosCheckboxProps,h=t.onGoogleRegisterClick,_=t.disabled,S=t.isSubmitting,E=t.maestroStyle,b=t.onInputChange,y=t.showMarketingOptIn,v=t.marketingOptInChecked,C=t.splitSignupEnabled,w=o.default("form_shown","login-form-container","register",a,m,{third_party_auth:g,"login-form-container--maestro":E}),T=f||{},R=void 0;T.unsafeLabelHTML||(R=r.intl.formatMessage({id:"QECDJM",defaultMessage:"I agree to the <a>Dropbox Terms</a>. Learn about how we use and protect your data in our <b>Privacy Policy</b>."},{a:function(e){return s.default.createElement("a",{href:"/terms",target:"_blank",rel:"noreferrer noopener"},e)},b:function(e){return s.default.createElement("a",{href:"/privacy",target:"_blank",rel:"noreferrer noopener"},e)}}));var L=this.props.submitButtonProps||{},A=o.default("login-button","button-primary",L.className,{"button-small":L.variant===u.AuthButtonVariant.SMALL,"button-big":L.variant===u.AuthButtonVariant.BIG}),M=o.default("continue-button","button-primary",L.className,{"button-small":L.variant===u.AuthButtonVariant.SMALL,"button-big":L.variant===u.AuthButtonVariant.BIG}),N=this.props.thirdPartyInitiatedSignup,F=!!this.props.googleRegisterProps&&!N,I=this.props.googleRegisterProps||{},k=s.default.createElement(c.GoogleRegisterButton,{onClick:h,disabled:_||S,buttonProps:I.buttonProps}),O=s.default.createElement("div",{className:"hr-label"},s.default.createElement("span",{className:"hr-label__text"},r.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"}))),P=this.props.emailProps||{},x=o.default("input-email","text-input__margin-right",P.className),D=this.props.passwordProps||{},U=o.default("input-password",D.className),G=this.props.maestroStyle;"TOP"===I.position?G=!0:"BOTTOM"===I.position&&(G=!1);var H=T.variant||m,q=void 0===T.inline||T.inline,K=N?r.intl.formatMessage({id:"j7O6M6",defaultMessage:"Create and continue"}):L.text||r.intl.formatMessage({id:"P09UfX",defaultMessage:"Create an account"}),V=r.intl.formatMessage({id:"pV/Btf",defaultMessage:"Continue"}),W=s.default.createElement(i.AuthTextField,{value:this.props.emailValue,className:x,onChange:b,disabled:_||P.readonly||!1,label:P.label||(E?r.intl.formatMessage({id:"ZuKPpH",defaultMessage:"Email"}):void 0),placeholder:P.placeholder||(this.props.maestroStyle?r.intl.formatMessage({id:"87vAZJ",defaultMessage:"you@mail.com"}):r.intl.formatMessage({id:"ZbTBdC",defaultMessage:"Email"})),error:this.props.emailError,maestroStyle:E,name:"email",type:u.AuthTextInputType.EMAIL,variant:m});return C&&0===this.state.splitSignupStep?s.default.createElement("div",{className:w},s.default.createElement("form",{className:"clearfix credentials-form register-form",onSubmit:this.props.onClickSignUp,method:"post"},s.default.createElement("div",{className:"credentials-form__fields"},s.default.createElement("div",{className:"register-form__credential-fields"}),s.default.createElement("div",{className:"split-signup-fields"},W,s.default.createElement("button",{className:M,type:"submit","data-uxa-log":"register_form_continue_button",onClick:function(){return e.onContinue()}},s.default.createElement("span",null,V)))),F&&s.default.createElement("div",{className:"hr-split-signup"}),F&&k,F&&s.default.createElement(l.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,onReady:this.props.onCaptchaReady,source:"REGISTER"}))):s.default.createElement("div",{className:w},s.default.createElement("form",{className:"clearfix credentials-form register-form",onSubmit:this.props.onClickSignUp,method:"post"},G&&F&&k,G&&F&&O,s.default.createElement("div",{className:"credentials-form__fields"},s.default.createElement(p.RegisterFormNameFields,{maestroStyle:E,onInputChange:b,combinedName:this.props.combinedName,fnameError:this.props.fnameError,fnameProps:this.props.fnameProps,lnameProps:this.props.lnameProps,fnameValue:this.props.fnameValue,lnameValue:this.props.lnameValue,disabled:_,variant:m}),s.default.createElement("div",{className:"register-form__credential-fields"},W,!this.props.thirdPartyInitiatedSignup&&s.default.createElement(i.AuthTextField,{value:this.props.passwordValue,placeholder:D.placeholder||(this.props.maestroStyle?r.intl.formatMessage({id:"klwYHA",defaultMessage:"Minimum 6 characters"}):r.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"})),name:"password",className:U,inputClassName:"password-input",onChange:b,measureStrength:D.measureStrength,label:D.label||(E?r.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"}):void 0),error:this.props.passwordError,maestroStyle:E,disabled:_,variant:m,passwordStrengthProps:D.strengthMeterProps,type:u.AuthTextInputType.PASSWORD}))),!d.shouldShowSimplifiedModal()&&s.default.createElement(l.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,onReady:this.props.onCaptchaReady,source:"REGISTER"}),s.default.createElement(n.AuthCheckbox,{variant:H,className:"agree",disabled:T.disabled||_,maestroStyle:E,error:this.props.tosError,inline:q,onChange:b,name:"tos_agree",checked:this.props.tosChecked,label:T.label||R,unsafeLabelHTML:T.unsafeLabelHTML}),y&&s.default.createElement(n.AuthCheckbox,{variant:H,className:"agree marketing-opt-in-checkbox",disabled:_,maestroStyle:E,inline:q,onChange:b,checked:v,name:"marketing_opt_in",label:r.intl.formatMessage({id:"vRE9NS",defaultMessage:"I’d like to receive direct marketing email updates from Dropbox"})}),s.default.createElement("button",{className:A,type:"submit","data-uxa-log":"register_form_submit_button",disabled:this.props.disabled||L.disabled||this.props.isSubmitting},s.default.createElement("span",null,K)),!G&&F&&!d.shouldShowSimplifiedModal()&&O,!G&&F&&k,d.shouldShowSimplifiedModal()&&s.default.createElement(l.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,onReady:this.props.onCaptchaReady,source:"REGISTER"})))},t})((s=a.__importDefault(s)).default.Component);t.RegisterFormView=g})),define("modules/clean/components/password_strength_meter",["require","exports","tslib","react","classnames","modules/core/i18n","modules/clean/react/components/css","modules/clean/react/bubble_dropdown_v2","modules/clean/web_timing_logger","modules/core/cancelable_promise","modules/clean/react/sticky_position"],(function(e,t,a,o,s,r,n,i,l,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordStrengthMeter=void 0,o=a.__importDefault(o),s=a.__importDefault(s);var p=(function(t){function n(o){var s=t.call(this,o)||this;return s.setZxcvbn=function(e){var t=e.default;s.setState({zxcvbn:t})},s.getPasswordScore=function(e){return s.state.zxcvbn?s.state.zxcvbn(e).score:0},s.state={},o.zxcvbnPostTti?l.waitForTTI().then((function(){s.zxcvbnPromise=u.makeCancelable(new Promise((function(t,a){e(["zxcvbn"],t,a)})).then(a.__importStar)),s.zxcvbnPromise.then(s.setZxcvbn)})):(s.zxcvbnPromise=u.makeCancelable(new Promise((function(t,a){e(["zxcvbn"],t,a)})).then(a.__importStar)),s.zxcvbnPromise.then(s.setZxcvbn)),s}return a.__extends(n,t),n.prototype.componentWillUnmount=function(){this.zxcvbnPromise&&this.zxcvbnPromise.cancel()},n.prototype.render=function(){var e=this.props.password,t=e.length?Math.max(1,this.getPasswordScore(e)):0,a=["",r.intl.formatMessage({id:"i/ragh",defaultMessage:"Weak"}),r.intl.formatMessage({id:"GwYES8",defaultMessage:"So-so"}),r.intl.formatMessage({id:"Yd7c8F",defaultMessage:"Good"}),r.intl.formatMessage({id:"kbsmZh",defaultMessage:"Great!"})],n=this.props.bubbleDescription;return n||(n=r.intl.formatMessage({id:"6SDr7W",defaultMessage:"Passwords must be 6 characters or more. Good passwords are hard to guess and use uncommon words, numbers, symbols, and uppercase letters."})),o.default.createElement("div",{className:"password-input-meter "+this.props.className,tabIndex:-1,"aria-label":r.intl.formatMessage({id:"7h/xn+",defaultMessage:"Password strength"})},[4,3,2,1].map((function(e){var a=s.default({"password-input-dot":!0,"password-input-dot-selected--weak":t>=e&&t<=2,"password-input-dot-selected":t>=e});return o.default.createElement("div",{key:"password-input-dot-"+e,className:a})})),o.default.createElement(i.BubbleDropdown,{position:this.props.bubblePosition||c.StickyPosition.RIGHT,targetButton:o.default.createElement("button",{className:"password-bubble__button"}),className:this.props.bubbleClassName},o.default.createElement("div",{className:"password-bubble__content"},o.default.createElement("div",{className:"password-bubble__title"},a[t]||""),o.default.createElement("div",{className:"password-bubble__desc"},n))))},n})(o.default.Component);t.PasswordStrengthMeter=n.requireCssWithComponent(p,["/static/css/components/password_strength_meter-vfljnpJyO.css"])})),define("modules/clean/form_util/name_parser",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(){function e(){}return e.splitFullName=function(e){var t=e.split(" ");return[t[0],t.slice(1).join(" ")]},e})();t.default=a}));
//# sourceMappingURL=pkg-login-and-register-pages.min.js-vflkAF2vN.map