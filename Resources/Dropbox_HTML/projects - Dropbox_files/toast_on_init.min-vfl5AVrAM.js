define(["require","exports","tslib","modules/core/notify","modules/core/html","modules/core/cookies","modules/clean/security/csrf_hmac","modules/clean/csrf"],(function(e,o,r,t,n,s,i,u){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.decodeToastCookie=o.showToastFromCookie=void 0;function a(e,o){return r.__awaiter(this,void 0,Promise,(function(){var t;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,i.readHmacCookieToken(e,o)];case 1:if(null==(t=r.sent()))return[2,null];if(t.startsWith("er:"))return[2,[!0,t.substring(3)]];if(t.startsWith("ok:"))return[2,[!1,t.substring(3)]];throw new Error("unrecognized format of message in toast cookie")}}))}))}o.showToastFromCookie=function(){var o;return r.__awaiter(this,void 0,void 0,(function(){var i,c,l,d,f,m;return r.__generator(this,(function(h){switch(h.label){case 0:return(i=s.Cookies.read("toast"))?[4,a(i,null!==(o=u.readCsrfToken())&&void 0!==o?o:void 0)]:[3,3];case 1:return null==(c=h.sent())?[3,3]:(l=c[0],d=c[1],[4,new Promise((function(o,r){e(["dompurify"],o,r)})).then(r.__importStar)]);case 2:f=h.sent().sanitize,m=function(){return s.Cookies.delete("toast")},l?t.Notify.error(new n.HTML(f(d)),10,m):t.Notify.success(new n.HTML(f(d)),10,m),h.label=3;case 3:return[2]}}))}))},o.decodeToastCookie=a}));
//# sourceMappingURL=toast_on_init.min.js-vflDI68ge.map