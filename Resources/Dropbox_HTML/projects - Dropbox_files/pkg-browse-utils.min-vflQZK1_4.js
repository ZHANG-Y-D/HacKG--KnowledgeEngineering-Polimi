define("modules/clean/react/browse/browse_right_rail/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_BROWSE_BLADE=void 0,t.DEFAULT_BROWSE_BLADE="info"})),define("modules/clean/react/flows/types",["require","exports","immutable"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlowsMap=t.FlowsRuleType=void 0,(function(e){e[e.None=0]="None",e[e.AutoPDF=1]="AutoPDF",e[e.AutoUnzip=2]="AutoUnzip",e[e.AutoTag=3]="AutoTag",e[e.AutoSmartSubfolders=4]="AutoSmartSubfolders"})(t.FlowsRuleType||(t.FlowsRuleType={})),t.FlowsMap=function(e){return i.Map(e)}})),define("dropbox/proto/js_init_data/browse_web/browse_web",["require","exports","tslib","protobufjs/minimal","dropbox/proto/js_init_data/login_form/login_form"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.browse_web=void 0;var l,a=(o=i.__importStar(o)).Reader,r=o.Writer,n=o.util,s=o.roots.default||(o.roots.default={});t.default=s,t.browse_web=s.browse_web=((l=s.browse_web||{}).BrowseExperiments=(function(e){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.goldenGateRaclsEnabled=!1,e.prototype.folderHistoryRollbacks=!1,e.prototype.lifeVault=!1,e.prototype.sidebarNavigationDelegation=!1,e.prototype.plusPlusEnabled=!1,e.prototype.browseWebHqlPilot=!1,e.prototype.useMaestroPortal="",e.prototype.parallelFileUploads=!1,e.prototype.browseColumnHeaderImprovements=!1,e.prototype.spacesFssModalVariant="",e.prototype.splitTmfTsd=!1,e.prototype.browseRightRail="",e.prototype.familyEmptyRoom=!1,e.prototype.browseRowPerformance=!1,e.prototype.browseBoostSharing="",e.prototype.teamSpaceTsdAccessVisibility=!1,e.prototype.useUploadKit=!1,e.prototype.suggestedFoldersIndividual="",e.prototype.manualTagging="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.goldenGateRaclsEnabled&&Object.hasOwnProperty.call(e,"goldenGateRaclsEnabled")&&t.uint32(8).bool(e.goldenGateRaclsEnabled),null!=e.folderHistoryRollbacks&&Object.hasOwnProperty.call(e,"folderHistoryRollbacks")&&t.uint32(24).bool(e.folderHistoryRollbacks),null!=e.lifeVault&&Object.hasOwnProperty.call(e,"lifeVault")&&t.uint32(72).bool(e.lifeVault),null!=e.sidebarNavigationDelegation&&Object.hasOwnProperty.call(e,"sidebarNavigationDelegation")&&t.uint32(88).bool(e.sidebarNavigationDelegation),null!=e.plusPlusEnabled&&Object.hasOwnProperty.call(e,"plusPlusEnabled")&&t.uint32(112).bool(e.plusPlusEnabled),null!=e.browseWebHqlPilot&&Object.hasOwnProperty.call(e,"browseWebHqlPilot")&&t.uint32(120).bool(e.browseWebHqlPilot),null!=e.useMaestroPortal&&Object.hasOwnProperty.call(e,"useMaestroPortal")&&t.uint32(130).string(e.useMaestroPortal),null!=e.parallelFileUploads&&Object.hasOwnProperty.call(e,"parallelFileUploads")&&t.uint32(152).bool(e.parallelFileUploads),null!=e.browseColumnHeaderImprovements&&Object.hasOwnProperty.call(e,"browseColumnHeaderImprovements")&&t.uint32(176).bool(e.browseColumnHeaderImprovements),null!=e.spacesFssModalVariant&&Object.hasOwnProperty.call(e,"spacesFssModalVariant")&&t.uint32(226).string(e.spacesFssModalVariant),null!=e.splitTmfTsd&&Object.hasOwnProperty.call(e,"splitTmfTsd")&&t.uint32(240).bool(e.splitTmfTsd),null!=e.browseRightRail&&Object.hasOwnProperty.call(e,"browseRightRail")&&t.uint32(250).string(e.browseRightRail),null!=e.familyEmptyRoom&&Object.hasOwnProperty.call(e,"familyEmptyRoom")&&t.uint32(272).bool(e.familyEmptyRoom),null!=e.browseRowPerformance&&Object.hasOwnProperty.call(e,"browseRowPerformance")&&t.uint32(288).bool(e.browseRowPerformance),null!=e.browseBoostSharing&&Object.hasOwnProperty.call(e,"browseBoostSharing")&&t.uint32(298).string(e.browseBoostSharing),null!=e.teamSpaceTsdAccessVisibility&&Object.hasOwnProperty.call(e,"teamSpaceTsdAccessVisibility")&&t.uint32(304).bool(e.teamSpaceTsdAccessVisibility),null!=e.useUploadKit&&Object.hasOwnProperty.call(e,"useUploadKit")&&t.uint32(312).bool(e.useUploadKit),null!=e.suggestedFoldersIndividual&&Object.hasOwnProperty.call(e,"suggestedFoldersIndividual")&&t.uint32(322).string(e.suggestedFoldersIndividual),null!=e.manualTagging&&Object.hasOwnProperty.call(e,"manualTagging")&&t.uint32(330).string(e.manualTagging),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var i=void 0===t?e.len:e.pos+t,o=new s.browse_web.BrowseExperiments;e.pos<i;){var l=e.uint32();switch(l>>>3){case 1:o.goldenGateRaclsEnabled=e.bool();break;case 3:o.folderHistoryRollbacks=e.bool();break;case 9:o.lifeVault=e.bool();break;case 11:o.sidebarNavigationDelegation=e.bool();break;case 14:o.plusPlusEnabled=e.bool();break;case 15:o.browseWebHqlPilot=e.bool();break;case 16:o.useMaestroPortal=e.string();break;case 19:o.parallelFileUploads=e.bool();break;case 22:o.browseColumnHeaderImprovements=e.bool();break;case 28:o.spacesFssModalVariant=e.string();break;case 30:o.splitTmfTsd=e.bool();break;case 31:o.browseRightRail=e.string();break;case 34:o.familyEmptyRoom=e.bool();break;case 36:o.browseRowPerformance=e.bool();break;case 37:o.browseBoostSharing=e.string();break;case 38:o.teamSpaceTsdAccessVisibility=e.bool();break;case 39:o.useUploadKit=e.bool();break;case 40:o.suggestedFoldersIndividual=e.string();break;case 41:o.manualTagging=e.string();break;default:e.skipType(7&l)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/browse_web.BrowseExperiments"},e})(l.BrowseExperiments||{}),l.BrowseWebPageProps=(function(e){function e(e){if(this.selectFqPaths=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.autoTeamGroupId="",e.prototype.emailJustVerified=!1,e.prototype.emailJustVerifiedAndChanged=!1,e.prototype.fromSclSyncModal=!1,e.prototype.initFqPath="",e.prototype.nsId=0,e.prototype.nsPath="",e.prototype.openPreview=!1,e.prototype.selectFqPaths=n.emptyArray,e.prototype.sendVerificationEmail=!1,e.prototype.shareLink=!1,e.prototype.sharePrefillEmail="",e.prototype.shouldShowDeletedFiles=!1,e.prototype.shouldShowUnsyncNotification=!1,e.prototype.shouldOpenExtensionsEduModal="",e.prototype.shouldOpenAppRecommendationsModal=!1,e.prototype.shouldOpenUploadModal=!1,e.prototype.showShareModal=!1,e.prototype.showShareSuccessSnackbar=!1,e.prototype.showingClientModal=!1,e.prototype.showingMobileBillingModal=!1,e.prototype.userId=0,e.prototype.userVersionHistoryLength=0,e.prototype.browseExperiments=null,e.prototype.webTimingLoggerServerContext="",e.prototype.showPlusPlusSetupModal=!1,e.prototype.isSmbPersonalization=!1,e.prototype.hasLinkedMobile=!1,e.prototype.encryptionOptions=null,e.prototype.fromCtl=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=r.create()),null!=e.autoTeamGroupId&&Object.hasOwnProperty.call(e,"autoTeamGroupId")&&t.uint32(10).string(e.autoTeamGroupId),null!=e.emailJustVerified&&Object.hasOwnProperty.call(e,"emailJustVerified")&&t.uint32(16).bool(e.emailJustVerified),null!=e.emailJustVerifiedAndChanged&&Object.hasOwnProperty.call(e,"emailJustVerifiedAndChanged")&&t.uint32(24).bool(e.emailJustVerifiedAndChanged),null!=e.fromSclSyncModal&&Object.hasOwnProperty.call(e,"fromSclSyncModal")&&t.uint32(32).bool(e.fromSclSyncModal),null!=e.initFqPath&&Object.hasOwnProperty.call(e,"initFqPath")&&t.uint32(42).string(e.initFqPath),null!=e.nsId&&Object.hasOwnProperty.call(e,"nsId")&&t.uint32(48).int64(e.nsId),null!=e.nsPath&&Object.hasOwnProperty.call(e,"nsPath")&&t.uint32(58).string(e.nsPath),null!=e.openPreview&&Object.hasOwnProperty.call(e,"openPreview")&&t.uint32(64).bool(e.openPreview),null!=e.selectFqPaths&&e.selectFqPaths.length)for(var i=0;i<e.selectFqPaths.length;++i)t.uint32(74).string(e.selectFqPaths[i]);return null!=e.sendVerificationEmail&&Object.hasOwnProperty.call(e,"sendVerificationEmail")&&t.uint32(80).bool(e.sendVerificationEmail),null!=e.shareLink&&Object.hasOwnProperty.call(e,"shareLink")&&t.uint32(88).bool(e.shareLink),null!=e.sharePrefillEmail&&Object.hasOwnProperty.call(e,"sharePrefillEmail")&&t.uint32(98).string(e.sharePrefillEmail),null!=e.shouldShowDeletedFiles&&Object.hasOwnProperty.call(e,"shouldShowDeletedFiles")&&t.uint32(104).bool(e.shouldShowDeletedFiles),null!=e.shouldShowUnsyncNotification&&Object.hasOwnProperty.call(e,"shouldShowUnsyncNotification")&&t.uint32(112).bool(e.shouldShowUnsyncNotification),null!=e.shouldOpenExtensionsEduModal&&Object.hasOwnProperty.call(e,"shouldOpenExtensionsEduModal")&&t.uint32(122).string(e.shouldOpenExtensionsEduModal),null!=e.shouldOpenAppRecommendationsModal&&Object.hasOwnProperty.call(e,"shouldOpenAppRecommendationsModal")&&t.uint32(128).bool(e.shouldOpenAppRecommendationsModal),null!=e.shouldOpenUploadModal&&Object.hasOwnProperty.call(e,"shouldOpenUploadModal")&&t.uint32(136).bool(e.shouldOpenUploadModal),null!=e.showShareModal&&Object.hasOwnProperty.call(e,"showShareModal")&&t.uint32(144).bool(e.showShareModal),null!=e.showShareSuccessSnackbar&&Object.hasOwnProperty.call(e,"showShareSuccessSnackbar")&&t.uint32(152).bool(e.showShareSuccessSnackbar),null!=e.showingClientModal&&Object.hasOwnProperty.call(e,"showingClientModal")&&t.uint32(160).bool(e.showingClientModal),null!=e.showingMobileBillingModal&&Object.hasOwnProperty.call(e,"showingMobileBillingModal")&&t.uint32(168).bool(e.showingMobileBillingModal),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(176).int64(e.userId),null!=e.userVersionHistoryLength&&Object.hasOwnProperty.call(e,"userVersionHistoryLength")&&t.uint32(184).int32(e.userVersionHistoryLength),null!=e.browseExperiments&&Object.hasOwnProperty.call(e,"browseExperiments")&&s.browse_web.BrowseExperiments.encode(e.browseExperiments,t.uint32(194).fork()).ldelim(),null!=e.webTimingLoggerServerContext&&Object.hasOwnProperty.call(e,"webTimingLoggerServerContext")&&t.uint32(210).string(e.webTimingLoggerServerContext),null!=e.showPlusPlusSetupModal&&Object.hasOwnProperty.call(e,"showPlusPlusSetupModal")&&t.uint32(216).bool(e.showPlusPlusSetupModal),null!=e.isSmbPersonalization&&Object.hasOwnProperty.call(e,"isSmbPersonalization")&&t.uint32(224).bool(e.isSmbPersonalization),null!=e.hasLinkedMobile&&Object.hasOwnProperty.call(e,"hasLinkedMobile")&&t.uint32(232).bool(e.hasLinkedMobile),null!=e.encryptionOptions&&Object.hasOwnProperty.call(e,"encryptionOptions")&&s.login_form.EncryptionOptions.encode(e.encryptionOptions,t.uint32(242).fork()).ldelim(),null!=e.fromCtl&&Object.hasOwnProperty.call(e,"fromCtl")&&t.uint32(248).bool(e.fromCtl),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var i=void 0===t?e.len:e.pos+t,o=new s.browse_web.BrowseWebPageProps;e.pos<i;){var l=e.uint32();switch(l>>>3){case 1:o.autoTeamGroupId=e.string();break;case 2:o.emailJustVerified=e.bool();break;case 3:o.emailJustVerifiedAndChanged=e.bool();break;case 4:o.fromSclSyncModal=e.bool();break;case 5:o.initFqPath=e.string();break;case 6:o.nsId=e.int64();break;case 7:o.nsPath=e.string();break;case 8:o.openPreview=e.bool();break;case 9:o.selectFqPaths&&o.selectFqPaths.length||(o.selectFqPaths=[]),o.selectFqPaths.push(e.string());break;case 10:o.sendVerificationEmail=e.bool();break;case 11:o.shareLink=e.bool();break;case 12:o.sharePrefillEmail=e.string();break;case 13:o.shouldShowDeletedFiles=e.bool();break;case 14:o.shouldShowUnsyncNotification=e.bool();break;case 15:o.shouldOpenExtensionsEduModal=e.string();break;case 16:o.shouldOpenAppRecommendationsModal=e.bool();break;case 17:o.shouldOpenUploadModal=e.bool();break;case 18:o.showShareModal=e.bool();break;case 19:o.showShareSuccessSnackbar=e.bool();break;case 20:o.showingClientModal=e.bool();break;case 21:o.showingMobileBillingModal=e.bool();break;case 22:o.userId=e.int64();break;case 23:o.userVersionHistoryLength=e.int32();break;case 24:o.browseExperiments=s.browse_web.BrowseExperiments.decode(e,e.uint32());break;case 26:o.webTimingLoggerServerContext=e.string();break;case 27:o.showPlusPlusSetupModal=e.bool();break;case 28:o.isSmbPersonalization=e.bool();break;case 29:o.hasLinkedMobile=e.bool();break;case 30:o.encryptionOptions=s.login_form.EncryptionOptions.decode(e,e.uint32());break;case 31:o.fromCtl=e.bool();break;default:e.skipType(7&l)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/browse_web.BrowseWebPageProps"},e})(l.BrowseWebPageProps||{}),l)})),define("modules/clean/react/browse/sort_helpers",["require","exports"],(function(e,t){"use strict";function i(e,t,i){for(var o="=ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0;l<Math.max(e.length,t.length);l++){var a=e.charAt(l),r=t.charAt(l);if(!a)return-i;if(!r)return i;var n=o.indexOf(a),s=o.indexOf(r);if(n<s)return-i;if(s<n)return i}return 0}Object.defineProperty(t,"__esModule",{value:!0}),t.compare=void 0,t.compare=function(e,t,o,l){if(Array.isArray(e)&&Array.isArray(t)){for(var a=0;a<Math.max(e.length,t.length);a++){var r=e[a],n=t[a];if(null==r)return-o;if(null==n)return o;if("number"==typeof r&&"string"==typeof n)return-o;if("number"==typeof n&&"string"==typeof r)return o;if("string"==typeof r&&"string"==typeof n){var s=i(r,n,o);if(0!==s)return s}else{if(r<n)return-o;if(n<r)return o}}return 0}return e===t?0:l&&"string"==typeof e&&"string"==typeof t?l(e,t)<0?-o:o:e<t?-o:o}})),define("modules/clean/react/browse/data/types",["require","exports","tslib","immutable","dropbox/proto/js_init_data/browse_web/browse_web","modules/clean/react/browse/models","modules/clean/react/files_view/types","modules/clean/react/selection","modules/clean/react/browse/browse_right_rail/types","modules/clean/react/flows/types"],(function(e,t,i,o,l,a,r,n,s,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultBrowseState=t.ActionTypes=void 0,o=i.__importStar(o),(function(e){e.APP_INIT="BROWSE/APP_INIT",e.PUSH_BOLT_IGNORE="BROWSE/PUSH_BOLT_IGNORE",e.POP_BOLT_IGNORE="BROWSE/POP_BOLT_IGNORE",e.SELECT_FILES_BY_FQ_PATH="BROWSE/SELECT_FILES_BY_FQ_PATH",e.SHOW_TIMELINE="BROWSE/SHOW_TIMELINE",e.HIDE_TIMELINE="BROWSE/HIDE_TIMELINE",e.SHOW_FOLDER_HISTORY_PANEL="BROWSE/SHOW_FOLDER_HISTORY_PANEL",e.HIDE_FOLDER_HISTORY_PANEL="BROWSE/HIDE_FOLDER_HISTORY_PANEL",e.SET_IS_REWIND_ENABLED="BROWSE/SET_IS_REWIND_ENABLED",e.SET_BROWSE_POST_TTI_EXPERIMENTS="BROWSE/SET_BROWSE_POST_TTI_EXPERIMENTS",e.SET_BROWSE_POST_TTI_DATA="BROWSE/SET_BROWSE_POST_TTI_DATA",e.SET_CAN_DISPLAY_FOLDER_SIZES="BROWSE/SET_CAN_DISPLAY_FOLDER_SIZES",e.SET_CLIPBOARD_FILES="BROWSE/SET_CLIPBOARD_FILES",e.SET_CONTEXT="BROWSE/SET_CONTEXT",e.SET_CURRENT_FOLDER_INFO="BROWSE/SET_CURRENT_FOLDER_INFO",e.SET_FILE_HAS_AUTOMATED_RULE_MAP="BROWSE/SET_FILE_HAS_AUTOMATED_RULE_MAP",e.SET_FILE_JUMP_FILTER="BROWSE/SET_FILE_JUMP_FILTER",e.SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE="BROWSE/SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE",e.SET_FILE_RENAME="BROWSE/SET_FILE_RENAME",e.SET_FOLDER_SIZES="BROWSE/SET_FOLDER_SIZES",e.SET_LOADING_STATE="BROWSE/SET_LOADING_STATE",e.SET_MOUNT_POINTS="BROWSE/SET_MOUNT_POINTS",e.SET_NEW_FOLDER_CREATION_STATE="BROWSE/SET_NEW_FOLDER_CREATION_STATE",e.SET_PAGINATED_TOTAL_NUM_FILES="BROWSE/SET_PAGINATED_TOTAL_NUM_FILES",e.SET_PATH="BROWSE/SET_PATH",e.SET_SELECTION="BROWSE/SET_SELECTION",e.SET_SHOULD_SHOW_DELETED_FILES="BROWSE/SET_SHOULD_SHOW_DELETED_FILES",e.SET_SORT_ORDER="BROWSE/SET_SORT_ORDER",e.SET_UNSORTED_FILES="BROWSE/SET_UNSORTED_FILES",e.SET_IS_FILE_VIEWER_SHOWN="BROWSE/IS_FILE_VIEWER_SHOWN",e.SET_IS_SEARCH_MODE="BROWSE/SET_IS_SEARCH_MODE",e.REQUEST_FOLDER_SIZES="BROWSE/REQUEST_FOLDER_SIZES",e.SET_FOLDER_SIZES_PENDING="BROWSE/SET_FOLDER_SIZES_PENDING",e.COMPLETE_FOLDER_SIZES="BROWSE/COMPLETE_FOLDER_SIZES",e.SET_ARE_POST_TTI_MODULES_LOADED="BROWSE/SET_ARE_POST_TTI_MODULES_LOADED",e.SET_VIEW_SCOPE="BROWSE/SET_VIEW_SCOPE",e.SET_HIDE_FILES_AND_SIDEBAR="BROWSE/SET_HIDE_FILES_AND_SIDEBAR",e.SET_IS_CREATING_SHARED_LINK="BROWSE/SET_IS_CREATING_SHARED_LINK",e.SET_RIGHTRAIL_IS_COLLAPSED="BROWSE/SET_RIGHTRAIL_COLLAPSED",e.SET_EXPANDED_BLADE="BROWSE/SET_EXPANDED_BLADE",e.SET_HAS_USER_UPLOADED_FILES="BROWSE/SET_HAS_USER_UPLOADED_FILES",e.SET_FLOWS_FOLDER_RULES_CONFIG="BROWSE/SET_FLOWS_FOLDER_RULES_CONFIG",e.SHOW_PERSONALIZATION_SUGGESTED_FOLDERS="BROWSE/SHOW_PERSONALIZATION_SUGGESTED_FOLDERS"})(t.ActionTypes||(t.ActionTypes={})),t.defaultBrowseState={boltIgnore:{added:new Set,moved:new Set,removed:new Set},canDisplayFolderSizes:!1,clipboard:{files:[]},context:new a.BrowseContext,isRewindButtonEnabled:!1,experiments:l.browse_web.BrowseExperiments.create(),browsePostTTIExperiments:{},browsePostTTIExperimentsOverrides:{},fileJumpFilter:"",filePathsToSelectOnNextUpdate:o.Set(),folderSizes:o.Map(),isRewindVisible:!1,isFolderHistoryVisible:!1,clickRewindTimestamp:void 0,clickFolderHistoryTimestamp:void 0,loadingState:r.LoadingState.LOADING_FIRST_PAGE,mountPoints:null,newFolderCreationState:r.NewFolderCreationState.CREATE_FOLDER_INACTIVE,paginatedTotalNumFiles:0,path:"",selection:n.createSelection(),shouldShowDeletedFiles:!1,user:null,unsortedFiles:o.Map(),viewer:null,currentFolderSizesQuery:o.Set(),isQueryingFolderSizes:!1,isSearchMode:!1,hasLinkedMobile:!1,autoTeamGroupId:"",hasUserUploadedFiles:!1,browsePostTTIData:{isOverFreeQuota:!1,hasExcludedNsIds:!1,uploaderPostTTIExperiments:{},preferredEditors:{},seenFileTaskListTooltip:!1,mobileWebInvites:!1,firstTaskProps:{is_eligible_team:!1,is_subtitle:!1,member_info:{tiered_admin:!1,users:[],evh_max_days:0,team_available_roles:[]},needs_pairing_token:!1,seen_desktop_tooltip:!1},familyMemberCount:0},arePostTTIModulesLoaded:!1,shouldHideFilesAndSidebar:!1,isCreatingSharedLinkMap:o.Map(),limitSelectionToTopmostFile:!1,isRightRailCollapsed:!1,fileHasAutomatedRuleMap:d.FlowsMap({}),expandedBlade:s.DEFAULT_BROWSE_BLADE,flowsFolderRulesConfig:{status:"initial"}}})),define("modules/clean/react/files_view/contexts/callback_context",["require","exports","tslib","react"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilesViewCallbackContextProvider=t.FilesViewCallbackContext=void 0,o=i.__importStar(o),t.FilesViewCallbackContext=o.createContext(void 0),t.FilesViewCallbackContextProvider=function(e){var i=e.props,l=i.onDelete,a=i.onShowRename,r=i.onNewFolderSubmit,n=i.onNewFolderCancel,s=i.onRenameSubmit,d=i.onRenameCancel,u=i.onSetClipboard,c=i.onPasteFromClipboard,p=i.onSwitchViewType,f=i.onColumnsChanged,m=i.onCanDisplayFolderSizesChanged,h=i.onAddFileJumpKeyCode,_=i.onResetFileJump,g=i.onShowShare,E=i.onPresentInZoom,S=i.onLocationLinkClick,T=i.onNavigateToFileOrFolder,b=i.onNavigateToParentFolder,w=i.onOpenFileSharedWithMe,I=i.onOpenPaper,L=i.onSelectionChange,v=i.onSortChange,F=i.onStarClick,O=i.onComponentTTI,y=i.onFocusSearchBar,M=e.children,C=o.useMemo((function(){return{onDelete:l,onShowRename:a,onNewFolderSubmit:r,onNewFolderCancel:n,onRenameSubmit:s,onRenameCancel:d,onSetClipboard:u,onPasteFromClipboard:c,onSwitchViewType:p,onColumnsChanged:f,onCanDisplayFolderSizesChanged:m,onAddFileJumpKeyCode:h,onResetFileJump:_,onShowShare:g,onPresentInZoom:E,onLocationLinkClick:S,onNavigateToFileOrFolder:T,onNavigateToParentFolder:b,onOpenFileSharedWithMe:w,onOpenPaper:I,onSelectionChange:L,onSortChange:v,onStarClick:F,onComponentTTI:O,onFocusSearchBar:y}}),[l,a,r,n,s,d,u,c,p,f,m,h,_,g,E,S,T,b,w,I,L,v,F,O,y]);return o.createElement(t.FilesViewCallbackContext.Provider,{value:C},M)}})),define("modules/clean/react/files_view/contexts/experiments_context",["require","exports","tslib","react"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentsContext=void 0,o=i.__importDefault(o),t.ExperimentsContext=o.default.createContext({teamSpaceTsdAccessVisibility:!1}),t.ExperimentsContext.displayName="FilesViewExperimentsContext"})),define("modules/clean/react/files_view/constants",["require","exports","tslib","react","modules/clean/react/files_view/types","modules/clean/react/files_view/view_type","modules/core/i18n","modules/clean/react/files_view/contexts/experiments_context"],(function(e,t,i,o,l,a,r,n){"use strict";var s,d,u;Object.defineProperty(t,"__esModule",{value:!0}),t.defaultViewTypes=t.IMAGE_THUMBNAIL_EXTENSIONS=t.VIEW_TYPE_SCOPE_IMAGE_SEARCH=t.VIEW_TYPE_SCOPE_TEXT_SEARCH=t.VIEW_TYPE_GLOBAL_SCOPE=t.VIEW_TYPE_COOKIE_NAME=t.OverflowMenuConstants=t.CulledListConstants=t.ViewTypeGridSizes=t.ViewTypeThumbnailSizes=t.AllSortDirections=t.AllLoadingStates=t.SortIsFilename=t.AllSortFields=t.AllDropTargetHighlightModes=t.AllViewTypes=t.AllRenameStates=t.AllNewFolderCreationStates=t.FilesViewTileGridConstants=t.SEARCH_LIST_VIEW_COLUMNS_DELETED=t.SEARCH_GRID_VIEW_SORT_ENABLED_COLUMNS=t.SEARCH_LIST_VIEW_SORT_ENABLED_COLUMNS=t.SEARCH_LIST_VIEW_COLUMNS=t.GRID_VIEW_COLUMNS=t.LIST_VIEW_COLUMNS=t.SharedWithLabel=t.GRID_VIEW_COLUMN_FLEX_RIGHT_RAIL=t.GRID_VIEW_COLUMN_FLEX=t.COLUMN_MAX_WIDTHS=t.COLUMN_MIN_WIDTHS=t.COLUMN_DEFAULT_WIDTHS=t.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX=t.FILE_NAME_CELL_SEARCH_FLEX_BASIS=t.LIST_VIEW_COLUMN_FLEX=t.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH=t.CHECKBOX_CELL_FLEX_RIGHT_RAIL=t.CHECKBOX_CELL_FLEX=t.COMPACT_COLUMN_HEADER_HEIGHT=t.DEFAULT_ROW_HEIGHT_WITH_SNIPPETS=t.TAGS_HEIGHT=t.MEDIA_CELL_ICON_WIDTH=t.SNIPPET_HORIZONTAL_PADDING=t.SNIPPET_HEIGHT_PER_ROW=t.ROW_SNIPPET_VERTICAL_MARGIN=t.ROW_VERTICAL_PADDING=t.ROW_SUBTITLE_HEIGHT=t.ROW_TITLE_HEIGHT=t.DEFAULT_ROW_HEIGHT_CONDENSED_LIST=t.DEFAULT_ROW_HEIGHT_DENSE=t.DEFAULT_ROW_HEIGHT=t.DEFAULT_COLUMN_HEADER_HEIGHT=void 0,o=i.__importStar(o);var c=r.intl.formatMessage({id:"P+XAua",defaultMessage:"Name"});t.DEFAULT_COLUMN_HEADER_HEIGHT=40,t.DEFAULT_ROW_HEIGHT=72,t.DEFAULT_ROW_HEIGHT_DENSE=60,t.DEFAULT_ROW_HEIGHT_CONDENSED_LIST=40,t.ROW_TITLE_HEIGHT=24,t.ROW_SUBTITLE_HEIGHT=16,t.ROW_VERTICAL_PADDING=16,t.ROW_SNIPPET_VERTICAL_MARGIN=8,t.SNIPPET_HEIGHT_PER_ROW=16,t.SNIPPET_HORIZONTAL_PADDING=16,t.MEDIA_CELL_ICON_WIDTH=64,t.TAGS_HEIGHT=22,t.DEFAULT_ROW_HEIGHT_WITH_SNIPPETS=t.ROW_VERTICAL_PADDING+t.ROW_TITLE_HEIGHT+t.ROW_SUBTITLE_HEIGHT+t.ROW_SNIPPET_VERTICAL_MARGIN+3*t.SNIPPET_HEIGHT_PER_ROW,t.COMPACT_COLUMN_HEADER_HEIGHT=48,t.CHECKBOX_CELL_FLEX="0 0 36px",t.CHECKBOX_CELL_FLEX_RIGHT_RAIL="0 0 44px",t.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH=65,t.LIST_VIEW_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 50%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 60%","0 0 40%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.FILE_NAME_CELL_SEARCH_FLEX_BASIS={3:50,2:65,1:100},t.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 "+t.FILE_NAME_CELL_SEARCH_FLEX_BASIS[3]+"%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 "+t.FILE_NAME_CELL_SEARCH_FLEX_BASIS[2]+"%","0 0 35%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 "+t.FILE_NAME_CELL_SEARCH_FLEX_BASIS[1]+"%"]},t.COLUMN_DEFAULT_WIDTHS={FILENAME:300,MODIFIED:160,CATEGORY:160,EXTENSION:160,SIZE:130,SHARED_WITH:160,SYNC_SETTING:160,FILE_COUNTS:160,RELEVANCE:160,LOCKED_FILES:160,POLICY:160,TAGS:160},t.COLUMN_MIN_WIDTHS={FILENAME:200,MODIFIED:140,CATEGORY:120,EXTENSION:160,SIZE:120,SHARED_WITH:120,SYNC_SETTING:120,FILE_COUNTS:120,RELEVANCE:150,LOCKED_FILES:120,POLICY:120,TAGS:120},t.COLUMN_MAX_WIDTHS={FILENAME:1200,MODIFIED:200,CATEGORY:300,EXTENSION:300,SIZE:200,SHARED_WITH:300,SYNC_SETTING:300,FILE_COUNTS:300,RELEVANCE:300,LOCKED_FILES:300,POLICY:300,TAGS:300},t.GRID_VIEW_COLUMN_FLEX=[t.CHECKBOX_CELL_FLEX,"1 1"],t.GRID_VIEW_COLUMN_FLEX_RIGHT_RAIL=[t.CHECKBOX_CELL_FLEX_RIGHT_RAIL,"1 1"],t.SharedWithLabel=function(){return o.useContext(n.ExperimentsContext).teamSpaceTsdAccessVisibility?o.default.createElement(o.default.Fragment,null,r.intl.formatMessage({id:"kGg5/N",defaultMessage:"Who can access"})):o.default.createElement(o.default.Fragment,null,r.intl.formatMessage({id:"HLRJwR",defaultMessage:"Members"}))},t.LIST_VIEW_COLUMNS=[{sortField:l.SortField.FILENAME,label:c,popoverTriggerLabel:c,isLocked:!0},{sortField:l.SortField.MODIFIED,label:r.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),popoverTriggerLabel:r.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"})},{sortField:l.SortField.SHARED_WITH,label:o.default.createElement(t.SharedWithLabel,null),popoverTriggerLabel:r.intl.formatMessage({id:"HLRJwR",defaultMessage:"Members"}),isSortOrderOptionDisabled:!0},{sortField:l.SortField.CATEGORY,label:r.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"}),popoverTriggerLabel:r.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"})},{sortField:l.SortField.EXTENSION,label:r.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"}),popoverTriggerLabel:r.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"})},{sortField:l.SortField.SIZE,label:r.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:r.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"})},{sortField:l.SortField.TAGS,label:r.intl.formatMessage({id:"hI7tD7",defaultMessage:"Tags"}),popoverTriggerLabel:r.intl.formatMessage({id:"hI7tD7",defaultMessage:"Tags"}),isSortOrderOptionDisabled:!0}],t.GRID_VIEW_COLUMNS=[{sortField:l.SortField.FILENAME,label:c,popoverTriggerLabel:c},{sortField:l.SortField.MODIFIED,label:r.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),popoverTriggerLabel:r.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"})},{sortField:l.SortField.CATEGORY,label:r.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"}),popoverTriggerLabel:r.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"})},{sortField:l.SortField.EXTENSION,label:r.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"}),popoverTriggerLabel:r.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"})},{sortField:l.SortField.SIZE,label:r.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:r.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"})}],t.SEARCH_LIST_VIEW_COLUMNS=[{sortField:l.SortField.FILENAME,label:c,popoverTriggerLabel:c,isLocked:!0,isSortDisabled:!0},{sortField:l.SortField.MODIFIED,label:r.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),popoverTriggerLabel:r.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),isLocked:!0,isSortDisabled:!0},{sortField:l.SortField.SIZE,label:r.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:r.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),isLocked:!0,isSortDisabled:!0}],t.SEARCH_LIST_VIEW_SORT_ENABLED_COLUMNS=[{sortField:l.SortField.FILENAME,label:c,popoverTriggerLabel:c,isLocked:!0,isSortDisabled:!0},{sortField:l.SortField.RELEVANCE,label:r.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),popoverTriggerLabel:r.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),isLocked:!1,isSortDisabled:!1},{sortField:l.SortField.SIZE,label:r.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:r.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),isLocked:!0,isSortDisabled:!0},{sortField:l.SortField.MODIFIED,label:r.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),popoverTriggerLabel:r.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),isLocked:!1,isSortDisabled:!1}],t.SEARCH_GRID_VIEW_SORT_ENABLED_COLUMNS=[{sortField:l.SortField.RELEVANCE,label:r.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),popoverTriggerLabel:r.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),isLocked:!1,isSortDisabled:!1},{sortField:l.SortField.MODIFIED,label:r.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),popoverTriggerLabel:r.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),isLocked:!1,isSortDisabled:!1}],t.SEARCH_LIST_VIEW_COLUMNS_DELETED=[{sortField:l.SortField.FILENAME,label:c,popoverTriggerLabel:c,isLocked:!0,isSortDisabled:!0},{sortField:l.SortField.MODIFIED,label:r.intl.formatMessage({id:"RBvabN",defaultMessage:"Deleted"}),popoverTriggerLabel:r.intl.formatMessage({id:"RBvabN",defaultMessage:"Deleted"}),isLocked:!0,isSortDisabled:!0}],t.FilesViewTileGridConstants={NUM_THRESHOLD_ROWS:10,SCROLL_DELTA_THRESHOLD:1},t.AllNewFolderCreationStates=[l.NewFolderCreationState.CREATE_FOLDER_INACTIVE,l.NewFolderCreationState.PENDING_INPUT,l.NewFolderCreationState.SAVING_INPUT],t.AllRenameStates=[l.RenameState.PENDING_INPUT,l.RenameState.SAVING_INPUT],t.AllViewTypes=[a.ViewType.Grid,a.ViewType.LargeGrid,a.ViewType.List,a.ViewType.CondensedList,a.ViewType.SmallGrid],t.AllDropTargetHighlightModes=[l.DropTargetHighlightMode.NONE,l.DropTargetHighlightMode.ALL_FOLDERS,l.DropTargetHighlightMode.NONSHARED_FOLDERS,l.DropTargetHighlightMode.NONSHARED_NONTEAM_FOLDERS],t.AllSortFields=[l.SortField.FILENAME,l.SortField.MODIFIED,l.SortField.CATEGORY,l.SortField.EXTENSION,l.SortField.SIZE,l.SortField.SHARED_WITH,l.SortField.SYNC_SETTING,l.SortField.FILE_COUNTS],t.SortIsFilename=[l.SortField.FILENAME,l.SortField.CATEGORY,l.SortField.EXTENSION,l.SortField.SHARED_WITH,l.SortField.SYNC_SETTING],t.AllLoadingStates=[l.LoadingState.LOADED,l.LoadingState.LOADING_FIRST_PAGE,l.LoadingState.LOADING_REMAINING_PAGES,l.LoadingState.LOAD_ERROR],t.AllSortDirections=[l.SortDirection.ASCENDING,l.SortDirection.DESCENDING],t.ViewTypeThumbnailSizes=((s={})[a.ViewType.Grid]=256,s[a.ViewType.LargeGrid]=512,s[a.ViewType.List]=32,s[a.ViewType.SmallGrid]=128,s),t.ViewTypeGridSizes=((d={})[a.ViewType.Grid]=160,d[a.ViewType.LargeGrid]=480,d[a.ViewType.List]=0,d[a.ViewType.SmallGrid]=80,d),t.CulledListConstants={ITEM_ROW_HEIGHT_PX:46,MAESTRO_ITEM_ROW_HEIGHT_PX:57,SEARCH_ROW_HEIGHT_PX:53,MAESTRO_SEARCH_ROW_HEIGHT_PX:66,DEFAULT_HEADER_HEIGHT_PX:142,ITEM_BUFFER_SIZE:5},t.OverflowMenuConstants={MENU_ITEM_HEIGHT_PX:32,MENU_MARGIN_PX:8,MENU_POPOVER_ITEM_GROUP_SEPARATOR_HEIGHT_PX:17},t.VIEW_TYPE_COOKIE_NAME="browse_view_type",t.VIEW_TYPE_GLOBAL_SCOPE="*",t.VIEW_TYPE_SCOPE_TEXT_SEARCH=":search/text",t.VIEW_TYPE_SCOPE_IMAGE_SEARCH=":search/image",t.IMAGE_THUMBNAIL_EXTENSIONS=["3fr","arw","bmp","cr2","crw","dcr","dcs","dng","erf","gif","heic","j2c","j2k","jp2","jpc","jpeg","jpf","jpg","jpg2","jpm","jpx","kdc","mef","mos","mrw","nef","nrw","orf","pef","png","ppm","psd","r3d","raf","rw2","rwl","sr2","svg","svgz","tga","tif","tiff","wbmp","web","webp","x3f","ai","eps","otf","ttf","3gp","3gpp","3gpp2","asf","avi","dv","flv","m2t","m4v","mkv","mov","mp4","mpeg","mpg","mts","mxf","oggtheora","ogv","rm","ts","vob","webm","wmv","indd"],t.defaultViewTypes=((u={})[t.VIEW_TYPE_GLOBAL_SCOPE]=a.ViewType.List,u[t.VIEW_TYPE_SCOPE_TEXT_SEARCH]=a.ViewType.List,u[t.VIEW_TYPE_SCOPE_IMAGE_SEARCH]=a.ViewType.LargeGrid,u)})),define("modules/clean/react/files_view/drag_drop/drag_and_drop",["require","exports","modules/clean/react/browse/models","modules/clean/react/files_view/util"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onFileDragEnterItem=t.cleanupExternalDragHandler=t.setupExternalDragHandler=void 0;var l=new o.ScopedEventHandlers(document);t.setupExternalDragHandler=function(e,t,i,o,a,r,n){l.add(e,"dragenter",(function(e){(t()||i())&&!e.target.closest(a)&&r()&&(n(null),o())}))},t.cleanupExternalDragHandler=function(e){l.remove(e,"dragenter")},t.onFileDragEnterItem=function(e,t,o,l,a,r,n,s){if(t||o)if(e.is_dir&&!(l&&o)){if(a)return;var d=r.isCurrentPathWriteable()&&!i.File.isReadOnlySharedFolder(e);n(e),s({path:e.fq_path,hasPermissionToUploadToFolder:d,isMovingIntoVault:Boolean(e.is_in_vault_folder)})}else n(null),s()}})),define("modules/clean/react/files_view/drag_drop/drag_to_select",["require","exports","tslib","react","modules/clean/react/components/css","modules/clean/react/files_view/types","modules/clean/react/selectable_list","lodash"],(function(e,t,i,o,l,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DragToSelectController=t.shouldMouseDownInitiateDragToSelect=t.isItemInSelectArea=void 0,o=i.__importDefault(o),t.isItemInSelectArea=function(e,t){return!(e.top+e.height<t.top||e.top>t.top+t.height||e.left+e.width<t.left||e.left>t.left+t.width)},t.shouldMouseDownInitiateDragToSelect=function(e,o,l,a){return!d(e)&&(e.target===e.currentTarget||(null==l||!l.selected||!l.selected.some((function(e){return a[e]&&t.isItemInSelectArea(a[e],i.__assign(i.__assign({},o),{height:0,width:0}))}))))};var s=n.throttle((function(e,i,o,l,n){Object.keys(e).forEach((function(s){t.isItemInSelectArea(e[s],i)?(null==n?void 0:n.selected.has(s))||o(s,r.SelectOptions.DEFAULT,a.FilesViewActionSource.DRAG_TO_SELECT):(null==n?void 0:n.selected.has(s))&&l(s,!1,a.FilesViewActionSource.DRAG_TO_SELECT)}))}),25),d=function(e){for(var t=e.target;t instanceof Node&&t!==e.currentTarget;){if(!0===t.draggable)return!0;t=t.parentElement}return!1};t.DragToSelectController=l.requireCssWithComponent((function(e){var i=o.default.useState(!1),l=i[0],r=i[1],d=o.default.useState(!1),u=d[0],c=d[1],p=o.default.useState(0),f=p[0],m=p[1],h=o.default.useRef(null),_=o.default.useRef({}),g=o.default.useState({top:0,left:0}),E=g[0],S=g[1],T=o.default.useState({top:0,left:0,width:0,height:0}),b=T[0],w=T[1];o.default.useEffect((function(){var e=n.throttle(I,8);return u&&(window.document.addEventListener("mouseup",L),window.document.addEventListener("mousemove",e)),function(){window.document.removeEventListener("mousemove",e),window.document.removeEventListener("mouseup",L)}}),[u,l]),o.default.useEffect((function(){return window.document.addEventListener("click",v,!0),function(){window.document.removeEventListener("click",v,!0)}}),[f]),o.default.useEffect((function(){l&&s(_.current,b,e.handleSelect,e.handleDeselect,e.selection)}),[l,b,e.selection]);var I=function(t){var i;if(u){if(1!==t.buttons)return c(!1),void r(!1);var o=null===(i=h.current)||void 0===i?void 0:i.getBoundingClientRect(),n=t.clientX-((null==o?void 0:o.left)||0),s=t.clientY-((null==o?void 0:o.top)||0);s<0&&(s=0),n<0&&(n=0),o&&n-10>o.width&&(n=o.width-10),o&&s-20>o.height&&(s=o.height-20);var d={top:Math.min(E.top,s),left:Math.min(E.left,n),height:Math.abs(E.top-s),width:Math.abs(E.left-n)};!l&&d.width<=5&&d.height<=5||(l?l&&w(d):(t.preventDefault(),e.updateSelection([],a.FilesViewActionSource.DRAG_TO_SELECT,!0),w(d),r(!0)))}},L=function(e){u&&(l&&m(Date.now()),r(!1),c(!1),w({top:0,left:0,width:0,height:0}),S({top:0,left:0}),e.preventDefault())},v=function(e){Date.now()-f<50&&e.preventDefault(),window.document.removeEventListener("click",v,!0)};if(!e.isDragToSelectEnabled){return o.default.createElement("div",null,e.children({registerSelectableItem:function(e,t){}}))}return o.default.createElement("div",{className:"files-view_drag-to-select",onMouseDown:function(i){var o;if(!i.isDefaultPrevented()&&!u&&1===i.buttons){var l=null===(o=h.current)||void 0===o?void 0:o.getBoundingClientRect(),a=i.clientX-((null==l?void 0:l.left)||0),r=i.clientY-((null==l?void 0:l.top)||0);t.shouldMouseDownInitiateDragToSelect(i,{top:r,left:a},e.selection,_.current)&&(S({top:r,left:a}),w({top:r,left:a,width:0,height:0}),c(!0))}},ref:h},o.default.createElement("div",{className:"files-view_drag-to-select-removal"},e.children({registerSelectableItem:function(e,t){var i,o=t.top+40,l=null===(i=h.current)||void 0===i?void 0:i.getBoundingClientRect();if(l){var a=t.width||l.width;_.current[e]={top:o,width:a,left:t.left,height:t.height}}}})),l&&o.default.createElement("div",{className:"files-view_select-box",style:{top:b.top+"px",left:b.left+"px",width:b.width+"px",height:b.height+"px"}}))}),["/static/css/files_view/drag_to_select-vfl1pMR5V.css"])})),define("modules/clean/react/files_view/file_jump",["require","exports","tslib","ts-keycode-enum","modules/core/dom"],(function(e,t,i,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleKeyPress=void 0,l=i.__importStar(l);var a=["/","\\",":","?","*","<",">","|"],r=null;t.handleKeyPress=function(e,t,i,n){var s=null!=e.which?e.which:e.keyCode,d=String.fromCharCode(s);s<o.Key.Space||a.includes(d)||!document.activeElement.closest(".brws-checkbox-cell")&&l.focus_in_input()||e.metaKey||e.altKey||e.altGraphKey||e.ctrlKey||s===o.Key.Space&&!t()||(s===o.Key.Space&&t()&&e.preventDefault(),i(d),null!=r&&clearTimeout(r),r=setTimeout((function(){n()}),1e3))}})),define("modules/clean/react/files_view/file_list_empty_folder_table",["require","exports","tslib","immutable","lodash","react","spectrum/media_table/index","spectrum/table/index","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/files_view/view_type"],(function(e,t,i,o,l,a,r,n,s,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyFolderTable=void 0,o=i.__importStar(o),l=i.__importStar(l),a=i.__importDefault(a);t.EmptyFolderTable=function(e){var t=e.subtitle,i=e.subtitleLink,u=e.subtitleOnClick,c=e.numRowsAbove,p=void 0===c?2:c,f=e.totalRows,m=void 0===f?14:f,h=e.title,_=e.onTTI,g=e.onFocusSearchBar,E=void 0===g?l.noop:g,S=e.onNavigateToParentFolder,T=void 0===S?l.noop:S,b=e.onOpenKeyboardShortcutModal,w=void 0===b?l.noop:b,I=e.onPasteFromClipboard,L=void 0===I?l.noop:I,v=a.default.useRef(null);a.default.useEffect((function(){return null==_||_(),s.setupFilesViewKeyboardShortcuts({viewType:d.ViewType.List,getIsGlobalEvent:s.generateGetIsGlobalEventForRef(v),getIsItemEvent:function(){return!1},getSelectedFiles:function(){return o.OrderedMap()},isCurrentPathWriteable:function(){return!1},selectAllAction:l.noop,deselectAllAction:l.noop,onCopyToClipboard:l.noop,onCutToClipboard:l.noop,onDelete:l.noop,onFocusSearchBar:E,onNavigateToFileOrFolder:l.noop,onNavigateToParentFolder:T,onPasteFromClipboard:L,onShowRename:l.noop,scope:"EmptyFolderTable",onShowHelpMenu:function(){return w()}}),function(){s.resetFilesViewKeyboardShortcuts("EmptyFolderTable")}}),[]);for(var F=[],O=0;O<p;O++)F.push(a.default.createElement(r.MediaRow,{key:-O-1}));var y=[],M=Math.max(m-p-1,0);for(O=0;O<M;O++)y.push(a.default.createElement(r.MediaRow,{key:O+1}));var C=a.default.createElement("h3",{className:"u-font-strong empty-folder-table-title"},h);return a.default.createElement(n.Table,{role:"main","aria-atomic":"true","aria-live":"polite",className:"empty-folder-table",ref:v},a.default.createElement(n.TableHead,null),a.default.createElement(n.TableBody,null,F,a.default.createElement(r.MediaRow,{key:0},a.default.createElement(r.MediaCell,{className:"empty-folder-table-cell",title:C,subtitle:t&&i?a.default.createElement("a",{className:"empty-folder-table-subtitle empty-folder-table-link",href:i,onClick:u},t):t?a.default.createElement("span",{className:"empty-folder-table-subtitle"},t):void 0})),y))}})),define("modules/clean/react/files_view/file_list_utils",["require","exports","modules/clean/filetypes","modules/clean/react/files_view/types","modules/clean/react/browse/models","modules/clean/sharing/browse_exports"],(function(e,t,i,o,l,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSharingDisabledForFile=t.canFileBeHighlightedDropTarget=void 0,t.canFileBeHighlightedDropTarget=function(e){var t=e.file,a=e.dropTargetHighlightMode;if(a===o.DropTargetHighlightMode.NONE)return!1;if(!t.is_dir)return!1;if(l.File.isReadOnlySharedFolder(t))return!1;if(t.isDeleted)return!1;switch(a){case o.DropTargetHighlightMode.ALL_FOLDERS:return!0;case o.DropTargetHighlightMode.NONSHARED_FOLDERS:return t.type!==i.FileTypes.SHARED_FOLDER;case o.DropTargetHighlightMode.NONSHARED_NONTEAM_FOLDERS:return![i.FileTypes.SHARED_FOLDER,i.FileTypes.TEAM_SHARED_FOLDER].includes(t.type)}return!1},t.isSharingDisabledForFile=function(e){var t=e.context,o=e.file,r=(e.user,e.expVaultEnableViewOnlySharing),n=void 0!==r&&r,s=o.per_node_metadata,d=!!((null==s?void 0:s.link_node)||(null==s?void 0:s.suppress_ns_partition)||(null==s?void 0:s.suppress_shared_link));return o.isDeleted||o.is_dir&&a.shouldUsePublicFolderSharing(t.config,o.fq_path)||l.File.isTeamMemberFolder(o)||!l.File.canViewFileMembers(o,t)||t.isInsideVaultFolder&&!n||o.type===i.FileTypes.VAULT_FOLDER||o.type===i.FileTypes.SANDBOX||d}})),define("modules/clean/react/files_view/contexts/file_thumb_store",["require","exports","tslib","react","modules/clean/photos/thumb_loading/buffered_thumb_store","modules/clean/photos/thumb_loading/generic_thumb_store","modules/clean/react/files_view/view_type","modules/clean/react/browse/models","modules/clean/react/files_view/files_view_hooks","modules/clean/react/icon/file_folder_icon","modules/clean/react/files_view/constants"],(function(e,t,i,o,l,a,r,n,s,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withThumbStore=t.ThumbStoreContext=t.ThumbStoreProvider=void 0,o=i.__importDefault(o),t.ThumbStoreProvider=function(e){var i=e.shouldPrewarm,c=e.path,p=e.children,f=e.items,m=s.useIsPostTTI(),h=o.default.useMemo((function(){return m?new a.GenericThumbStore:new l.BufferedThumbStore}),[c]);return o.default.useEffect((function(){if(i){var e=[];return null==f||f.slice(0,100).forEach((function(t){if(t instanceof n.File||t instanceof n.FileSharedWithMe){var i=d.getThumbnailUrlForItem(t.thumbnail_url_tmpl,u.ViewTypeThumbnailSizes[r.ViewType.Grid]);if(i){var o=h.bind_url(i,{onSuccess:function(){}});o&&e.push(o)}}})),function(){return e.forEach((function(e){return h.unbind_url(e)}))}}}),[c,f,h,i]),o.default.createElement(t.ThumbStoreContext.Provider,{value:h},p)},t.ThumbStoreContext=o.default.createContext(new a.GenericThumbStore),t.withThumbStore=function(e){return function(l){return o.default.createElement(t.ThumbStoreContext.Consumer,null,(function(t){return o.default.createElement(e,i.__assign({},l,{thumbStore:t}))}))}}})),define("modules/clean/react/files_view/keyboard_shortcuts",["require","exports","tslib","keymaster","react-dom","modules/clean/react/browse/action_logger","modules/clean/react/files_view/file_jump","modules/clean/react/files_view/view_type","modules/clean/react/files_view/util","modules/clean/undo","modules/core/browser_detection","modules/core/i18n","modules/core/notify"],(function(e,t,i,o,l,a,r,n,s,d,u,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetFileJumpKeyboardShortcuts=t.setupFileJumpKeyboardShortcuts=t.setupFilesViewKeyboardShortcuts=t.getActionsAndAttachLogging=t.resetFilesViewKeyboardShortcuts=t.generateGetIsGlobalEventForRef=t.generateGetIsGlobalEvent=t.FILES_VIEW_TILE_GRID_SHORTCUTS=t.FILES_VIEW_LIST_SHORTCUTS=t.FILES_VIEW_SHORTCUTS=void 0,o=i.__importDefault(o),l=i.__importStar(l),r=i.__importStar(r),d=i.__importStar(d),u=i.__importStar(u),t.FILES_VIEW_SHORTCUTS=[{key:c.intl.formatMessage({id:"kOb587",defaultMessage:"/"}),desc:c.intl.formatMessage({id:"vOBkFB",defaultMessage:"Search"})},{windowsKey:c.intl.formatMessage({id:"JD6thv",defaultMessage:"Ctrl + a"}),macKey:c.intl.formatMessage({id:"vXQEej",defaultMessage:"⌘ + a"}),desc:c.intl.formatMessage({id:"n7drWm",defaultMessage:"Select all files"})},{windowsKey:c.intl.formatMessage({id:"yY9fAj",defaultMessage:"Esc"}),macKey:c.intl.formatMessage({id:"yIq4Am",defaultMessage:"esc"}),desc:c.intl.formatMessage({id:"m7zp3J",defaultMessage:"Deselect all files"})},{windowsKey:c.intl.formatMessage({id:"BmNZ7+",defaultMessage:"Ctrl + c"}),macKey:c.intl.formatMessage({id:"L/3I1a",defaultMessage:"⌘ + c"}),desc:c.intl.formatMessage({id:"jD02CF",defaultMessage:"Copy selected file(s)"})},{windowsKey:c.intl.formatMessage({id:"TeH7ne",defaultMessage:"Ctrl + x"}),macKey:c.intl.formatMessage({id:"Hjoc2x",defaultMessage:"⌘ + x"}),desc:c.intl.formatMessage({id:"JvfueH",defaultMessage:"Cut selected file(s)"})},{windowsKey:c.intl.formatMessage({id:"pApXZD",defaultMessage:"Ctrl + v"}),macKey:c.intl.formatMessage({id:"1MiQRb",defaultMessage:"⌘ + v"}),desc:c.intl.formatMessage({id:"ORvNm9",defaultMessage:"Paste selected file(s) into the current folder"})},{key:c.intl.formatMessage({id:"u3d9dU",defaultMessage:"F2"}),desc:c.intl.formatMessage({id:"GrOPDo",defaultMessage:"Rename selected file"})},{windowsKey:c.intl.formatMessage({id:"kHlg2I",defaultMessage:"Delete"}),macKey:c.intl.formatMessage({id:"ZZU2Yr",defaultMessage:"delete"}),desc:c.intl.formatMessage({id:"45XRF8",defaultMessage:"Delete selected file(s)"})},{windowsKey:c.intl.formatMessage({id:"8X8aMD",defaultMessage:"Ctrl + z"}),macKey:c.intl.formatMessage({id:"10+RMZ",defaultMessage:"⌘ + z"}),desc:c.intl.formatMessage({id:"HGnEOI",defaultMessage:"Undo recent move/copy/rename/delete"})},{key:c.intl.formatMessage({id:"YQJt5v",defaultMessage:"?"}),desc:c.intl.formatMessage({id:"mFXmY0",defaultMessage:"Show keyboard shortcuts"})}],t.FILES_VIEW_LIST_SHORTCUTS=i.__spreadArrays([{key:c.intl.formatMessage({id:"lkVLik",defaultMessage:"↑"}),desc:c.intl.formatMessage({id:"Riu+zT",defaultMessage:"Select previous file (hold shift to select range)"})},{key:c.intl.formatMessage({id:"5ojTma",defaultMessage:"↓"}),desc:c.intl.formatMessage({id:"li5upG",defaultMessage:"Select next file (hold shift to select range)"})},{key:c.intl.formatMessage({id:"u6AlvH",defaultMessage:"←"}),desc:c.intl.formatMessage({id:"rJHa1d",defaultMessage:"Go up a folder"})},{key:c.intl.formatMessage({id:"LJ+WGg",defaultMessage:"→"}),desc:c.intl.formatMessage({id:"+WMBQW",defaultMessage:"Open folder"})}],t.FILES_VIEW_SHORTCUTS),t.FILES_VIEW_TILE_GRID_SHORTCUTS=i.__spreadArrays([{key:c.intl.formatMessage({id:"lkVLik",defaultMessage:"↑"}),desc:c.intl.formatMessage({id:"Xg+zFf",defaultMessage:"Select file in previous row (hold shift to select range)"})},{key:c.intl.formatMessage({id:"5ojTma",defaultMessage:"↓"}),desc:c.intl.formatMessage({id:"erVlBC",defaultMessage:"Select file in next row (hold shift to select range)"})},{key:c.intl.formatMessage({id:"u6AlvH",defaultMessage:"←"}),desc:c.intl.formatMessage({id:"Riu+zT",defaultMessage:"Select previous file (hold shift to select range)"})},{key:c.intl.formatMessage({id:"LJ+WGg",defaultMessage:"→"}),desc:c.intl.formatMessage({id:"li5upG",defaultMessage:"Select next file (hold shift to select range)"})}],t.FILES_VIEW_SHORTCUTS);var f="",m=new s.ScopedEventHandlers(document);function h(e,t){return function(i){e(i)&&(i.preventDefault(),"function"==typeof t&&t(i))}}function _(e){var t=e.user,i=e.viewType,o=e.getSelectedFiles,l=e.isCurrentPathWriteable,r=e.onShowHelpMenu,n=e.onDelete,s=e.onShowRename,u=e.onFocusSearchBar,f=e.onNavigateToFileOrFolder,m=e.onNavigateToParentFolder,h=e.selectAllAction,_=e.onCopyToClipboard,g=e.onCutToClipboard,E=e.onPasteFromClipboard,S=e.deselectAllAction,T=function(){var e=o(),t=e.some((function(e){return e.read_only}));if(1===e.size)if(l()&&!t){var i=e.first();i.isDeleted?p.Notify.error(c.intl.formatMessage({id:"CCUrto",defaultMessage:"Deleted files can’t be renamed."})):s(i)}else p.Notify.warning(c.intl.formatMessage({id:"jXim1P",defaultMessage:"You don’t have permission to rename files in this folder."}))},b=function(){var e=o();e.size&&n(e)},w=function(){d.performUndo()},I=function(){var e=o();1===e.size&&f(e.first())},L=function(){var e=o(),t=e.first();1===e.size&&t.is_dir&&f(t)},v=function(e,o){a.logKeyboardShortcutUsage({user_id:t?t.id:null,view_type:i,keyboard_shortcut_type:e}),o()};return{renameFile:function(){v("rename",T)},focusSearchBar:function(){v("search",u)},showHelpMenu:function(){v("help",r)},selectAll:function(){v("select-all",h)},copyToClipboard:function(){v("copy",_)},cutToClipboard:function(){v("cut",g)},deleteFiles:function(){v("delete",b)},pasteFromClipboard:function(){v("paste",E)},undoAction:function(){v("undo",w)},deselectFiles:function(){v("deselect",S)},navigateToFileOrFolder:function(){v("navigate-file-folder",I)},navigateToFolder:function(){v("navigate-folder",L)},navigateToParent:function(){v("navigate-parent",m)}}}t.generateGetIsGlobalEvent=function(e){return function(t){return!document.activeElement||document.activeElement===document.body||t.target instanceof Element&&l.findDOMNode(e).contains(t.target)}},t.generateGetIsGlobalEventForRef=function(e){return function(t){var i;return!document.activeElement||document.activeElement===document.body||t.target instanceof Element&&(null===(i=e.current)||void 0===i?void 0:i.contains(t.target))||!1}},t.resetFilesViewKeyboardShortcuts=function(e){var t;t=e,o.default.clearScope(t),o.default.setScope(f),m.remove(e,"keydown"),m.remove(e,"keyup")},t.getActionsAndAttachLogging=_,t.setupFilesViewKeyboardShortcuts=function(e){var t=e.scope,i=e.getIsItemEvent,l=e.getIsGlobalEvent;(f=o.default.getScope())!==t&&o.default.setScope(t);var a=_(e);o.default("f2",t,h(i,a.renameFile)),o.default("/",t,h(l,a.focusSearchBar)),o.default("shift+/",t,h(l,a.showHelpMenu)),o.default("escape",t,h(l,a.deselectFiles)),u.mac?(o.default("command+a",t,h(l,a.selectAll)),o.default("command+c",t,h(i,a.copyToClipboard)),o.default("backspace",t,h(i,a.deleteFiles)),o.default("command+v",t,h(l,a.pasteFromClipboard)),o.default("command+x",t,h(i,a.cutToClipboard)),o.default("command+z",t,h(l,a.undoAction))):(o.default("ctrl+a",t,h(l,a.selectAll)),o.default("ctrl+c",t,h(i,a.copyToClipboard)),o.default("delete",t,h(i,a.deleteFiles)),o.default("ctrl+v",t,h(l,a.pasteFromClipboard)),o.default("ctrl+x",t,h(i,a.cutToClipboard)),o.default("ctrl+z",t,h(l,a.undoAction))),e.viewType===n.ViewType.List&&(o.default("right",t,h(i,a.navigateToFolder)),o.default("left",t,h(l,a.navigateToParent)))},t.setupFileJumpKeyboardShortcuts=function(e){var t=e.scope,i=e.getIsFileJumping,l=e.onAddFileJumpKeyCode,a=e.onResetFileJump;m.add(t,"keypress",(function(e){o.default.getScope()===t&&r.handleKeyPress(e,i,l,a)}))},t.resetFileJumpKeyboardShortcuts=function(e){m.remove(e,"keypress")}})),define("modules/clean/react/files_view/name_input",["require","exports","tslib","react","ts-keycode-enum","modules/clean/react/files_view/types","dig-components/text_fields"],(function(e,t,i,o,l,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NameInput=void 0,o=i.__importDefault(o);var n=function(){},s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputRef=o.default.createRef(),t.handleDragStart=function(e){e.stopPropagation()},t.handleSubmit=function(e){e.preventDefault(),t.submitIfChanged(a.NameInputActionSource.SUBMIT)},t.handleKeyDown=function(e){e.keyCode===l.Key.Escape?(e.preventDefault(),t.props.onCancel({source:a.NameInputActionSource.ESC})):e.keyCode===l.Key.Enter&&t.handleSubmit(e)},t.handleBlur=function(e){t.submitIfChanged(a.NameInputActionSource.BLUR)},t.handleClick=function(e){e.preventDefault(),t.props.onClick(e)},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.inputRef.current&&this.inputRef.current.focus(),window.requestAnimationFrame((function(){if(e.inputRef.current){var t=e.inputRef.current.value,i=e.props.ignoreFileExtension?t.length:t.lastIndexOf(".");i<0&&(i=t.length),e.inputRef.current.setSelectionRange(0,i)}}))},t.prototype.submitIfChanged=function(e){if(this.inputRef.current){var t=this.inputRef.current.value.trim();t===this.props.defaultValue?this.props.onCancel({source:e}):this.props.onSubmit(t)}},t.prototype.render=function(){return o.default.createElement("form",{className:"u-pad-right-xs",onSubmit:this.handleSubmit},o.default.createElement(r.TextInput,{ref:this.inputRef,defaultValue:this.props.defaultValue,className:this.props.className,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onDragStart:this.handleDragStart,"aria-label":this.props.label,onClick:this.handleClick}))},t.defaultProps={className:"",onCancel:n,onClick:n,onSubmit:n,idDir:null},t})(o.default.PureComponent);t.NameInput=s})),define("modules/clean/react/files_view/overflow_menu",["require","exports","tslib","react","classnames","dig-components/buttons","dig-components/icons","dig-components/icons/src","dig-components/menu","modules/clean/react/async/loadable","modules/core/browser_detection","modules/core/i18n"],(function(e,t,i,o,l,a,r,n,s,d,u,c){"use strict";var p;Object.defineProperty(t,"__esModule",{value:!0}),t.FilesViewOverflowMenu=t.OverflowMenuSize=t.AsyncFilesViewMobileOverflowMenu=void 0,o=i.__importDefault(o),l=i.__importDefault(l),n=i.__importStar(n),t.AsyncFilesViewMobileOverflowMenu=d.Loadable({loader:function(){return new Promise((function(t,i){e(["modules/clean/react/files_view/mobile_overflow_menu"],t,i)})).then(i.__importStar).then((function(e){return e.FilesViewMobileOverflowMenu}))}}),(function(e){e[e.Normal=0]="Normal",e[e.Small=1]="Small"})(p=t.OverflowMenuSize||(t.OverflowMenuSize={}));var f=(function(e){function a(t){var i=e.call(this,t)||this;return i.handleSelection=function(e){e.performAction()},i.handleMenuToggle=function(e){var t=e.isOpen;if(t&&i.props.onMenuOpen&&i.props.onMenuOpen(),a.isDynamicProps(i.props)&&t){var o=i.props.getOverflowMenuActions(i.props.file,!!i.props.canDisplayFolderSizes);i.setState({actionSection:o})}},i.handlePreventMouseDown=function(e){e.preventDefault(),e.stopPropagation()},i.handleMobileMenuOpen=function(e){return function(t){i.handlePreventMouseDown(t),i.handleMenuToggle({isOpen:!0}),e()}},i.handleClick=function(e){return function(t){i.handlePreventMouseDown(t),e({})}},i.state={actionSection:a.isDynamicProps(t)?[]:t.actionSection},i}return i.__extends(a,e),a.prototype.render=function(){var e=this,r=this.props,n=r.isResponsive,d=r.size,c=r.showBorders,f=r.ariaHidden,h=(a.isDynamicProps(this.props)?this.props:{}).file,_=void 0===h?void 0:h,g=n&&u.is_mobile_or_tablet(),E=d===p.Small?"small":"standard";return o.default.createElement("div",{"aria-hidden":f?"true":void 0,className:"browse-overflow-menu"},g?o.default.createElement(t.AsyncFilesViewMobileOverflowMenu,{trigger:function(t){var i=t.openMobileMenu;return o.default.createElement(m,{onClick:e.handleMobileMenuOpen(i),showBorders:c,size:E})},file:_,actionSection:this.state.actionSection}):o.default.createElement(s.Menu.Wrapper,{onSelection:this.handleSelection,onToggle:this.handleMenuToggle,onClick:this.handlePreventMouseDown,onDoubleClick:this.handlePreventMouseDown,isPortaled:!1},(function(t){var a=t.getTriggerProps,r=t.getContentProps,n=t.openMenu;return o.default.createElement(o.default.Fragment,null,o.default.createElement(m,{triggerProps:a(),onClick:e.handleClick(n),showBorders:c,size:E,tabIndex:f?-1:0}),o.default.createElement(s.Menu.Content,i.__assign({placement:"bottom-end"},r(),{className:"browse-overflow-menu-content"}),e.state.actionSection.map((function(e,t){return o.default.createElement(s.Menu.Segment,{key:"action-group-"+t},e.map((function(e,t){return o.default.createElement(s.Menu.ActionItem,{key:t+"-"+e.label,value:e,disabled:e.disabled,className:l.default("browse-overflow-menu-item",e.className)},e.label)})))}))))})))},a.isDynamicProps=function(e){return"file"in e},a.defaultProps={onMenuToggle:function(){},isResponsive:!0},a})(o.default.Component);t.FilesViewOverflowMenu=f;var m=function(e){var t=e.size,l=e.showBorders,s=e.onClick,d=e.tabIndex,u=e.triggerProps,p=c.intl.formatMessage({id:"oeNPkV",defaultMessage:"More actions"});return o.default.createElement(a.IconButton,i.__assign({},u,{"aria-label":p,onClick:s,size:t,variant:l?"outline":"transparent",tabIndex:d}),o.default.createElement(r.UIIcon,{src:n.MoreHorizontalLine,size:t}))}})),define("modules/clean/react/files_view/star",["require","exports","tslib","react","modules/clean/react/async/loadable","modules/clean/react/files_view/contexts/callback_context","modules/clean/react/browse/models"],(function(e,t,i,o,l,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarContainer=void 0,o=i.__importDefault(o),t.StarContainer=l.Loadable({loader:function(){return i.__awaiter(void 0,void 0,void 0,(function(){var t,l,n,s,d;return i.__generator(this,(function(u){switch(u.label){case 0:return[4,new Promise((function(t,i){e(["modules/clean/react/starred/browse_exports"],t,i)})).then(i.__importStar)];case 1:return t=u.sent(),l=t.idTypePairFromStarrableItem,n=t.itemNameFromStarrableItem,s=t.Star,d=t.StarredSource,[2,function(e){var t=e.item,i=e.user,u=e.className,c=e.isReadOnly,p=e.tabIndex,f=e.starButtonClassName,m=e.alwaysShowUnstarred,h=l(t),_=h.id,g=h.type,E=n(t),S=(o.default.useContext(a.FilesViewCallbackContext)||{}).onStarClick;return o.default.createElement("div",{className:u},o.default.createElement(s,{id:_,key:"star",idType:g,isDir:Boolean(t.is_dir),user:i,onStarClick:function(e){t instanceof r.File&&(null==S||S(t,e))},source:d.BROWSE,isReadOnly:c,tabIndex:p,starButtonClassName:f,alwaysShowUnstarred:m,itemName:E}))}]}}))}))}})})),define("modules/clean/react/files_view/file_thumbnail",["require","exports","tslib","classnames","react","spectrum/file_icon/get_extension","modules/clean/react/files_view/constants","modules/clean/react/files_view/view_type","modules/clean/react/icon/file_folder_icon","modules/clean/react/icon/lock_badge","modules/clean/user_education/react/user_education_effect","modules/clean/react/files_view/contexts/file_thumb_store"],(function(e,t,i,o,l,a,r,n,s,d,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileThumbnail=t.FileThumbnailComponentForTests=void 0,o=i.__importDefault(o);var p=(function(e){function t(t){var i=e.call(this,t)||this;i._thumbRequestId=null,i.handleThumbnailError=function(){i.setState({thumbnailSrc:null})};var o=t.thumbStore,l=t.file.thumbnail_url_tmpl;return i.state={thumbnailSrc:l?o.get_thumb(l):null},i}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.fetchThumbnail(this.props)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.file.thumbnail_url_tmpl!==this.props.file.thumbnail_url_tmpl&&(this.unbindThumbnailIfNeeded(),this.fetchThumbnail(e))},t.prototype.componentWillUnmount=function(){this.unbindThumbnailIfNeeded()},t.prototype.fetchThumbnail=function(e){var t=this,i=e.file,o=e.thumbStore,l=i.fq_path||i.filename||"",d=a.getExtension(l);if(d&&r.IMAGE_THUMBNAIL_EXTENSIONS.includes(d)){var u=s.getThumbnailUrlForItem(i.thumbnail_url_tmpl,this.props.thumbnailSize?this.props.thumbnailSize:r.ViewTypeThumbnailSizes[n.ViewType.List]);u&&(this._thumbRequestId=o.bind_url(u,{onSuccess:function(){t.setState({thumbnailSrc:o.get_thumb(u)})},onError:function(){t.handleThumbnailError()}}))}},t.prototype.unbindThumbnailIfNeeded=function(){var e=this.props.thumbStore;this._thumbRequestId&&(e.unbind_url(this._thumbRequestId),this._thumbRequestId=null),this.setState({thumbnailSrc:null})},t.prototype.render=function(){var e=this.props,t=e.file,i=e.showCDMUserEducationEffects,a=e.iconSize,r=this.state.thumbnailSrc,n=t.fq_path||t.filename;return r?l.default.createElement(d.LockBadge,{file:this.props.file,variant:"preview-small"},l.default.createElement("img",{alt:n,draggable:!1,className:o.default("brws-file-name-cell-icon","brws-file-name-cell-thumb"),src:r,onError:this.handleThumbnailError})):l.default.createElement(f,{file:t,showCDMUserEducationEffects:i,iconSize:a})},t})((l=i.__importDefault(l)).default.PureComponent);t.FileThumbnailComponentForTests=p,t.FileThumbnail=c.withThumbStore(p);var f=function(e){var t=e.file,o=e.showCDMUserEducationEffects,a=e.iconSize,r=a?{height:a.toString(),width:a.toString()}:{},n=l.default.createElement(s.FileOrFolderIcon,i.__assign({className:"brws-file-name-cell-icon",file:t,showPreview:!1},r));return o?l.default.createElement(u.UserEducationEffect,{containerName:"FileItemRow",name:"TMFIcon",useSpan:!0},n):n}})),define("modules/clean/react/files_view/tile_grid",["require","exports","tslib","classnames","immutable","react","modules/clean/em_string","modules/clean/filepath/filepath","modules/clean/filetypes","modules/clean/react/browse/action_logger","modules/clean/react/browse/models","modules/clean/react/files_view/constants","modules/clean/react/files_view/drag_drop/drag_and_drop","modules/clean/react/files_view/file_list_utils","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/files_view/overflow_menu","modules/clean/react/files_view/star","modules/clean/react/files_view/tile_label_input","modules/clean/react/files_view/types","modules/clean/react/files_view/util","modules/clean/react/icon/file_folder_icon","modules/clean/react/maestro/components/tile_grid","modules/clean/react/selectable_list","modules/clean/react/sticky_position","modules/clean/react/title_bubble","modules/clean/web_user_action_events","modules/core/browser","modules/core/i18n"],(function(e,t,i,o,l,a,r,n,s,d,u,c,p,f,m,h,_,g,E,S,T,b,w,I,L,v,F,O){"use strict";function y(e){var t=e instanceof u.File?n.filename(e.fq_path):S.isFswm(e)?e.filename:e instanceof u.Paper?e.title:e.name;if(e instanceof u.File)switch(e.type){case s.FileTypes.FOLDER:t=O.intl.formatMessage({id:"C/gp+a",defaultMessage:"Folder, {alt}"},{alt:t});break;case s.FileTypes.PACKAGE:t=O.intl.formatMessage({id:"FhSkpL",defaultMessage:"Package, {alt}"},{alt:t});break;case s.FileTypes.SHARED_FOLDER:t=O.intl.formatMessage({id:"rWEPV0",defaultMessage:"Shared folder, {alt}"},{alt:t});break;case s.FileTypes.SANDBOX:t=O.intl.formatMessage({id:"+vbakm",defaultMessage:"Sandbox, {alt}"},{alt:t});break;case s.FileTypes.TEAM_SHARED_FOLDER:t=O.intl.formatMessage({id:"ZtOyAr",defaultMessage:"Team shared folder, {alt}"},{alt:t});break;case s.FileTypes.TEAM_MEMBER_FOLDER:t=O.intl.formatMessage({id:"1yRjbu",defaultMessage:"Team member folder, {alt}"},{alt:t});break;default:t=O.intl.formatMessage({id:"e8WrLw",defaultMessage:"File, {alt}"},{alt:t})}return t}function M(e){e.stopPropagation()}Object.defineProperty(t,"__esModule",{value:!0}),t.FilesViewTileGrid=t.TileLabel=void 0,o=i.__importDefault(o),l=i.__importStar(l),a=i.__importDefault(a),n=i.__importStar(n),F=i.__importStar(F);var C=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){var e,t=this.props,i=t.fileRename,o=t.arePostTTIModulesLoaded,l=t.user,s=t.item,d=t.createRenameCancelHandler,p=t.createRenameSubmitHandler;if(e=s instanceof u.File?n.filename(s.fq_path):s instanceof u.FileSharedWithMe?s.filename:s instanceof u.Paper?s.title:s.name,s instanceof u.File&&i&&n.paths_are_equal(i.file.fq_path,s.fq_path)){if(i.state===E.RenameState.PENDING_INPUT)return a.default.createElement(g.TileLabelInput,{defaultValue:e,label:e,onCancel:d(s),onSubmit:p(s)});if(i.state===E.RenameState.SAVING_INPUT)return a.default.createElement(b.TileItemLabelText,{className:"tile-label__text--saving",label:O.intl.formatMessage({id:"OefYpa",defaultMessage:"Renaming…"})})}var f=r.Emstring.em_snippet(e,14,.5),m=o&&s instanceof u.File&&!u.File.isNoAccessSharedFolder(s),h=a.default.createElement(b.TileItemLabelText,{key:"label",label:f});if(e!==f){var S=e.length<=c.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH?e:a.default.createElement("div",{className:"tile-label-tooltip"},e);h=a.default.createElement(L.TitleBubble,{content:S,position:I.StickyPosition.BOTTOM,className:"tile-label__title-bubble",key:"tooltip"},h)}var T=a.default.createElement(_.StarContainer,{item:s,user:l,className:"tile-star",key:"tileStar",tabIndex:-1});return a.default.createElement("span",null,[h,m&&!i&&T])},t})(a.default.PureComponent);t.TileLabel=C;var R=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tileGridRef=a.default.createRef(),t.state={inSelectMode:!1,selectedIds:l.Set(),menuOpenId:void 0},t.createRenameCancelHandler=function(e){return function(){t.props.onRenameCancel(e)}},t.createRenameSubmitHandler=function(e){return function(i){t.props.onRenameSubmit(e,i)}},t.logOverflowMenuOpen=function(){var e=t.props,i=e.selectedFiles,o=e.user,l=e.viewType,a=i?i.count((function(e){return e.is_dir})):0,r=i?i.count()-a:0;d.logContextMenuClick({uid:o.id,viewType:l,action_surface:v.ActionSurfaceLogValue.CENTER_PANE,numFilesSelected:r,numFoldersSelected:a})},t.hrefForItem=function(e,i){return i instanceof u.File?t.props.hrefForFile(e,i):i instanceof u.FileSharedWithMe?i.href:i.url},t.getTileItem=function(e,i){var o=t.props,l=o.activeDropTarget,a=o.isCreateFolderUIActive,r=o.isPhotosPage,n=o.items,s=o.selection,d=o.user,p=o.viewType,f=o.focusedFileIndex,m=o.disabledMultiselect,h=o.cutItems,_=t.state.menuOpenId,g=t.state.inSelectMode;if(a){if(0===e)return t.getCreateFolderTile();e-=1}var b=n.get(e);if(!b){var w="Placeholder "+e;return{altText:w,id:w,isViewOnly:!0,isDraggable:!1,isSelectable:!1}}var I=S.isFile(b)||S.isFswm(b),L=b,v=g&&I,F=f===e,M=v&&s.selected.some((function(e){return L instanceof u.FileSharedWithMe?L.file_id===e:L.fq_path===e})),C=t.createToggleSelectHandler(L,M),R=t.createClickHandler({item:b,inSelectModeAndIsFile:v,toggleSelectHandler:C}),P=t.createViewFileHandler(b,E.FilesViewActionSource.ROW_DOUBLE_CLICK),D=t.createViewFileHandler(b,E.FilesViewActionSource.ROW_TITLE),N=S.isFile(b)||S.isFswm(b)?t.renderTileOverflowMenu(b,i,r):void 0,A=t.renderLabelElement(e),H=y(b),k=b===l,x=t.hrefForItem(d,b),W=b instanceof u.File||b instanceof u.FileSharedWithMe?T.getThumbnailUrlForItem(b.thumbnail_url_tmpl,c.ViewTypeThumbnailSizes[p]):void 0;return{file:L,paper:b instanceof u.Paper?b:void 0,fileSharedWithMe:b instanceof u.FileSharedWithMe?b:void 0,id:u.itemId(b),labelNode:A,altText:H,thumbnailUrl:W,actionNode:N,onClick:R,onDoubleClick:P,onLabelClick:D,isDraggable:!r&&(M||!v),isViewOnly:m,isFocused:F,isSelectable:I,handleToggleSelect:C,checkboxAriaText:O.intl.formatMessage({id:"o3Djy2",defaultMessage:"Select tile"}),href:x,onDragEnter:r?void 0:t.createDragEnterHandler(L,M,k),onDragStart:r?void 0:t.createDragStartHandler(L,M,C),onDragEnd:r?void 0:t.createDragEndHandler(),isCheckboxFocusable:r,isCutToClipboard:h&&S.isCutToClipboard(b,h),className:_===u.itemId(b)?"tile--hover-forced":void 0}},t.shouldFileBeHighlightedDropTarget=function(e,i){var o=t.props.dropTargetHighlightMode;return f.canFileBeHighlightedDropTarget({file:e,dropTargetHighlightMode:o})},t.scrollIntoView=function(e,i){var o=e.top,l=e.bottom,a=t.props.viewportTopOffset,r=void 0===a?0:a,n=t.getScrollPane(),s=n.height,d=n.scrollTop,u=n.scrollTo,c=s-r,p=d+c;o<d?u(0,o):l>p&&u(0,i&&l-o<c/2?l-c/2:l-c)},t}return i.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({inSelectMode:this.props.selectedFiles.count()>0}),this.setSelectedTiles(this.props)},t.prototype.componentDidMount=function(){this.setupExternalDragHandler(),this.setupKeyboardShortcuts()},t.prototype.componentWillUnmount=function(){this.props.isPhotosPage||m.resetFileJumpKeyboardShortcuts(w.SELECTABLE_TILE_GRID_KEY_SCOPE),m.resetFilesViewKeyboardShortcuts(w.SELECTABLE_TILE_GRID_KEY_SCOPE),p.cleanupExternalDragHandler(w.SELECTABLE_TILE_GRID_KEY_SCOPE)},t.prototype.componentWillReceiveProps=function(e){e.selectedFiles!==this.props.selectedFiles&&(this.setSelectedTiles(e),this.setState({inSelectMode:e.selectedFiles.count()>0}))},t.prototype.componentDidUpdate=function(e){(e.createNewFolderState===E.NewFolderCreationState.PENDING_INPUT&&this.props.createNewFolderState===E.NewFolderCreationState.SAVING_INPUT||e.fileRename!==this.props.fileRename||e.items!==this.props.items||e.starredState!==this.props.starredState)&&this.tileGridRef.current&&this.tileGridRef.current.forceUpdate(),e.isActive!==this.props.isActive&&(this.props.isActive?this.setupKeyboardShortcuts():m.resetFilesViewKeyboardShortcuts(w.SELECTABLE_TILE_GRID_KEY_SCOPE))},t.prototype.getTotalNumItems=function(){var e=this.props,t=e.items,i=e.totalNumItems,o=e.isCreateFolderUIActive,l=Math.max(t.size,i);return o&&(l+=1),l},t.prototype.createToggleSelectHandler=function(e,t){var i=this,o=e instanceof u.FileSharedWithMe?e.file_id:e.fq_path;return function(e){var l=i.props,a=l.onDeselectFile,r=l.onSelectFile,n=Boolean(!("keyCode"in e)&&e.shiftKey);t?a(o,n):r(o,n?w.SelectOptions.EXTEND:w.SelectOptions.DEFAULT)}},t.prototype.renderTileOverflowMenu=function(e,t,i){var o=this,l=this.props,r=l.getOverflowMenuActions,n=l.arePostTTIModulesLoaded,s=l.inlineActions;return s&&e instanceof u.File?a.default.createElement("div",{onClick:M},a.default.createElement(s,{file:e,className:"tile__action-button--overflow-menu",onHoverLocked:function(t){var i=t.isOpen;o.setState({menuOpenId:i?u.itemId(e):void 0})}})):n&&a.default.createElement(h.FilesViewOverflowMenu,{file:e,getOverflowMenuActions:r,size:h.OverflowMenuSize.Small,showBorders:!0,ariaHidden:!i,onMenuOpen:this.logOverflowMenuOpen})},t.prototype.renderLabelElement=function(e){var t=this.props,i=t.items,o=t.focusedFileIndex,l=t.user,r=t.fileRename,n=t.arePostTTIModulesLoaded;if(!t.isPhotosPage){var s=i.get(e);if(s){var d=this.state.inSelectMode,u=o===e;return a.default.createElement(C,{item:s,user:l,fileRename:r,arePostTTIModulesLoaded:n,inSelectMode:d,isTileFocused:u,createRenameCancelHandler:this.createRenameCancelHandler,createRenameSubmitHandler:this.createRenameSubmitHandler})}}},t.prototype.createViewFileHandler=function(e,t){var i=this;return function(o){if(o.preventDefault(),o.stopPropagation(),"click"===o.type){var l=o;if(0===l.button){var a=i.hrefForItem(i.props.user,e);if(S.hasModifierKey(l))return void F.open_tab(a)}}e instanceof u.File?i.props.onNavigateToFileOrFolder(e,{actionSource:t}):e instanceof u.FileSharedWithMe?i.props.onOpenFileSharedWithMe(e):e instanceof u.Paper&&i.props.onOpenPaper(e)}},t.prototype.createClickHandler=function(e){var t=this,i=e.item,o=(e.inSelectModeAndIsFile,e.toggleSelectHandler),l=i instanceof u.File||i instanceof u.FileSharedWithMe;return function(e){if(l){var a="keyCode"in e;if(e.preventDefault(),a)o(e);else{var r=i instanceof u.FileSharedWithMe?i.file_id:i.fq_path;t.props.onSelectFile&&(e.shiftKey?t.props.onSelectFile(r,w.SelectOptions.EXTEND):e.ctrlKey||e.metaKey?o(e):t.props.onSelectFile(r,w.SelectOptions.ONLY))}}}},t.prototype.setSelectedTiles=function(e){var t=l.Set().withMutations((function(t){e.selectedFiles.forEach((function(e){var i;t.add((i=e)instanceof u.FileSharedWithMe?i.file_id:i.fq_path)}))}));this.setState({selectedIds:t})},t.prototype.setupExternalDragHandler=function(){var e=this;p.setupExternalDragHandler(w.SELECTABLE_TILE_GRID_KEY_SCOPE,(function(){return!!e.props.isDraggingInternalFiles}),(function(){return!!e.props.isDraggingExternalFiles}),this.props.onSetFileUploaderPath,".tile",(function(){return e.props.activeDropTarget}),this.props.onSetDropTarget)},t.prototype.setupKeyboardShortcuts=function(){var e=this,t=this.props,i=t.user,o=t.viewType,l=t.onDelete,a=t.onShowRename,r=t.deselectAll,n=t.getIsCurrentPathWriteable,s=t.getIsFileJumping,d=t.onAddFileJumpKeyCode,u=t.onResetFileJump,c=t.onCopyToClipboard,p=t.onCutToClipboard,f=t.onFocusSearchBar,h=t.onPasteFromClipboard,_=t.selectAll,g=m.generateGetIsGlobalEvent(this),E=g;this.props.isPhotosPage||m.setupFileJumpKeyboardShortcuts({scope:w.SELECTABLE_TILE_GRID_KEY_SCOPE,getIsFileJumping:s,onAddFileJumpKeyCode:d,onResetFileJump:u}),m.setupFilesViewKeyboardShortcuts({user:i,viewType:o,getIsGlobalEvent:g,getIsItemEvent:E,getSelectedFiles:function(){return e.props.selectedFiles},isCurrentPathWriteable:n,selectAllAction:_,deselectAllAction:r,onCopyToClipboard:c,onCutToClipboard:p,onDelete:l,onFocusSearchBar:f,onPasteFromClipboard:h,onShowRename:a,onNavigateToFileOrFolder:function(){},onNavigateToParentFolder:function(){},scope:w.SELECTABLE_TILE_GRID_KEY_SCOPE,onShowHelpMenu:this.props.onOpenKeyboardShortcutModal})},t.prototype.createDragEnterHandler=function(e,t,i){var o=this;return function(l){o.props.onDragEnter(l,e,t,i)}},t.prototype.createDragStartHandler=function(e,t,i){var o=this,l=this.props.preventSelectionOnDrag;return function(a){t?o.props.onDragStart(a):(l||i(a),o.props.onDragStart(a,[e]))}},t.prototype.createDragEndHandler=function(){var e=this;return function(t){e.props.onDragEnd(t)}},t.prototype.getCreateFolderTile=function(){var e=this.props,t=e.createNewFolderState,i=e.onNewFolderCancel,o=e.onNewFolderSubmit,l=O.intl.formatMessage({id:"pxGZm3",defaultMessage:"New folder"}),r=a.default.createElement("div",null);return t===E.NewFolderCreationState.PENDING_INPUT?(l=O.intl.formatMessage({id:"ss4CO0",defaultMessage:"Folder name"}),r=a.default.createElement(g.TileLabelInput,{label:l,onCancel:i,onSubmit:o})):t===E.NewFolderCreationState.SAVING_INPUT&&(l=O.intl.formatMessage({id:"p58M12",defaultMessage:"Creating new folder…"}),r=a.default.createElement(b.TileItemLabelText,{className:"tile-label__text--saving",label:l})),{altText:l,id:"New folder tile",isDraggable:!1,isSelectable:!1,labelNode:r}},t.prototype.getScrollPane=function(){var e=this.props.scrollContainer;if(e&&e.current){var t=e.current,i=t.clientHeight,o=t.scrollTop,l=t.scrollTo;return{height:i,scrollTop:o,scrollTo:l?l.bind(e.current):function(){}}}return{height:window.innerHeight,scrollTop:"scrollingElement"in window.document&&window.document.scrollingElement?window.document.scrollingElement.scrollTop:window.document.documentElement.scrollTop,scrollTo:window.scrollTo?window.scrollTo.bind(window):function(){}}},t.prototype.getWindow=function(){var e=this.props.scrollContainer;return e&&e.current?S.createFakeWindow(e.current):window},t.prototype.render=function(){var e=this.props,t=e.enableMaxHeightGrouping,i=e.sections,l=e.viewType,r=e.viewportTopOffset,n=e.scrollContainer,s=e.scrollPositionOffset,d=e.registerSelectableTile,u=e.isPhotosPage,p=o.default({"file-tile-grid-container":!0,"file-tile-grid-container--show-checkboxes":this.state.inSelectMode,"file-tile-grid-container--click-to-select":!0}),f=new Set;return this.state.selectedIds.forEach((function(e){return f.add(e)})),n&&!n.current?null:a.default.createElement("div",{role:"grid","aria-multiselectable":"true"},a.default.createElement(b.InfiniteTileGrid,{key:"tileGrid",ref:this.tileGridRef,totalNumItems:this.getTotalNumItems(),containerClass:p,rowClass:"file-tile-row",enableMaxHeightGrouping:t,delayRenderFullTile:!this.props.isCreateFolderUIActive,logTileLoading:!0,numThresholdRows:c.FilesViewTileGridConstants.NUM_THRESHOLD_ROWS,scrollDeltaThreshold:c.FilesViewTileGridConstants.SCROLL_DELTA_THRESHOLD,sectionStartIndices:i.sectionStartIndices,sectionLabels:i.sectionLabels,showLabels:!u,contentOffset:r,getTileItem:this.getTileItem,selectedIds:f,handleTTI:this.props.onTTI,onRangeInView:this.props.onRangeInView,tilesPerRow:this.props.tilesPerRow,onTilesPerRowChange:this.props.onTilesPerRowChange,activeDropTarget:this.props.activeDropTarget,maxTileWidth:c.ViewTypeGridSizes[l],tileHeight:c.ViewTypeGridSizes[l],shouldFileBeHighlightedDropTarget:this.shouldFileBeHighlightedDropTarget,scrollToIndex:this.props.focusedFileIndex,scrollIntoView:this.scrollIntoView,scrollPositionOffset:s||0,window:this.getWindow(),registerSelectableTile:d}))},t.defaultProps={enableMaxHeightGrouping:!1},t})(a.default.PureComponent);t.FilesViewTileGrid=R})),define("modules/clean/react/files_view/tile_label_input",["require","exports","tslib","classnames","react","modules/clean/react/files_view/name_input"],(function(e,t,i,o,l,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileLabelInput=void 0,o=i.__importDefault(o),l=i.__importDefault(l),t.TileLabelInput=function(e){var t=o.default("tile-label-input",e.className),i=e.defaultValue||"";return l.default.createElement(a.NameInput,{className:t,defaultValue:i,label:e.label,onCancel:e.onCancel,onClick:function(e){e&&(e.stopPropagation(),e.preventDefault())},onSubmit:e.onSubmit})}})),define("modules/clean/react/maestro/components/tile_grid",["require","exports","tslib","classnames","react","resize-observer-polyfill","react-dom","spectrum/culled_list/index","modules/clean/filepath/filepath","modules/clean/js_client_stopwatch","modules/clean/react/maestro/components/tile_element","modules/clean/react/maestro/components/tile_grid_logger"],(function(e,t,i,o,l,a,r,n,s,d,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteTileGrid=t.TileItemLabelText=t.memoizeCallback=void 0,o=i.__importDefault(o),l=i.__importDefault(l),a=i.__importDefault(a),r=i.__importStar(r),s=i.__importStar(s);function p(e){var t=null;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(!t||t.length!==i.length||!t.every((function(e,t){return e===i[t]})))return t=i,e.apply(void 0,i)}}t.memoizeCallback=p,t.TileItemLabelText=function(e){var t=e.className,i=e.label;return t=o.default("tile-label__text",t),l.default.createElement("div",{className:t},i)};var f=(function(e){function t(t){var i=e.call(this,t)||this;if(i.tileIndexToRowIndex=[],i.rowHeights=[],i.ttiReported=!1,i.itemRangeByRow=[],i.tileLoadLogger=null,i.updateLayout=function(){i.animationFrameRequestId=window.requestAnimationFrame((function(){var e=i.getAndUpdateTileLayout();i.props.logTileLoading&&!i.tileLoadLogger&&i.setupTileLogging(i.getRowHeight(),e.tilesPerRow)}))},i.updateScroll=function(e){var t=i.props,o=t.scrollToIndex,l=t.scrollIntoView,a=t.scrollPositionOffset;if(void 0!==o&&l){var r=i.tileIndexToRowIndex[o],n=i.rowHeights.slice(0,r).reduce((function(e,t){return e+t}),a);l({top:n,bottom:n+i.rowHeights[r]},e)}},i.getAndUpdateTileLayout=function(){var e=i.props.maxTileWidth+i.props.tilePadding,t=r.findDOMNode(i);if(!t||0===t.clientWidth)return{tileWidth:i.state.tileWidth,tilesPerRow:i.props.tilesPerRow};var o=t.clientWidth,l=Math.max(1,Math.floor(o/e)),a=i.props.maxTileWidth;return o%e>1&&(a=o/++l-i.props.tilePadding),i.state.tileWidth!==a&&i.setState({tileWidth:a}),i.props.tilesPerRow!==l&&i.props.onTilesPerRowChange(l),{tileWidth:a,tilesPerRow:l}},i.handleTTI=function(){i.ttiReported=!0;var e=i.props.handleTTI;e&&e()},i.setLastViewedPage=function(e){if(i.tileLoadLogger){var t=document.documentElement.scrollTop||document.body.scrollTop,o=Math.round(t/e);if(i.tileLoadLogger.pruneTrackedPages(),i.tileLoadLogger.logCompletedPages(),!i.tileLoadLogger.pagesCompletedLogging.has(o)&&!i.tileLoadLogger.pagesToLog.has(o))if(o!==i.tileLoadLogger.lastViewedPage){if(i.tileLoadLogger.lastViewedPage=o,i.tileLoadLogger.pageChangeTime=i.tileLoadLogger.getTimeNow(),!i.tileLoadLogger.startTimeByPage.get(o)){var l=i.tileLoadLogger.getTimeNow();i.tileLoadLogger.startTimeByPage.set(o,l)}}else(l=i.tileLoadLogger.getTimeNow())-i.tileLoadLogger.pageChangeTime>1e3&&i.tileLoadLogger.pagesToLog.add(o)}},i.logTileError=function(e){i.tileLoadLogger&&i.tileLoadLogger.recordTileError(e),i.props.logTileLoading&&c.InfiniteTileGridLogger.logThumbLoadError()},i.logTileLoaded=function(e,t,o){i.tileLoadLogger&&i.tileLoadLogger.recordTileLoaded(e,t,o)},i.renderTileElement=function(e,t,o,a){var r,n;if(e<0||e>i.props.totalNumItems)return null;var d=i.props.getTileItem(e,o);if(!d)return l.default.createElement(u.TilePlaceholder,{leftOffset:t,tileHeight:i.state.tileWidth,tileWidth:i.state.tileWidth});var c,p=i.ttiReported&&i.props.delayRenderFullTile,f=d.isSelectable&&!!i.props.selectedIds&&i.props.selectedIds.has(d.id),m=d.file&&i.props.shouldFileBeHighlightedDropTarget(d.file,f),h=m&&d.file===i.props.activeDropTarget,_="";d.fileSharedWithMe?(_=d.fileSharedWithMe.file_id,c={type:d.fileSharedWithMe.type,icon:d.fileSharedWithMe.icon,fq_path:"/"+d.fileSharedWithMe.filename,thumbnail_url_tmpl:d.fileSharedWithMe.thumbnail_url_tmpl,name:d.fileSharedWithMe.filename}):d.file&&(_=d.file.fq_path,c={type:d.file.type,icon:d.file.icon,fq_path:d.file.fq_path,thumbnail_url_tmpl:d.file.thumbnail_url_tmpl,name:s.filename(d.file.fq_path),isDeleted:d.file.isDeleted,is_locked:d.file.is_locked,is_lockholder:d.file.is_lockholder,lockholder_name:d.file.lockholder_name,lock_info:d.file.lock_info});var g=d.labelNode?i.props.labelHeight:0;null===(n=(r=i.props).registerSelectableTile)||void 0===n||n.call(r,_,{top:a,left:t,width:i.state.tileWidth,height:g+i.state.tileWidth});var E=0===e&&i.props.selectedIds&&0===i.props.selectedIds.size;return l.default.createElement(u.TileElement,{file:c,paper:d.paper,key:d.id,onClick:d.onClick,onDoubleClick:d.onDoubleClick,onLabelClick:d.onLabelClick,width:i.state.tileWidth,leftOffset:t,tileIndex:e,labelHeight:g,delayRenderFullTile:p,actionNode:d.actionNode,thumbnailUrl:d.thumbnailUrl,labelNode:d.labelNode,altText:d.altText,onThumbnailError:i.props.logTileLoading?i.logTileError:void 0,onThumbnailLoad:i.props.logTileLoading?i.logTileLoaded:void 0,isDraggable:d.isDraggable,onDragEnter:d.onDragEnter,onDragStart:d.onDragStart,onDragEnd:d.onDragEnd,isFocused:d.isFocused,isSelectable:d.isSelectable,isSelected:f,isViewOnly:d.isViewOnly,isActiveDropTarget:h,isAvailableDropTarget:m,handleToggleSelect:d.handleToggleSelect,checkboxAriaText:d.checkboxAriaText,checkboxTabIndex:d.isCheckboxFocusable?0:-1,href:d.href,overrideTabIndex:E,isCutToClipboard:d.isCutToClipboard,className:d.className})},i.renderRow=function(e,t,o){var a=i.getRowHeight(t);if(!e)return l.default.createElement(n.CulledItem,{className:i.props.rowClass,height:a,key:t,tagName:"div",topOffset:o});if(!Array.isArray(e))return l.default.createElement(n.CulledItem,{className:i.props.rowClass,height:a,key:t,tagName:"div",topOffset:o},e);for(var r=e,s=r[0],d=r[1],u=i.state.tileWidth+i.props.tilePadding,c=[],p=4,f=s;f<d;f++)c.push(i.renderTileElement(f,p,c.length,o)),p+=u;return l.default.createElement(n.CulledItem,{className:i.props.rowClass,height:a,key:t,tagName:"div",topOffset:o},c)},i.handleRangeInView=p((function(e,t){var o=i.props.onRangeInView;if(o&&0!==i.props.totalNumItems){var l=i.translateRowRangeToItemRange(e,t),a=l[0],r=l[1];isNaN(a)||isNaN(r)||o(a,r)}})),i.props.sectionLabels||i.props.sectionStartIndices){if(!i.props.sectionLabels||!i.props.sectionStartIndices)throw new Error("Included only one of `sectionLabels` or `sectionStartIndices`.");if(i.props.sectionLabels.length!==i.props.sectionStartIndices.length)throw new Error("sectionLabels and sectionStartIndices must be of same length.")}return i.state={tileWidth:i.props.maxTileWidth},d.JSStopwatch.create_stopwatch_if_not_exist("infinite_tile_grid_logging"),i.resizeObserver=new a.default(i.updateLayout),i}return i.__extends(t,e),t.prototype.componentDidMount=function(){window.addEventListener("resize",this.updateLayout),this.updateLayout(),this.updateScroll(!0);var e=document.querySelector(".maestro-secondary-sidebar-v2");e&&this.resizeObserver.observe(e)},t.prototype.componentDidUpdate=function(e){this.tileLoadLogger&&this.tileLoadLogger.updateNumTiles(this.props.totalNumItems),e.scrollToIndex!==this.props.scrollToIndex&&this.updateScroll(void 0===e.scrollToIndex||e.scrollToIndex<0),e.maxTileWidth!==this.props.maxTileWidth&&this.updateLayout()},t.prototype.componentWillUnmount=function(){this.resizeObserver.disconnect(),window.removeEventListener("resize",this.updateLayout),this.animationFrameRequestId&&window.cancelAnimationFrame(this.animationFrameRequestId),this.tileLoadLogger&&(clearInterval(this.logTrackingInterval),this.tileLoadLogger=null)},t.prototype.getRowHeight=function(e){if(void 0!==e&&this.rowHeights)return this.rowHeights[e];var t=this.state.tileWidth+this.props.tilePadding;return this.props.showLabels&&(t+=this.props.labelHeight+4),t},t.prototype.getPageHeight=function(){var e=(document.documentElement.clientHeight||window.outerHeight)-(this.props.contentOffset||0),t=this.getRowHeight(),i=t*Math.ceil(e/t);return Math.max(i,t)},t.prototype.setupTileLogging=function(e,t){var i=this.getPageHeight(),o=t*Math.ceil(i/e);this.tileLoadLogger=new c.InfiniteTileGridLogger(this.props.totalNumItems,o,t,this.handleTTI),this.tileLoadLogger.pagesToLog.add(0);var l=this.tileLoadLogger.getTimeNow();this.tileLoadLogger.startTimeByPage.set(0,l),this.logTrackingInterval=setInterval(this.setLastViewedPage,200,i)},t.prototype.translateRowRangeToItemRange=function(e,t){var i=this.itemRangeByRow;return[i[e][0],i[t][1]]},t.prototype.render=function(){var e=this;this.itemRangeByRow=[],this.rowHeights=[],this.tileIndexToRowIndex=[];var t=[],i=this.getRowHeight(),o=this.props,a=o.containerClass,r=o.enableMaxHeightGrouping,s=o.numThresholdRows,d=o.scrollDeltaThreshold,u=o.sectionStartIndices,c=o.sectionLabels,p=o.totalNumItems,f=o.window;if(u&&u.length>0)u.forEach((function(o,a){var r=p;a!==u.length-1&&(r=u[a+1]),e.rowHeights.push(32);var n=r-o,s=Math.ceil(n/e.props.tilesPerRow),d=c[a],f=l.default.createElement("div",{className:"tile-section-header",role:"heading","aria-level":2},d);t.push(f),e.itemRangeByRow.push([o,o]);for(var m=0;m<s;m++){var h=o+m*e.props.tilesPerRow,_=Math.min(h+e.props.tilesPerRow,r),g=[h,_];t.push(g),e.itemRangeByRow.push(g);for(var E=h;E<_;E++)e.tileIndexToRowIndex.push(e.rowHeights.length);e.rowHeights.push(i)}}));else for(var m=Math.ceil(p/this.props.tilesPerRow),h=0;h<m;h++){var _=h*this.props.tilesPerRow,g=Math.min(_+this.props.tilesPerRow,p),E=[_,g];t.push(E),this.itemRangeByRow.push(E);for(var S=_;S<g;S++)this.tileIndexToRowIndex.push(this.rowHeights.length);this.rowHeights.push(i)}return l.default.createElement(n.CulledList,{enableMaxHeightGrouping:r,items:t,listItemHeight:this.rowHeights,itemBuffer:s,className:a,renderRow:this.renderRow,scrollThreshold:d,shouldUseWindowAsScrollContainer:!0,onRangeInView:this.handleRangeInView,tagName:"div",window:f})},t.defaultProps={enableMaxHeightGrouping:!1,numThresholdRows:10,tilePadding:16,tileHeight:160,maxTileWidth:160,labelHeight:40,logTileLoading:!1,scrollDeltaThreshold:1,showLabels:!0,getTileItem:function(){return null},handleTTI:function(){}},t})(l.default.PureComponent);t.InfiniteTileGrid=f})),define("modules/clean/react/maestro/components/tile_element",["require","exports","tslib","classnames","react","dig-components/controls","ts-keycode-enum","modules/clean/paper_formatting_utils","modules/clean/react/files_view/double_click","modules/clean/react/icon/file_folder_icon","modules/clean/react/icon/lock_badge","modules/clean/react/maestro/components/tile_grid_logger","modules/clean/user_education/react/user_education_effect","modules/clean/react/files_view/contexts/file_thumb_store"],(function(e,t,i,o,l,a,r,n,s,d,u,c,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileElement=t.TileElementComponentForTests=t.TilePlaceholder=t.TileLabel=void 0,o=i.__importDefault(o),l=i.__importDefault(l),n=i.__importStar(n);var m=function(){return null};t.TileLabel=function(e){var t=e.ariaLabel,i=e.children,o=e.onClick;if(!i)return null;var a=l.default.createElement("div",{className:"tile-label","aria-hidden":"true"},i);return o?l.default.createElement("a",{onClick:o,tabIndex:-1,"aria-label":t},a):a},t.TilePlaceholder=function(e){var i=e.leftOffset,o=e.tileHeight,a=e.tileWidth,r=e.thumbNode,n=e.labelNode;return l.default.createElement("div",{className:"tile",style:{left:i,height:o,width:a,pointerEvents:"none"}},l.default.createElement("div",{className:"tile__thumb-container",style:{height:a,width:a}},r||l.default.createElement("div",{className:"tile__preview--placeholder"})),l.default.createElement(t.TileLabel,null,n))};var h=(function(e){function f(t){var o=e.call(this,t)||this;return o.thumbRequestId=null,o.animationRequestIds=[],o.handleThumbnailError=function(){var e=o.props,t=e.onThumbnailError,i=e.tileIndex;o.setState({thumbLoaded:!1}),t&&t(i)},o.logTileInteractive=function(){var e=!!o.props.thumbnailUrl,t=o.state.thumbLoaded;if(o.props.onThumbnailLoad){var i=window.requestAnimationFrame((function(){var i=window.requestAnimationFrame((function(){o.props.onThumbnailLoad(o.props.tileIndex,e,t)}));o.animationRequestIds.push(i)}));o.animationRequestIds.push(i)}},o.toggleSelect=function(e){e.stopPropagation(),o.props.handleToggleSelect(e)},o.handleKeyDown=function(e){var t=e.keyCode;e.currentTarget!==e.target||t!==r.Key.Space&&t!==r.Key.Enter||(e.preventDefault(),o.props.onClick(e))},o.handleCheckboxChange=function(){},o.state=i.__assign({thumbLoaded:f.isThumbLoaded(t)},o.calcPaperTitleState(t)),o}return i.__extends(f,e),f.prototype.componentDidMount=function(){var e=this;this.props.delayRenderFullTile?this.renderCompleteTileTimeout=setTimeout((function(){e.renderCompleteTileTimeout=0,e.fetchThumbnail(e.props)}),100):this.fetchThumbnail(this.props),this.logTileInteractive()},f.prototype.componentDidUpdate=function(e,t){if(!e.isFocused&&this.props.isFocused){var i=this.refs.tileContainer;i&&i.focus()}},f.prototype.componentWillReceiveProps=function(e){if(e.thumbnailUrl!==this.props.thumbnailUrl&&(this.unbindThumbnailIfNeeded(),this.fetchThumbnail(e)),f.getPaperTitle(this.props)!==f.getPaperTitle(e)){var t=this.calcPaperTitleState(e);this.setState(t)}},f.getPaperTitle=function(e){return e.paper?e.paper.title:null},f.prototype.calcPaperTitleState=function(e){return e.paper?{paperTitleParts:n.getPaperDocTitleParts(e.paper,"brws-file-name-grid-icon","brws-file-name-grid-icon-emoji",!0)}:{}},f.prototype.componentWillUnmount=function(){this.unbindThumbnailIfNeeded(),this.renderCompleteTileTimeout&&clearTimeout(this.renderCompleteTileTimeout),this.animationRequestIds.forEach((function(e){window.cancelAnimationFrame(e)})),this.animationRequestIds=[]},f.prototype.fetchThumbnail=function(e){var t=this,i=e.thumbnailUrl,o=e.thumbStore;if(i){var l=Date.now();this.thumbRequestId=o.bind_url(i,{onSuccess:function(){t.setState({thumbLoaded:!0}),c.InfiniteTileGridLogger.logThumbRTT(Date.now()-l)},onError:function(){t.handleThumbnailError()}})}},f.prototype.unbindThumbnailIfNeeded=function(){var e=this.props.thumbStore;this.thumbRequestId&&(e.unbind_url(this.thumbRequestId),this.thumbRequestId=null),this.setState({thumbLoaded:!1})},f.isThumbLoaded=function(e){var t=e.thumbStore,i=e.thumbnailUrl;return!(!i||!t.get_thumb(i))},f.prototype.renderCheckbox=function(){var e=l.default.createElement(a.Checkbox,{className:"tile-checkbox","aria-label":this.props.checkboxAriaText,onClick:this.toggleSelect,onChange:this.handleCheckboxChange,tabIndex:this.props.checkboxTabIndex,checked:this.props.isSelected});return 0===this.props.tileIndex&&(e=l.default.createElement(p.UserEducationEffect,{containerName:"FileItemRow",name:"FirstFileSelectCheckbox"},e)),l.default.createElement("div",{key:"tile-select-checkbox",className:"tile-select-checkbox"},e)},f.prototype.renderActionNode=function(){return l.default.createElement("div",{key:"tile-action-node",className:"tile__action-button"},this.props.actionNode)},f.prototype.renderThumbnail=function(){var e=this.props,t=e.thumbnailUrl,i=e.thumbStore,o=e.height,a=e.width,r=e.isSelected;if(this.state.thumbLoaded){var n=i.get_thumb(t);if(n){var s=r?a-24:a,d=o||s;return l.default.createElement(u.LockBadge,{file:this.props.file,variant:"preview-large"},l.default.createElement("img",{className:"tile__preview tile__preview--thumb",draggable:!1,src:n,style:{maxHeight:d,maxWidth:s},onError:this.handleThumbnailError,alt:""}))}}return this.renderFileIcon()},f.prototype.renderFileIcon=function(){var e=this.props,t=e.file;return e.paper?this.state.paperTitleParts.icon:t?l.default.createElement(d.FileOrFolderIcon,i.__assign({className:"tile__preview tile__preview--icon brws-file-name-grid-icon",file:t,variant:"large",showPreview:!1},{"aria-hidden":!0})):l.default.createElement("div",{className:"tile__preview--placeholder"})},f.prototype.render=function(){var e=this,a=this.props,r=a.altText,n=a.file,d=a.height,u=a.href,c=a.isActiveDropTarget,p=a.isAvailableDropTarget,f=a.isCutToClipboard,m=a.isDraggable,h=a.isFocused,_=a.isSelectable,g=a.isSelected,E=a.isViewOnly,S=a.labelHeight,T=a.labelNode,b=a.leftOffset,w=a.onClick,I=a.onDoubleClick,L=a.onLabelClick,v=a.onDragEnter,F=a.onDragStart,O=a.onDragEnd,y=a.overrideTabIndex,M=a.width,C=a.className,R=d||M,P=R+S;if(E)return l.default.createElement(t.TilePlaceholder,{leftOffset:b,tileHeight:P,tileWidth:M,thumbNode:this.renderThumbnail(),labelNode:T});var D={left:b,height:P,width:M},N={height:R,width:M},A={className:o.default("tile",C,{"tile--is-selected":g,"tile--is-dragover":c,"tile--is-droppable":p&&!c,"tile--is-cut":f}),"data-filename":n&&n.name,style:D,draggable:m,href:u,onDragEnter:v,onDragStart:F,onDragEnd:O,"aria-label":n&&n.name,role:"gridcell"},H=l.default.createElement("div",{className:"tile__thumb-container",style:N},this.renderThumbnail());return l.default.createElement("div",{role:"row",ref:"tileContainer",className:"tile__container",onKeyDown:this.handleKeyDown,tabIndex:y||h?0:-1,"aria-label":r,"aria-selected":g},l.default.createElement(s.WithDoubleClick,{onClick:w,onDoubleClick:I},(function(o){return l.default.createElement("div",i.__assign({},A,{onClick:o.onClick}),H,_&&e.renderCheckbox(),e.renderActionNode(),l.default.createElement(t.TileLabel,{onClick:L,ariaLabel:n&&n.name},T))})))},f.defaultProps={checkboxAriaText:"",checkboxTabIndex:-1,delayRenderFullTile:!0,handleToggleSelect:m,isFocused:!1,isSelected:!1,isViewOnly:!1,onDragEnter:m,onDragStart:m,onClick:m},f})(l.default.PureComponent);t.TileElementComponentForTests=h,t.TileElement=f.withThumbStore(h)})),define("modules/clean/react/maestro/components/tile_grid_logger",["require","exports","modules/clean/js_client_stopwatch","modules/core/browser"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteTileGridLogger=void 0;var l=(function(){function e(e,t,i,o){var l=this;this.recordTileError=function(e){var t=Math.floor(e/l.numTilesPerPage);l.pagesWithThumbErrors.has(t)||l.pagesWithThumbErrors.add(t)},this.recordTileLoaded=function(e,t,i){if(i){if(l.thumbsLoaded.has(e))return;l.thumbsLoaded.add(e)}else{if(l.iconsLoaded.has(e))return;l.iconsLoaded.add(e)}var o=!1;o=l.numTiles%l.numTilesPerPage==0?e>=l.numTiles-l.numTilesPerPage:e>=l.numTiles-l.numTiles%l.numTilesPerPage;var a=l.numTilesPerPage;if(o){var r=l.numTiles%l.numTilesPerPage;0!==r&&(a=r)}var n=Math.floor(e/l.numTilesPerPage);if(i||!t){var s=l.numTilesFinalizedByPage[n]||0;l.numTilesFinalizedByPage[n]=s+1}0===n&&l.handleTTI&&(!(l.iconsLoaded.has(e)&&l.thumbsLoaded.has(e))&&(l.numTilesLoadedOnFirstPage++,l.numTilesLoadedOnFirstPage===a&&l.handleTTI()));i&&(l.pagesWithThumbs.has(n)||l.pagesWithThumbs.add(n),l.anyThumbLoadedTimeByPage.get(n)||l.anyThumbLoadedTimeByPage.set(n,l.getTimeNow()),l.numTilesFinalizedByPage[n]===a&&l.allThumbsLoadedTimeByPage.set(n,l.getTimeNow()))},this.pruneTrackedPages=function(){l.startTimeByPage.forEach((function(e,t){!l.pagesToLog.has(t)&&!l.pagesCompletedLogging.has(t)&&l.getTimeNow()-e>2e3&&l.startTimeByPage.delete(t)}))},this.logCompletedPages=function(){l.pagesToLog.forEach((function(e){var t=l.startTimeByPage.get(e),i=Math.max(l.allThumbsLoadedTimeByPage.get(e),t),o=Math.max(l.anyThumbLoadedTimeByPage.get(e),t);!i||l.pagesWithThumbs.has(e)?l.pagesWithThumbErrors.has(e)?l.handlePageCompletedLogging(e):t&&i&&o&&(l.logPerfStats(e,t,o,i),l.handlePageCompletedLogging(e)):l.handlePageCompletedLogging(e)}))},this.numTiles=e,this.numTilesPerPage=t,this.numTilesFinalizedByPage=[],this.numTilesLoadedOnFirstPage=0,this.iconsLoaded=new Set,this.thumbsLoaded=new Set,this.startTimeByPage=new Map,this.allThumbsLoadedTimeByPage=new Map,this.anyThumbLoadedTimeByPage=new Map,this.pagesWithThumbErrors=new Set,this.pagesWithThumbs=new Set,this.pagesCompletedLogging=new Set,this.pagesToLog=new Set,this.handleTTI=o}return e.prototype.getTimeNow=function(){var e=o.performance(),t=-1;return e&&e.now&&(t=e.now()),t},e.prototype.updateNumTiles=function(e){this.numTiles>=e||(this.numTiles=e)},e.prototype.handlePageCompletedLogging=function(e){this.pagesCompletedLogging.add(e),this.pagesToLog.delete(e),this.startTimeByPage.delete(e),this.anyThumbLoadedTimeByPage.delete(e),this.allThumbsLoadedTimeByPage.delete(e)},e.logThumbLoadError=function(){i.JSStopwatch.recordTrace("visual_browse_thumb_load_error",{stopwatchName:"infinite_tile_grid_logging",traceTime:0})},e.logThumbRTT=function(e){i.JSStopwatch.recordTrace("visual_browse_thumb_rtt",{stopwatchName:"infinite_tile_grid_logging",traceTime:e})},e.prototype.logPerfStats=function(e,t,o,l){i.JSStopwatch.recordTrace("loaded_any_thumbs_page_"+e,{stopwatchName:"infinite_tile_grid_logging",traceTime:o-t}),i.JSStopwatch.recordTrace("loaded_all_thumbs_page_"+e,{stopwatchName:"infinite_tile_grid_logging",traceTime:l-t})},e})();t.InfiniteTileGridLogger=l})),define("modules/clean/react/browse/util",["require","exports","tslib","modules/clean/filepath/filepath","modules/clean/react/browse/models","modules/clean/react/browse/sort_helpers","modules/clean/react/files_view/types","modules/core/exception","modules/core/i18n"],(function(e,t,i,o,l,a,r,n,s){"use strict";function d(e,t){return{isFolder:e.is_dir,value:t,isAlwaysFirst:u(e)}}function u(e){return l.File.isTeamMemberFolder(e)||l.File.isFamilySharedFolder(e)}function c(e,t){return e&&t?0:e?-1:t?1:0}Object.defineProperty(t,"__esModule",{value:!0}),t.getSortedFilesToSelect=t.sortFiles=t.getSelectedFilesText=void 0,o=i.__importStar(o),t.getSelectedFilesText=function(e,t){var i=e.count(),o=s.intl.formatMessage({id:"v+fiz1",defaultMessage:"You only have partial access"});return i>0?1!==i||l.File.canViewFileMembers(e.first(),t)?s.intl.formatMessage({id:"cruh0p",defaultMessage:"{count, plural, one{{count} item selected} other{{count} items selected}}"},{count:i}):l.File.isNoAccessSharedFolder(e.first())?s.intl.formatMessage({id:"5Uq4ka",defaultMessage:"You don’t have access to this folder"}):o:t&&!t.canViewContainingNSMembers?o:""},t.sortFiles=function(e,t,i){var o=t.sortField,u=t.sortDirection,p=(function(e,t){switch(e){case r.SortField.FILENAME:case r.SortField.SHARED_WITH:return function(e){return d(e,l.File.getFilename(e))};case r.SortField.MODIFIED:return function(e){return d(e,e.ts)};case r.SortField.CATEGORY:return function(e){return d(e,l.File.getCategoryDescription(e))};case r.SortField.EXTENSION:return function(e){return d(e,l.File.getExtension(e))};case r.SortField.SIZE:return function(e){return d(e,e.is_dir&&(null==t?void 0:t.has(e.fq_path))?t.get(e.fq_path).size:e.bytes)};default:return}})(o,i),f=(function(e,t){var i=s.case_insensitive_comparator(!0),o=t===r.SortDirection.ASCENDING?1:-1;switch(e){case r.SortField.FILENAME:case r.SortField.SHARED_WITH:case r.SortField.SIZE:return(function(e,t){return function(i,o){var l=i.isFolder,r=i.value,n=i.isAlwaysFirst,s=o.isFolder,d=o.value,u=c(n,o.isAlwaysFirst);return 0!==u?u:(r||(r=1/0*e),d||(d=1/0*e),l&&s?a.compare(r,d,e,t):l?-e:s?e:a.compare(r,d,e,t))}})(o,i);case r.SortField.MODIFIED:case r.SortField.CATEGORY:case r.SortField.EXTENSION:return(function(e,t){return function(i,o){var l=i.isFolder,r=i.value,n=i.isAlwaysFirst,s=o.isFolder,d=o.value,u=c(n,o.isAlwaysFirst);return 0!==u?u:l&&s?a.compare(r,d,e,t):l?1:s?-1:""===r?1:""===d?-1:a.compare(r,d,e,t)}})(o,i);default:return}})(o,u);return p&&f?e.sortBy(p,f):(n.reportException({err:new Error("sortFiles was called with an unsupported sort field"),tags:["browse_sort_invalid_field"],severity:n.SEVERITY.CRITICAL,exc_extra:{sort_field:o}}),e)},t.getSortedFilesToSelect=function(e){var t=e.sortedFiles,i=e.fqPathsToSelect;return t.filter((function(e){return e.is_dir?i.some((function(t){return e.fq_path===t||o.inSubDirectory(e.fq_path,t)})):i.includes(e.fq_path)}))}}));
//# sourceMappingURL=pkg-browse-utils.min.js-vflRnJVaZ.map