define("modules/clean/abuse/funcaptcha_modal",["require","exports","tslib","react","modules/clean/deprecated_ajax/ajax_jquery","classnames","modules/clean/flux/base_store","modules/clean/flux/dispatcher","modules/clean/flux/store_listener","modules/constants/env","modules/constants/login_and_register","modules/core/browser_detection","modules/core/uri","react-dom","modules/core/dom","modules/clean/metrics/index","modules/core/exception","modules/clean/react/components/css"],(function(e,t,r,n,o,s,i,a,u,c,d,p,_,l,f,h,g,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recordFunCaptchaLoadingStats=t.openFuncaptchaModal=t.loadFuncaptchaModal=void 0,n=r.__importDefault(n),o=r.__importStar(o),s=r.__importDefault(s),d=r.__importStar(d),p=r.__importStar(p),l=r.__importStar(l),f=r.__importStar(f),g=r.__importStar(g);var E=function(e,t){a.Dispatcher.dispatch({type:e,data:t})},S=function(e,t,r,n){o.BackgroundRequest({url:"/log_invisible_recaptcha_event",data:{event:e,email:t,source:r,captcha_session_token:n}})};t.loadFuncaptchaModal=function(){var e=new O,t=u.listenToStores(T,{fs:e},(function(){return{show:e.show,email:e.email,firstTime:e.firstTime,onSuccess:e.onSuccess,onReady:e.onReady,runningFuncaptcha:e.runningFuncaptcha,source:e.source}})),r=document.createElement("div");document.body.insertBefore(r,document.body.firstChild||null),l.render(n.default.createElement(t,null),r)},t.openFuncaptchaModal=function(e,t,r,n){S("FUNCAPTCHA_START",e,t,""),E("FUNCAPTCHA_START",{email:e,source:t,onSuccess:r,onReady:n})},t.recordFunCaptchaLoadingStats=function(e,t,r,n){h.getMetricsReporter().createStats({ns:"abuse",name:"funcaptcha/"+e},{is_success:String(r)}).record(t),r||null==n||g.reportException({err:new Error(n),severity:g.SEVERITY.CRITICAL,tags:["content-abuse","funcaptcha"]})};var O=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.show=!1,t.email="",t.runningFuncaptcha=!1,t.firstTime=!0,t.source="",t}return r.__extends(t,e),t.prototype._new_payload=function(e){if(e&&e.action&&e.action.type)switch(e.action.type){case"FUNCAPTCHA_START":this.runningFuncaptcha=!0,this.firstTime=!1;var t=e.action.data;this.email=t.email,this.onSuccess=t.onSuccess,this.onReady=t.onReady,this.source=t.source,this.emit_change();break;case"FUNCAPTCHA_OPEN_MODAL":this.show=!0,this.emit_change();break;case"FUNCAPTCHA_FINISH":this.show=!1,this.runningFuncaptcha=!1,this.onSuccess=void 0,this.onReady=void 0,this.emit_change()}},t})(i.Store),v=(function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(o,e),o.prototype.getIFrame=function(){return l.findDOMNode(this.refs.iframe)},o.prototype.componentDidMount=function(){var e=this;window.addEventListener("message",(function(r){if(r.data&&"funcaptcha-component"===r.data.origin&&_.URI.parse(r.origin).getAuthority()===c.FUNCAPTCHA_SERVER)if("invoked"===r.data.event)e.props.onReady&&e.props.onReady();else if("loaded"===r.data.event)S("FUNCAPTCHA_CHALLENGE_SHOWN",e.props.email,e.props.source,r.data.fc_token||""),E("FUNCAPTCHA_OPEN_MODAL");else if("played"===r.data.event){var n=e.props.show?"FUNCAPTCHA_SOLVED":"FUNCAPTCHA_SUCCESS";S(n,e.props.email,e.props.source,r.data.fc_token||""),e.props.onSuccess(r.data.fc_token),E("FUNCAPTCHA_FINISH")}else"executed"===r.data.event&&t.recordFunCaptchaLoadingStats("funcaptcha_api_loading",r.data.latency,r.data.is_success,r.data.err_msg)}))},o.prototype.componentWillReceiveProps=function(e){if(!this.props.runningFuncaptcha&&e.runningFuncaptcha){var t=this.props.firstTime?"load":"play",r=e.source,n=void 0;n="LOGIN"===r?d.FUNCAPTCHA_PUBLIC_KEY:d.FUNCAPTCHA_REGISTER_PUBLIC_KEY;this.getIFrame().contentWindow.postMessage({event:t,origin:"funcaptcha-component",public_key:n,source:r},"*")}},o.prototype.componentDidUpdate=function(e,t){!e.show&&this.props.show?f.scroll_lock_document():e.show&&!this.props.show&&f.scroll_unlock_document()},o.prototype.render=function(){var e=new _.URI({scheme:"https",authority:c.FUNCAPTCHA_SERVER,query:{fc_nosuppress:_.URI.parse(window.location.href).getQuery().fc_nosuppress}}).toString(),t=n.default.createElement("iframe",{frameBorder:0,height:"100%",width:"100%",sandbox:"allow-scripts allow-same-origin allow-forms",className:"funcaptcha-frame",src:e,ref:"iframe",key:"iframe-id"});return n.default.createElement("div",{className:s.default({"funcaptcha-modal--hidden-firefox":!this.props.show&&p.mozilla,"funcaptcha-modal--hidden-non-firefox":!this.props.show&&!p.mozilla,"funcaptcha-modal":!0})},n.default.createElement("div",{className:"funcaptcha-div"},t))},o})(n.default.Component),T=m.requireCssWithComponent(v,["/static/css/abuse/funcaptcha_modal-vfl6bl9tt.css"])})),define("modules/clean/abuse/invisible_captcha",["require","exports","tslib","modules/clean/abuse/captcha_helper","modules/clean/deprecated_pyxl/controllers/ajax_form"],(function(e,t,r,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadCaptcha=void 0,o=r.__importDefault(o),t.loadCaptcha=function(t,s,i,a,u){var c=n.LoadRecaptcha(u,!0).then((function(n){return s.on(o.default.ERROR_EVENT,(function(n,o){o&&o.funcaptcha_response&&(t.set_pending_state(),new Promise((function(t,r){e(["modules/clean/abuse/funcaptcha_modal"],t,r)})).then(r.__importStar).then((function(e){(0,e.openFuncaptchaModal)(s.find("input[name='"+i+"']").val(),a,(function(e){var r=document.createElement("input");r.setAttribute("name","funcaptcha-response"),r.setAttribute("value",e),r.setAttribute("type","hidden"),t.$form.append(r),t.send_request(),t.$form.find("[name='funcaptcha-response']").remove()}))})))})),n}));t.send_request_wrapper=function(){c.then((function(){t.send_request()}))}}})),define("modules/clean/auth/u2f",["require","exports","tslib","u2f-api","modules/core/browser_detection"],(function(e,t,r,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sign=t.register=t.canUseAuthenticator=t.canRegisterAuthenticator=t.isSupportedOnBrowser=t.LATEST_PROTOCOL=t.PROTOCOLS=t.FidoU2f=void 0,n=r.__importDefault(n),o=r.__importStar(o),(function(e){var t;(function(e){e.bt="bt",e.ble="ble",e.nfc="nfc",e.usb="usb"})(t||(t={})),(function(e){e[e.OK=0]="OK",e[e.OTHER_ERROR=1]="OTHER_ERROR",e[e.BAD_REQUEST=2]="BAD_REQUEST",e[e.CONFIGURATION_UNSUPPORTED=3]="CONFIGURATION_UNSUPPORTED",e[e.DEVICE_INELIGIBLE=4]="DEVICE_INELIGIBLE",e[e.TIMEOUT=5]="TIMEOUT"})(e.ErrorCode||(e.ErrorCode={}))})(t.FidoU2f||(t.FidoU2f={})),t.PROTOCOLS={"u2f_js1.1":""},t.LATEST_PROTOCOL="u2f_js1.1";var s=window.u2f;function i(){return!0===o.chrome&&parseInt(o.version,10)>=38&&!o.is_mobile_or_tablet()||Boolean(s)}t.isSupportedOnBrowser=i,t.canRegisterAuthenticator=function(e){return!!e&&i()},t.canUseAuthenticator=function(e){return!!e&&i()},t.register=function(e){return new Promise((function(t,r){(s||n.default).register(e.appId,e.registerRequests,e.registeredKeys,t,e.opt_timeoutSeconds)}))},t.sign=function(e){return new Promise((function(t,r){(s||n.default).sign(e.appId,e.challenge,e.registeredKeys,t,e.opt_timeoutSeconds)}))}})),define("modules/clean/auth/authenticator",["require","exports","tslib","modules/clean/auth/u2f","modules/clean/auth/webauthn"],(function(e,t,r,n,o){"use strict";function s(e){return o.canRegisterAuthenticator(e[o.LATEST_PROTOCOL])?o.LATEST_PROTOCOL:n.canRegisterAuthenticator(e[n.LATEST_PROTOCOL])?n.LATEST_PROTOCOL:null}function i(e){return o.canUseAuthenticator(e[o.LATEST_PROTOCOL])?o.LATEST_PROTOCOL:n.canUseAuthenticator(e[n.LATEST_PROTOCOL])?n.LATEST_PROTOCOL:null}Object.defineProperty(t,"__esModule",{value:!0}),t.sign=t.register=t.canUseAuthenticator=t.canRegisterAuthenticator=t.isWebAuthnEnabled=t.PROTOCOLS=void 0,n=r.__importStar(n),o=r.__importStar(o),t.PROTOCOLS=r.__assign(r.__assign({},n.PROTOCOLS),o.PROTOCOLS),t.isWebAuthnEnabled=function(e){return!!e&&!!e[o.LATEST_PROTOCOL]},t.canRegisterAuthenticator=function(e){return void 0===e?n.isSupportedOnBrowser():null!==s(e)},t.canUseAuthenticator=function(e){return null!==i(e)};var a={error:"Authenticator devices are not supported on this browser"},u={error:"Authenticator protocol not supported"};function c(e,t){var r;return null!==(r="register"===e?s(t):i(t))?Promise.resolve(r):n.isSupportedOnBrowser()||o.isSupportedOnBrowser()?Promise.reject(u):Promise.reject(a)}t.register=function(e){return c("register",e).then((function(t){return t in o.PROTOCOLS?o.register(e[t]).then((function(r){return{protocol:t,challenge_id:e.challenge_id,response:r}})):t in n.PROTOCOLS?n.register(e[t]).then((function(r){return{protocol:t,challenge_id:e.challenge_id,response:r}})):Promise.reject(u)}))},t.sign=function(e){return c("sign",e).then((function(t){return t in o.PROTOCOLS?o.sign(e[t]).then((function(r){return{protocol:t,challenge_id:e.challenge_id,response:r}})):t in n.PROTOCOLS?n.sign(e[t]).then((function(r){return{protocol:t,challenge_id:e.challenge_id,response:r}})):Promise.reject(u)}))}})),define("modules/clean/auth/webauthn",["require","exports","tslib","modules/core/browser_detection","modules/clean/security/util"],(function(e,t,r,n,o){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),t.sign=t.register=t.canUseAuthenticator=t.canRegisterAuthenticator=t.isSupportedOnBrowser=t.LATEST_PROTOCOL=t.PROTOCOLS=void 0,n=r.__importStar(n),t.PROTOCOLS={webauthn_wd07:""},t.LATEST_PROTOCOL="webauthn_wd07",(function(e){e[e.OtherError=1]="OtherError",e[e.SecurityError=2]="SecurityError",e[e.NotAllowedError=3]="NotAllowedError",e[e.InvalidStateError=4]="InvalidStateError",e[e.Canceled=5]="Canceled",e[e.Timeout=6]="Timeout",e[e.NotSupportedError=7]="NotSupportedError"})(s||(s={}));var i,a={SecurityError:s.SecurityError,NotAllowedError:s.NotAllowedError,InvalidStateError:s.InvalidStateError,AbortError:s.Canceled,TimeoutError:s.Timeout,NotSupportedError:s.NotSupportedError};function u(){return window.PublicKeyCredential&&(!0===n.mozilla&&parseInt(n.version,10)>=60||!0===n.chrome&&parseInt(n.version,10)>=66||!0===n.edge&&parseFloat(n.version)>=17.17682||!0===n.safari&&parseFloat(n.version)>=12.2)}function c(e){return!(!e||!u())&&((!0!==n.edge||!0!==e.disable_on_edge)&&(!0!==n.safari||!0!==e.disable_on_safari))}function d(e){if(e instanceof DOMException){var t=a[e.name];if(void 0!==t)return{errorCode:t,errorData:e.toString&&e.toString()}}return{errorCode:s.OtherError,errorData:e.toString&&e.toString()}}(function(e){e[e.COSE=0]="COSE",e[e.DER=1]="DER"})(i||(i={})),t.isSupportedOnBrowser=u,t.canRegisterAuthenticator=function(e){return c(e)},t.canUseAuthenticator=function(e){return c(e)&&(function(e){if(!0===n.edge&&parseFloat(n.version)>=17.17682&&parseFloat(n.version)<17.17713||!0===n.chrome&&69===parseInt(n.version,10)||!0===n.safari&&parseFloat(n.version)<13.1){if(e.allowCredentials)for(var t=0,r=e.allowCredentials;t<r.length;t++){if(r[t].key_format===i.COSE)return!0}return!1}return!0})(e)},t.register=function(e){var t={challenge:o.b64urldecode(e.challenge),timeout:e.timeout,rp:{id:e.rp.id,name:e.rp.name,icon:e.rp.icon},user:{id:o.b64urldecode(e.user.id),name:e.user.name,displayName:e.user.displayName,icon:e.user.icon},authenticatorSelection:e.authenticatorSelection};return void 0!==e.excludeCredentials&&(t.excludeCredentials=e.excludeCredentials.map((function(e){return{type:e.type,id:o.b64urldecode(e.id),transports:e.transports}}))),void 0!==e.pubKeyCredParams&&(t.pubKeyCredParams=e.pubKeyCredParams.map((function(e){return{type:e.type,alg:e.alg}}))),void 0===e.attestation&&(t.attestation="direct"),navigator.credentials.create({publicKey:t}).then((function(e){return{response:{clientDataJSON:o.b64urlencode(e.response.clientDataJSON),attestationObject:o.b64urlencode(e.response.attestationObject)}}})).catch((function(e){return d(e)}))},t.sign=function(e){var t={challenge:o.b64urldecode(e.challenge),timeout:e.timeout,rpId:e.rpId,userVerification:e.userVerification,extensions:e.extensions};return void 0!==e.allowCredentials&&(t.allowCredentials=e.allowCredentials.map((function(e){var t=void 0;return e.transports&&e.transports.length>0&&(t=e.transports),{type:e.type,id:o.b64urldecode(e.id),transports:t}}))),navigator.credentials.get({publicKey:t}).then((function(e){return{id:e.id,response:{clientDataJSON:o.b64urlencode(e.response.clientDataJSON),authenticatorData:o.b64urlencode(e.response.authenticatorData),signature:o.b64urlencode(e.response.signature),userHandle:e.response.userHandle&&o.b64urlencode(e.response.userHandle)}}})).catch((function(e){return d(e)}))}})),define("modules/clean/sso_login_checks",["require","exports","tslib","modules/clean/deprecated_ajax/ajax_jquery"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SsoLoginChecks=void 0,n=r.__importStar(n);var o=(function(){function e(e,t,r,n){void 0===n&&(n=!0),this._trigger_check_sso_state=this._trigger_check_sso_state.bind(this),this.check_sso_state=this.check_sso_state.bind(this),this.$email_input=e,this.show_sso_fn=t,this.hide_sso_fn=r,this.should_trigger_check=n,this.should_trigger_check&&(this._trigger_check_sso_state(),this.$email_input.on("input keyup change",this._trigger_check_sso_state))}return e.initClass=function(){this._sso_check_in_flight={},this._sso_check_cache={}},e.prototype._trigger_check_sso_state=function(){var e=this.$email_input.val();return this.check_sso_state(e)},e.prototype.check_sso_state=function(t){var r=this,o=t.trim();if(!o.match(/^[^@\s]+@[^@\s]+\.[A-Za-z]{2,}$/))return this.hide_sso_fn();var s=o.toLowerCase();return s in e._sso_check_cache?this._handle_sso_state(e._sso_check_cache[s]):e._sso_check_in_flight[s]?void 0:(e._sso_check_in_flight[s]=!0,n.WebRequest({url:"/sso_state",data:{email:o},success:function(n){return n=JSON.parse(n),delete e._sso_check_in_flight[s],e._sso_check_cache[s]=n.user_sso_state,r.should_trigger_check&&r.$email_input.val()!==t?r._trigger_check_sso_state():r._handle_sso_state(n.user_sso_state)},error:function(){return delete e._sso_check_in_flight[s],r.hide_sso_fn()}}))},e.prototype._handle_sso_state=function(e){return"required"===e?this.show_sso_fn(!1):"optional"===e?this.show_sso_fn(!0):this.hide_sso_fn()},e})();t.SsoLoginChecks=o,o.initClass()})),define("modules/clean/web_register_logging_data",["require","exports","tslib","modules/core/browser","modules/core/transport/query_string_helpers"],(function(e,t,r,n,o){"use strict";function s(){return{signupUrl:n.get_href(),signupReferrer:document.referrer,trackingParams:o.getTrackingParamsAsJSON()}}Object.defineProperty(t,"__esModule",{value:!0}),t.setWebRegisterLoggingData=t.getWebRegisterLoggingData=void 0,n=r.__importStar(n),t.getWebRegisterLoggingData=s,t.setWebRegisterLoggingData=function(e){void 0===e&&(e={});var t=s(),n={signup_url:t.signupUrl,signup_referrer:t.signupReferrer,tracking_params:t.trackingParams};return r.__assign(r.__assign({},e),n)}})),define("modules/clean/react/fedramp/fedramp_util",["require","exports","modules/core/uri"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFedrampRedirectUrlIfApplicable=void 0,t.getFedrampRedirectUrlIfApplicable=function(e,t){return e?String(new r.URI({path:"/fedramp_message"}).updateQuery({cont:t})):t}})),define("prod_assets_web_modules/u2f-api",["./common/_commonjsHelpers"],(function(e){"use strict";var t,r=r||{},n=r;r.EXTENSION_ID="kmendfapggjehodndflmmgagdbamhnfd",r.MessageTypes={U2F_REGISTER_REQUEST:"u2f_register_request",U2F_REGISTER_RESPONSE:"u2f_register_response",U2F_SIGN_REQUEST:"u2f_sign_request",U2F_SIGN_RESPONSE:"u2f_sign_response",U2F_GET_API_VERSION_REQUEST:"u2f_get_api_version_request",U2F_GET_API_VERSION_RESPONSE:"u2f_get_api_version_response"},r.ErrorCodes={OK:0,OTHER_ERROR:1,BAD_REQUEST:2,CONFIGURATION_UNSUPPORTED:3,DEVICE_INELIGIBLE:4,TIMEOUT:5},r.getMessagePort=function(e){if("undefined"!=typeof chrome&&chrome.runtime){var t={type:r.MessageTypes.U2F_SIGN_REQUEST,signRequests:[]};chrome.runtime.sendMessage(r.EXTENSION_ID,t,(function(){chrome.runtime.lastError?r.getIframePort_(e):r.getChromeRuntimePort_(e)}))}else r.isAndroidChrome_()?r.getAuthenticatorPort_(e):r.isIosChrome_()?r.getIosPort_(e):r.getIframePort_(e)},r.isAndroidChrome_=function(){var e=navigator.userAgent;return-1!=e.indexOf("Chrome")&&-1!=e.indexOf("Android")},r.isIosChrome_=function(){return["iPhone","iPad","iPod"].indexOf(navigator.platform)>-1},r.getChromeRuntimePort_=function(e){var t=chrome.runtime.connect(r.EXTENSION_ID,{includeTlsChannelId:!0});setTimeout((function(){e(new r.WrappedChromeRuntimePort_(t))}),0)},r.getAuthenticatorPort_=function(e){setTimeout((function(){e(new r.WrappedAuthenticatorPort_)}),0)},r.getIosPort_=function(e){setTimeout((function(){e(new r.WrappedIosPort_)}),0)},r.WrappedChromeRuntimePort_=function(e){this.port_=e},r.formatSignRequest_=function(e,n,o,s,i){if(void 0===t||t<1.1){for(var a=[],u=0;u<o.length;u++)a[u]={version:o[u].version,challenge:n,keyHandle:o[u].keyHandle,appId:e};return{type:r.MessageTypes.U2F_SIGN_REQUEST,signRequests:a,timeoutSeconds:s,requestId:i}}return{type:r.MessageTypes.U2F_SIGN_REQUEST,appId:e,challenge:n,registeredKeys:o,timeoutSeconds:s,requestId:i}},r.formatRegisterRequest_=function(e,n,o,s,i){if(void 0===t||t<1.1){for(var a=0;a<o.length;a++)o[a].appId=e;var u=[];for(a=0;a<n.length;a++)u[a]={version:n[a].version,challenge:o[0],keyHandle:n[a].keyHandle,appId:e};return{type:r.MessageTypes.U2F_REGISTER_REQUEST,signRequests:u,registerRequests:o,timeoutSeconds:s,requestId:i}}return{type:r.MessageTypes.U2F_REGISTER_REQUEST,appId:e,registerRequests:o,registeredKeys:n,timeoutSeconds:s,requestId:i}},r.WrappedChromeRuntimePort_.prototype.postMessage=function(e){this.port_.postMessage(e)},r.WrappedChromeRuntimePort_.prototype.addEventListener=function(e,t){var r=e.toLowerCase();"message"==r||"onmessage"==r?this.port_.onMessage.addListener((function(e){t({data:e})})):console.error("WrappedChromeRuntimePort only supports onMessage")},r.WrappedAuthenticatorPort_=function(){this.requestId_=-1,this.requestObject_=null},r.WrappedAuthenticatorPort_.prototype.postMessage=function(e){var t=r.WrappedAuthenticatorPort_.INTENT_URL_BASE_+";S.request="+encodeURIComponent(JSON.stringify(e))+";end";document.location=t},r.WrappedAuthenticatorPort_.prototype.getPortType=function(){return"WrappedAuthenticatorPort_"},r.WrappedAuthenticatorPort_.prototype.addEventListener=function(e,t){"message"==e.toLowerCase()?window.addEventListener("message",this.onRequestUpdate_.bind(this,t),!1):console.error("WrappedAuthenticatorPort only supports message")},r.WrappedAuthenticatorPort_.prototype.onRequestUpdate_=function(e,t){var r=JSON.parse(t.data);r.intentURL,r.errorCode;var n=null;r.hasOwnProperty("data")&&(n=JSON.parse(r.data)),e({data:n})},r.WrappedAuthenticatorPort_.INTENT_URL_BASE_="intent:#Intent;action=com.google.android.apps.authenticator.AUTHENTICATE",r.WrappedIosPort_=function(){},r.WrappedIosPort_.prototype.postMessage=function(e){var t=JSON.stringify(e),r="u2f://auth?"+encodeURI(t);location.replace(r)},r.WrappedIosPort_.prototype.getPortType=function(){return"WrappedIosPort_"},r.WrappedIosPort_.prototype.addEventListener=function(e,t){"message"!==e.toLowerCase()&&console.error("WrappedIosPort only supports message")},r.getIframePort_=function(e){var t="chrome-extension://"+r.EXTENSION_ID,n=document.createElement("iframe");n.src=t+"/u2f-comms.html",n.setAttribute("style","display:none"),document.body.appendChild(n);var o=new MessageChannel,s=function(t){"ready"==t.data?(o.port1.removeEventListener("message",s),e(o.port1)):console.error('First event on iframe port was not "ready"')};o.port1.addEventListener("message",s),o.port1.start(),n.addEventListener("load",(function(){n.contentWindow.postMessage("init",t,[o.port2])}))},r.EXTENSION_TIMEOUT_SEC=30,r.port_=null,r.waitingForPort_=[],r.reqCounter_=0,r.callbackMap_={},r.getPortSingleton_=function(e){r.port_?e(r.port_):(0==r.waitingForPort_.length&&r.getMessagePort((function(e){for(r.port_=e,r.port_.addEventListener("message",r.responseHandler_);r.waitingForPort_.length;)r.waitingForPort_.shift()(r.port_)})),r.waitingForPort_.push(e))},r.responseHandler_=function(e){var t=e.data,n=t.requestId;if(n&&r.callbackMap_[n]){var o=r.callbackMap_[n];delete r.callbackMap_[n],o(t.responseData)}else console.error("Unknown or missing requestId in response.")},r.isSupported=function(e){var n=!1;function o(t){n||(n=!0,e(t))}r.getApiVersion((function(e){t=void 0===e.js_api_version?0:e.js_api_version,o(!0)})),setTimeout(o.bind(null,!1),500)},r.sign=function(e,n,o,s,i){void 0===t?r.getApiVersion((function(a){t=void 0===a.js_api_version?0:a.js_api_version,console.log("Extension JS API Version: ",t),r.sendSignRequest(e,n,o,s,i)})):r.sendSignRequest(e,n,o,s,i)},r.sendSignRequest=function(e,t,n,o,s){r.getPortSingleton_((function(i){var a=++r.reqCounter_;r.callbackMap_[a]=o;var u=void 0!==s?s:r.EXTENSION_TIMEOUT_SEC,c=r.formatSignRequest_(e,t,n,u,a);i.postMessage(c)}))},r.register=function(e,n,o,s,i){void 0===t?r.getApiVersion((function(a){t=void 0===a.js_api_version?0:a.js_api_version,console.log("Extension JS API Version: ",t),r.sendRegisterRequest(e,n,o,s,i)})):r.sendRegisterRequest(e,n,o,s,i)},r.sendRegisterRequest=function(e,t,n,o,s){r.getPortSingleton_((function(i){var a=++r.reqCounter_;r.callbackMap_[a]=o;var u=void 0!==s?s:r.EXTENSION_TIMEOUT_SEC,c=r.formatRegisterRequest_(e,n,t,u,a);i.postMessage(c)}))},r.getApiVersion=function(e,t){r.getPortSingleton_((function(n){if(n.getPortType){var o;switch(n.getPortType()){case"WrappedIosPort_":case"WrappedAuthenticatorPort_":o=1.1;break;default:o=0}e({js_api_version:o})}else{var s=++r.reqCounter_;r.callbackMap_[s]=e;var i={type:r.MessageTypes.U2F_GET_API_VERSION_REQUEST,timeoutSeconds:void 0!==t?t:r.EXTENSION_TIMEOUT_SEC,requestId:s};n.postMessage(i)}}))};var o=e.createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r="undefined"!=typeof navigator&&!!navigator.userAgent,o=r&&navigator.userAgent.match(/Safari\//)&&!navigator.userAgent.match(/Chrome\//),s=r&&navigator.userAgent.match(/Edge\/1[2345]/),i=null;function a(){return i||(i=new Promise((function(e,t){function i(){e({u2f:null})}return r?o?i():void 0!==window.u2f&&"function"==typeof window.u2f.sign?e({u2f:window.u2f}):s||"http:"===location.protocol||"undefined"==typeof MessageChannel?i():void n.isSupported((function(t){t?e({u2f:n}):i()})):i()}))),i}function u(e,r){var n=null!=r?r.errorCode:1,o=t.ErrorNames[""+n],s=new Error(e);return s.metaData={type:o,code:n},s}function c(e){if(!e.u2f){if("http:"===location.protocol)throw new Error("U2F isn't supported over http, only https");throw new Error("U2F not supported")}}t.ErrorCodes={OK:0,OTHER_ERROR:1,BAD_REQUEST:2,CONFIGURATION_UNSUPPORTED:3,DEVICE_INELIGIBLE:4,TIMEOUT:5},t.ErrorNames={0:"OK",1:"OTHER_ERROR",2:"BAD_REQUEST",3:"CONFIGURATION_UNSUPPORTED",4:"DEVICE_INELIGIBLE",5:"TIMEOUT"},t.isSupported=function(){return a().then((function(e){return!!e.u2f}))},t.ensureSupport=function(){return a().then(c)},t.register=function(e,t,r){return Array.isArray(e)||(e=[e]),"number"==typeof t&&void 0===r&&(r=t,t=null),t||(t=[]),a().then((function(n){c(n);var o=n.u2f;return new Promise((function(n,s){var i=e[0].appId;o.register(i,e,t,(function(e){e.errorCode?s(u("Registration failed",e)):(delete e.errorCode,n(e))}),r)}))}))},t.sign=function(e,t){return Array.isArray(e)||(e=[e]),a().then((function(r){c(r);var n=r.u2f;return new Promise((function(r,o){var s=e[0].appId,i=e[0].challenge;n.sign(s,i,e,(function(e){e.errorCode?o(u("Sign failed",e)):(delete e.errorCode,r(e))}),t)}))}))}})),s=e.createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),(function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])})(o),t.default=o}));return e.getDefaultExportFromCjs(s)}));
//# sourceMappingURL=pkg-login-pages-externals.min.js-vflmJ3QH4.map